var kN=Object.defineProperty;var TN=(t,e,n)=>e in t?kN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>(TN(t,typeof e!="symbol"?e+"":e,n),n);function IN(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function NN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vh={exports:{}},Bh={},k={exports:{}},Y={};var Al=Symbol.for("react.element"),RN=Symbol.for("react.portal"),AN=Symbol.for("react.fragment"),PN=Symbol.for("react.strict_mode"),DN=Symbol.for("react.profiler"),MN=Symbol.for("react.provider"),ON=Symbol.for("react.context"),LN=Symbol.for("react.forward_ref"),FN=Symbol.for("react.suspense"),$N=Symbol.for("react.memo"),UN=Symbol.for("react.lazy"),C_=Symbol.iterator;function zN(t){return t===null||typeof t!="object"?null:(t=C_&&t[C_]||t["@@iterator"],typeof t=="function"?t:null)}var ZE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ex=Object.assign,tx={};function So(t,e,n){this.props=t,this.context=e,this.refs=tx,this.updater=n||ZE}So.prototype.isReactComponent={};So.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};So.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nx(){}nx.prototype=So.prototype;function xm(t,e,n){this.props=t,this.context=e,this.refs=tx,this.updater=n||ZE}var Sm=xm.prototype=new nx;Sm.constructor=xm;ex(Sm,So.prototype);Sm.isPureReactComponent=!0;var b_=Array.isArray,ix=Object.prototype.hasOwnProperty,Cm={current:null},sx={key:!0,ref:!0,__self:!0,__source:!0};function rx(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)ix.call(e,i)&&!sx.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:Al,type:t,key:r,ref:o,props:s,_owner:Cm.current}}function VN(t,e){return{$$typeof:Al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Al}function BN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k_=/\/+/g;function of(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BN(""+t.key):e.toString(36)}function Zc(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Al:case RN:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+of(o,0):i,b_(s)?(n="",t!=null&&(n=t.replace(k_,"$&/")+"/"),Zc(s,e,n,"",function(c){return c})):s!=null&&(bm(s)&&(s=VN(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(k_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",b_(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+of(r,a);o+=Zc(r,e,n,l,s)}else if(l=zN(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+of(r,a++),o+=Zc(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pc(t,e,n){if(t==null)return t;var i=[],s=0;return Zc(t,i,"","",function(r){return e.call(n,r,s++)}),i}function jN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pt={current:null},eu={transition:null},WN={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:eu,ReactCurrentOwner:Cm};Y.Children={map:pc,forEach:function(t,e,n){pc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pc(t,function(){e++}),e},toArray:function(t){return pc(t,function(e){return e})||[]},only:function(t){if(!bm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=So;Y.Fragment=AN;Y.Profiler=DN;Y.PureComponent=xm;Y.StrictMode=PN;Y.Suspense=FN;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WN;Y.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ex({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Cm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ix.call(e,l)&&!sx.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Al,type:t.type,key:s,ref:r,props:i,_owner:o}};Y.createContext=function(t){return t={$$typeof:ON,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MN,_context:t},t.Consumer=t};Y.createElement=rx;Y.createFactory=function(t){var e=rx.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:LN,render:t}};Y.isValidElement=bm;Y.lazy=function(t){return{$$typeof:UN,_payload:{_status:-1,_result:t},_init:jN}};Y.memo=function(t,e){return{$$typeof:$N,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};Y.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Y.useCallback=function(t,e){return Pt.current.useCallback(t,e)};Y.useContext=function(t){return Pt.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return Pt.current.useDeferredValue(t)};Y.useEffect=function(t,e){return Pt.current.useEffect(t,e)};Y.useId=function(){return Pt.current.useId()};Y.useImperativeHandle=function(t,e,n){return Pt.current.useImperativeHandle(t,e,n)};Y.useInsertionEffect=function(t,e){return Pt.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return Pt.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return Pt.current.useMemo(t,e)};Y.useReducer=function(t,e,n){return Pt.current.useReducer(t,e,n)};Y.useRef=function(t){return Pt.current.useRef(t)};Y.useState=function(t){return Pt.current.useState(t)};Y.useSyncExternalStore=function(t,e,n){return Pt.current.useSyncExternalStore(t,e,n)};Y.useTransition=function(){return Pt.current.useTransition()};Y.version="18.2.0";(function(t){t.exports=Y})(k);const wn=NN(k.exports),mp=IN({__proto__:null,default:wn},[k.exports]);var HN=k.exports,qN=Symbol.for("react.element"),KN=Symbol.for("react.fragment"),GN=Object.prototype.hasOwnProperty,QN=HN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YN={key:!0,ref:!0,__self:!0,__source:!0};function ox(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)GN.call(e,i)&&!YN.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:qN,type:t,key:r,ref:o,props:s,_owner:QN.current}}Bh.Fragment=KN;Bh.jsx=ox;Bh.jsxs=ox;(function(t){t.exports=Bh})(Vh);const si=Vh.exports.Fragment,C=Vh.exports.jsx,ee=Vh.exports.jsxs;var yp={},ax={exports:{}},en={},lx={exports:{}},cx={};(function(t){function e(A,B){var j=A.length;A.push(B);e:for(;0<j;){var fe=j-1>>>1,_e=A[fe];if(0<s(_e,B))A[fe]=B,A[j]=_e,j=fe;else break e}}function n(A){return A.length===0?null:A[0]}function i(A){if(A.length===0)return null;var B=A[0],j=A.pop();if(j!==B){A[0]=j;e:for(var fe=0,_e=A.length,In=_e>>>1;fe<In;){var qt=2*(fe+1)-1,Hn=A[qt],Kt=qt+1,fc=A[Kt];if(0>s(Hn,j))Kt<_e&&0>s(fc,Hn)?(A[fe]=fc,A[Kt]=j,fe=Kt):(A[fe]=Hn,A[qt]=j,fe=qt);else if(Kt<_e&&0>s(fc,j))A[fe]=fc,A[Kt]=j,fe=Kt;else break e}}return B}function s(A,B){var j=A.sortIndex-B.sortIndex;return j!==0?j:A.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(A){for(var B=n(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=A)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(c)}}function w(A){if(g=!1,_(A),!p)if(n(l)!==null)p=!0,De(E);else{var B=n(c);B!==null&&pt(w,B.startTime-A)}}function E(A,B){p=!1,g&&(g=!1,y(b),b=-1),f=!0;var j=d;try{for(_(B),h=n(l);h!==null&&(!(h.expirationTime>B)||A&&!V());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,d=h.priorityLevel;var _e=fe(h.expirationTime<=B);B=t.unstable_now(),typeof _e=="function"?h.callback=_e:h===n(l)&&i(l),_(B)}else i(l);h=n(l)}if(h!==null)var In=!0;else{var qt=n(c);qt!==null&&pt(w,qt.startTime-B),In=!1}return In}finally{h=null,d=j,f=!1}}var x=!1,S=null,b=-1,L=5,D=-1;function V(){return!(t.unstable_now()-D<L)}function Z(){if(S!==null){var A=t.unstable_now();D=A;var B=!0;try{B=S(!0,A)}finally{B?Le():(x=!1,S=null)}}else x=!1}var Le;if(typeof m=="function")Le=function(){m(Z)};else if(typeof MessageChannel<"u"){var Ht=new MessageChannel,be=Ht.port2;Ht.port1.onmessage=Z,Le=function(){be.postMessage(null)}}else Le=function(){v(Z,0)};function De(A){S=A,x||(x=!0,Le())}function pt(A,B){b=v(function(){A(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,De(E))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(A){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var j=d;d=B;try{return A()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,B){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var j=d;d=A;try{return B()}finally{d=j}},t.unstable_scheduleCallback=function(A,B,j){var fe=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?fe+j:fe):j=fe,A){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=j+_e,A={id:u++,callback:B,priorityLevel:A,startTime:j,expirationTime:_e,sortIndex:-1},j>fe?(A.sortIndex=j,e(c,A),n(l)===null&&A===n(c)&&(g?(y(b),b=-1):g=!0,pt(w,j-fe))):(A.sortIndex=_e,e(l,A),p||f||(p=!0,De(E))),A},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(A){var B=d;return function(){var j=d;d=B;try{return A.apply(this,arguments)}finally{d=j}}}})(cx);(function(t){t.exports=cx})(lx);var ux=k.exports,Jt=lx.exports;function T(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hx=new Set,Ua={};function or(t,e){Jr(t,e),Jr(t+"Capture",e)}function Jr(t,e){for(Ua[t]=e,t=0;t<e.length;t++)hx.add(e[t])}var ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_p=Object.prototype.hasOwnProperty,XN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T_={},I_={};function JN(t){return _p.call(I_,t)?!0:_p.call(T_,t)?!1:XN.test(t)?I_[t]=!0:(T_[t]=!0,!1)}function ZN(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eR(t,e,n,i){if(e===null||typeof e>"u"||ZN(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var km=/[\-:]([a-z])/g;function Tm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(km,Tm);ut[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(km,Tm);ut[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(km,Tm);ut[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Im(t,e,n,i){var s=ut.hasOwnProperty(e)?ut[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eR(e,n,s,i)&&(n=null),i||s===null?JN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var mi=ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gc=Symbol.for("react.element"),_r=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),dx=Symbol.for("react.provider"),fx=Symbol.for("react.context"),Rm=Symbol.for("react.forward_ref"),wp=Symbol.for("react.suspense"),Ep=Symbol.for("react.suspense_list"),Am=Symbol.for("react.memo"),xi=Symbol.for("react.lazy"),px=Symbol.for("react.offscreen"),N_=Symbol.iterator;function zo(t){return t===null||typeof t!="object"?null:(t=N_&&t[N_]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,af;function sa(t){if(af===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);af=e&&e[1]||""}return`
`+af+t}var lf=!1;function cf(t,e){if(!t||lf)return"";lf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sa(t):""}function tR(t){switch(t.tag){case 5:return sa(t.type);case 16:return sa("Lazy");case 13:return sa("Suspense");case 19:return sa("SuspenseList");case 0:case 2:case 15:return t=cf(t.type,!1),t;case 11:return t=cf(t.type.render,!1),t;case 1:return t=cf(t.type,!0),t;default:return""}}function xp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vr:return"Fragment";case _r:return"Portal";case vp:return"Profiler";case Nm:return"StrictMode";case wp:return"Suspense";case Ep:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fx:return(t.displayName||"Context")+".Consumer";case dx:return(t._context.displayName||"Context")+".Provider";case Rm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Am:return e=t.displayName||null,e!==null?e:xp(t.type)||"Memo";case xi:e=t._payload,t=t._init;try{return xp(t(e))}catch{}}return null}function nR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xp(e);case 8:return e===Nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function gx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iR(t){var e=gx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mc(t){t._valueTracker||(t._valueTracker=iR(t))}function mx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=gx(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function bu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sp(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function R_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=es(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yx(t,e){e=e.checked,e!=null&&Im(t,"checked",e,!1)}function Cp(t,e){yx(t,e);var n=es(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bp(t,e.type,n):e.hasOwnProperty("defaultValue")&&bp(t,e.type,es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function A_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bp(t,e,n){(e!=="number"||bu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ra=Array.isArray;function Mr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+es(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function P_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(T(92));if(ra(n)){if(1<n.length)throw Error(T(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:es(n)}}function _x(t,e){var n=es(e.value),i=es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function D_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yc,wx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yc=yc||document.createElement("div"),yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function za(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sR=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){sR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function Ex(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function xx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Ex(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var rR=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ip(t,e){if(e){if(rR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function Np(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rp=null;function Pm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ap=null,Or=null,Lr=null;function M_(t){if(t=Ml(t)){if(typeof Ap!="function")throw Error(T(280));var e=t.stateNode;e&&(e=Kh(e),Ap(t.stateNode,t.type,e))}}function Sx(t){Or?Lr?Lr.push(t):Lr=[t]:Or=t}function Cx(){if(Or){var t=Or,e=Lr;if(Lr=Or=null,M_(t),e)for(t=0;t<e.length;t++)M_(e[t])}}function bx(t,e){return t(e)}function kx(){}var uf=!1;function Tx(t,e,n){if(uf)return t(e,n);uf=!0;try{return bx(t,e,n)}finally{uf=!1,(Or!==null||Lr!==null)&&(kx(),Cx())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var i=Kh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(T(231,e,typeof n));return n}var Pp=!1;if(ai)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){Pp=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{Pp=!1}function oR(t,e,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var _a=!1,ku=null,Tu=!1,Dp=null,aR={onError:function(t){_a=!0,ku=t}};function lR(t,e,n,i,s,r,o,a,l){_a=!1,ku=null,oR.apply(aR,arguments)}function cR(t,e,n,i,s,r,o,a,l){if(lR.apply(this,arguments),_a){if(_a){var c=ku;_a=!1,ku=null}else throw Error(T(198));Tu||(Tu=!0,Dp=c)}}function ar(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ix(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function O_(t){if(ar(t)!==t)throw Error(T(188))}function uR(t){var e=t.alternate;if(!e){if(e=ar(t),e===null)throw Error(T(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return O_(s),t;if(r===i)return O_(s),e;r=r.sibling}throw Error(T(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(T(189))}}if(n.alternate!==i)throw Error(T(190))}if(n.tag!==3)throw Error(T(188));return n.stateNode.current===n?t:e}function Nx(t){return t=uR(t),t!==null?Rx(t):null}function Rx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rx(t);if(e!==null)return e;t=t.sibling}return null}var Ax=Jt.unstable_scheduleCallback,L_=Jt.unstable_cancelCallback,hR=Jt.unstable_shouldYield,dR=Jt.unstable_requestPaint,Me=Jt.unstable_now,fR=Jt.unstable_getCurrentPriorityLevel,Dm=Jt.unstable_ImmediatePriority,Px=Jt.unstable_UserBlockingPriority,Iu=Jt.unstable_NormalPriority,pR=Jt.unstable_LowPriority,Dx=Jt.unstable_IdlePriority,jh=null,Fn=null;function gR(t){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(jh,t,void 0,(t.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:_R,mR=Math.log,yR=Math.LN2;function _R(t){return t>>>=0,t===0?32:31-(mR(t)/yR|0)|0}var _c=64,vc=4194304;function oa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=oa(a):(r&=o,r!==0&&(i=oa(r)))}else o=n&~s,o!==0?i=oa(o):r!==0&&(i=oa(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-En(e),s=1<<n,i|=t[n],e&=~s;return i}function vR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wR(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-En(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=vR(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function Mp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mx(){var t=_c;return _c<<=1,!(_c&4194240)&&(_c=64),t}function hf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-En(e),t[e]=n}function ER(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-En(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function Mm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-En(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ue=0;function Ox(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Lx,Om,Fx,$x,Ux,Op=!1,wc=[],$i=null,Ui=null,zi=null,Ba=new Map,ja=new Map,Ci=[],xR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function F_(t,e){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":Ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(e.pointerId)}}function Bo(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Ml(e),e!==null&&Om(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function SR(t,e,n,i,s){switch(e){case"focusin":return $i=Bo($i,t,e,n,i,s),!0;case"dragenter":return Ui=Bo(Ui,t,e,n,i,s),!0;case"mouseover":return zi=Bo(zi,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Ba.set(r,Bo(Ba.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,ja.set(r,Bo(ja.get(r)||null,t,e,n,i,s)),!0}return!1}function zx(t){var e=ks(t.target);if(e!==null){var n=ar(e);if(n!==null){if(e=n.tag,e===13){if(e=Ix(n),e!==null){t.blockedOn=e,Ux(t.priority,function(){Fx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Rp=i,n.target.dispatchEvent(i),Rp=null}else return e=Ml(n),e!==null&&Om(e),t.blockedOn=n,!1;e.shift()}return!0}function $_(t,e,n){tu(t)&&n.delete(e)}function CR(){Op=!1,$i!==null&&tu($i)&&($i=null),Ui!==null&&tu(Ui)&&(Ui=null),zi!==null&&tu(zi)&&(zi=null),Ba.forEach($_),ja.forEach($_)}function jo(t,e){t.blockedOn===e&&(t.blockedOn=null,Op||(Op=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,CR)))}function Wa(t){function e(s){return jo(s,t)}if(0<wc.length){jo(wc[0],t);for(var n=1;n<wc.length;n++){var i=wc[n];i.blockedOn===t&&(i.blockedOn=null)}}for($i!==null&&jo($i,t),Ui!==null&&jo(Ui,t),zi!==null&&jo(zi,t),Ba.forEach(e),ja.forEach(e),n=0;n<Ci.length;n++)i=Ci[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ci.length&&(n=Ci[0],n.blockedOn===null);)zx(n),n.blockedOn===null&&Ci.shift()}var Fr=mi.ReactCurrentBatchConfig,Ru=!0;function bR(t,e,n,i){var s=ue,r=Fr.transition;Fr.transition=null;try{ue=1,Lm(t,e,n,i)}finally{ue=s,Fr.transition=r}}function kR(t,e,n,i){var s=ue,r=Fr.transition;Fr.transition=null;try{ue=4,Lm(t,e,n,i)}finally{ue=s,Fr.transition=r}}function Lm(t,e,n,i){if(Ru){var s=Lp(t,e,n,i);if(s===null)Ef(t,e,i,Au,n),F_(t,i);else if(SR(s,t,e,n,i))i.stopPropagation();else if(F_(t,i),e&4&&-1<xR.indexOf(t)){for(;s!==null;){var r=Ml(s);if(r!==null&&Lx(r),r=Lp(t,e,n,i),r===null&&Ef(t,e,i,Au,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Ef(t,e,i,null,n)}}var Au=null;function Lp(t,e,n,i){if(Au=null,t=Pm(i),t=ks(t),t!==null)if(e=ar(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ix(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Au=t,null}function Vx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fR()){case Dm:return 1;case Px:return 4;case Iu:case pR:return 16;case Dx:return 536870912;default:return 16}default:return 16}}var Ri=null,Fm=null,nu=null;function Bx(){if(nu)return nu;var t,e=Fm,n=e.length,i,s="value"in Ri?Ri.value:Ri.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return nu=s.slice(t,1<i?1-i:void 0)}function iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ec(){return!0}function U_(){return!1}function tn(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ec:U_,this.isPropagationStopped=U_,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ec)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ec)},persist:function(){},isPersistent:Ec}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$m=tn(Co),Dl=Ie({},Co,{view:0,detail:0}),TR=tn(Dl),df,ff,Wo,Wh=Ie({},Dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Um,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wo&&(Wo&&t.type==="mousemove"?(df=t.screenX-Wo.screenX,ff=t.screenY-Wo.screenY):ff=df=0,Wo=t),df)},movementY:function(t){return"movementY"in t?t.movementY:ff}}),z_=tn(Wh),IR=Ie({},Wh,{dataTransfer:0}),NR=tn(IR),RR=Ie({},Dl,{relatedTarget:0}),pf=tn(RR),AR=Ie({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),PR=tn(AR),DR=Ie({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MR=tn(DR),OR=Ie({},Co,{data:0}),V_=tn(OR),LR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$R={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$R[t])?!!e[t]:!1}function Um(){return UR}var zR=Ie({},Dl,{key:function(t){if(t.key){var e=LR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Um,charCode:function(t){return t.type==="keypress"?iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VR=tn(zR),BR=Ie({},Wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B_=tn(BR),jR=Ie({},Dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Um}),WR=tn(jR),HR=Ie({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),qR=tn(HR),KR=Ie({},Wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GR=tn(KR),QR=[9,13,27,32],zm=ai&&"CompositionEvent"in window,va=null;ai&&"documentMode"in document&&(va=document.documentMode);var YR=ai&&"TextEvent"in window&&!va,jx=ai&&(!zm||va&&8<va&&11>=va),j_=String.fromCharCode(32),W_=!1;function Wx(t,e){switch(t){case"keyup":return QR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wr=!1;function XR(t,e){switch(t){case"compositionend":return Hx(e);case"keypress":return e.which!==32?null:(W_=!0,j_);case"textInput":return t=e.data,t===j_&&W_?null:t;default:return null}}function JR(t,e){if(wr)return t==="compositionend"||!zm&&Wx(t,e)?(t=Bx(),nu=Fm=Ri=null,wr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jx&&e.locale!=="ko"?null:e.data;default:return null}}var ZR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZR[t.type]:e==="textarea"}function qx(t,e,n,i){Sx(i),e=Pu(e,"onChange"),0<e.length&&(n=new $m("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var wa=null,Ha=null;function eA(t){iS(t,0)}function Hh(t){var e=Sr(t);if(mx(e))return t}function tA(t,e){if(t==="change")return e}var Kx=!1;if(ai){var gf;if(ai){var mf="oninput"in document;if(!mf){var q_=document.createElement("div");q_.setAttribute("oninput","return;"),mf=typeof q_.oninput=="function"}gf=mf}else gf=!1;Kx=gf&&(!document.documentMode||9<document.documentMode)}function K_(){wa&&(wa.detachEvent("onpropertychange",Gx),Ha=wa=null)}function Gx(t){if(t.propertyName==="value"&&Hh(Ha)){var e=[];qx(e,Ha,t,Pm(t)),Tx(eA,e)}}function nA(t,e,n){t==="focusin"?(K_(),wa=e,Ha=n,wa.attachEvent("onpropertychange",Gx)):t==="focusout"&&K_()}function iA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hh(Ha)}function sA(t,e){if(t==="click")return Hh(e)}function rA(t,e){if(t==="input"||t==="change")return Hh(e)}function oA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:oA;function qa(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!_p.call(e,s)||!Cn(t[s],e[s]))return!1}return!0}function G_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Q_(t,e){var n=G_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=G_(n)}}function Qx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yx(){for(var t=window,e=bu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bu(t.document)}return e}function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aA(t){var e=Yx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qx(n.ownerDocument.documentElement,n)){if(i!==null&&Vm(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=Q_(n,r);var o=Q_(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lA=ai&&"documentMode"in document&&11>=document.documentMode,Er=null,Fp=null,Ea=null,$p=!1;function Y_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$p||Er==null||Er!==bu(i)||(i=Er,"selectionStart"in i&&Vm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ea&&qa(Ea,i)||(Ea=i,i=Pu(Fp,"onSelect"),0<i.length&&(e=new $m("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Er)))}function xc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var xr={animationend:xc("Animation","AnimationEnd"),animationiteration:xc("Animation","AnimationIteration"),animationstart:xc("Animation","AnimationStart"),transitionend:xc("Transition","TransitionEnd")},yf={},Xx={};ai&&(Xx=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);function qh(t){if(yf[t])return yf[t];if(!xr[t])return t;var e=xr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xx)return yf[t]=e[n];return t}var Jx=qh("animationend"),Zx=qh("animationiteration"),eS=qh("animationstart"),tS=qh("transitionend"),nS=new Map,X_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){nS.set(t,e),or(e,[t])}for(var _f=0;_f<X_.length;_f++){var vf=X_[_f],cA=vf.toLowerCase(),uA=vf[0].toUpperCase()+vf.slice(1);us(cA,"on"+uA)}us(Jx,"onAnimationEnd");us(Zx,"onAnimationIteration");us(eS,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(tS,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat(aa));function J_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,cR(i,e,void 0,t),t.currentTarget=null}function iS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;J_(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;J_(s,a,c),r=l}}}if(Tu)throw t=Dp,Tu=!1,Dp=null,t}function ve(t,e){var n=e[jp];n===void 0&&(n=e[jp]=new Set);var i=t+"__bubble";n.has(i)||(sS(e,t,2,!1),n.add(i))}function wf(t,e,n){var i=0;e&&(i|=4),sS(n,t,i,e)}var Sc="_reactListening"+Math.random().toString(36).slice(2);function Ka(t){if(!t[Sc]){t[Sc]=!0,hx.forEach(function(n){n!=="selectionchange"&&(hA.has(n)||wf(n,!1,t),wf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sc]||(e[Sc]=!0,wf("selectionchange",!1,e))}}function sS(t,e,n,i){switch(Vx(e)){case 1:var s=bR;break;case 4:s=kR;break;default:s=Lm}n=s.bind(null,e,n,t),s=void 0,!Pp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ef(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ks(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}Tx(function(){var c=r,u=Pm(n),h=[];e:{var d=nS.get(t);if(d!==void 0){var f=$m,p=t;switch(t){case"keypress":if(iu(n)===0)break e;case"keydown":case"keyup":f=VR;break;case"focusin":p="focus",f=pf;break;case"focusout":p="blur",f=pf;break;case"beforeblur":case"afterblur":f=pf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=z_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=NR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=WR;break;case Jx:case Zx:case eS:f=PR;break;case tS:f=qR;break;case"scroll":f=TR;break;case"wheel":f=GR;break;case"copy":case"cut":case"paste":f=MR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=B_}var g=(e&4)!==0,v=!g&&t==="scroll",y=g?d!==null?d+"Capture":null:d;g=[];for(var m=c,_;m!==null;){_=m;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=Va(m,y),w!=null&&g.push(Ga(m,w,_)))),v)break;m=m.return}0<g.length&&(d=new f(d,p,null,n,u),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==Rp&&(p=n.relatedTarget||n.fromElement)&&(ks(p)||p[li]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?ks(p):null,p!==null&&(v=ar(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=z_,w="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=B_,w="onPointerLeave",y="onPointerEnter",m="pointer"),v=f==null?d:Sr(f),_=p==null?d:Sr(p),d=new g(w,m+"leave",f,n,u),d.target=v,d.relatedTarget=_,w=null,ks(u)===c&&(g=new g(y,m+"enter",p,n,u),g.target=_,g.relatedTarget=v,w=g),v=w,f&&p)t:{for(g=f,y=p,m=0,_=g;_;_=fr(_))m++;for(_=0,w=y;w;w=fr(w))_++;for(;0<m-_;)g=fr(g),m--;for(;0<_-m;)y=fr(y),_--;for(;m--;){if(g===y||y!==null&&g===y.alternate)break t;g=fr(g),y=fr(y)}g=null}else g=null;f!==null&&Z_(h,d,f,g,!1),p!==null&&v!==null&&Z_(h,v,p,g,!0)}}e:{if(d=c?Sr(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var E=tA;else if(H_(d))if(Kx)E=rA;else{E=iA;var x=nA}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=sA);if(E&&(E=E(t,c))){qx(h,E,n,u);break e}x&&x(t,d,c),t==="focusout"&&(x=d._wrapperState)&&x.controlled&&d.type==="number"&&bp(d,"number",d.value)}switch(x=c?Sr(c):window,t){case"focusin":(H_(x)||x.contentEditable==="true")&&(Er=x,Fp=c,Ea=null);break;case"focusout":Ea=Fp=Er=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,Y_(h,n,u);break;case"selectionchange":if(lA)break;case"keydown":case"keyup":Y_(h,n,u)}var S;if(zm)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else wr?Wx(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(jx&&n.locale!=="ko"&&(wr||b!=="onCompositionStart"?b==="onCompositionEnd"&&wr&&(S=Bx()):(Ri=u,Fm="value"in Ri?Ri.value:Ri.textContent,wr=!0)),x=Pu(c,b),0<x.length&&(b=new V_(b,t,null,n,u),h.push({event:b,listeners:x}),S?b.data=S:(S=Hx(n),S!==null&&(b.data=S)))),(S=YR?XR(t,n):JR(t,n))&&(c=Pu(c,"onBeforeInput"),0<c.length&&(u=new V_("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=S))}iS(h,e)})}function Ga(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pu(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Va(t,n),r!=null&&i.unshift(Ga(t,r,s)),r=Va(t,e),r!=null&&i.push(Ga(t,r,s))),t=t.return}return i}function fr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Z_(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=Va(n,r),l!=null&&o.unshift(Ga(n,l,a))):s||(l=Va(n,r),l!=null&&o.push(Ga(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dA=/\r\n?/g,fA=/\u0000|\uFFFD/g;function ev(t){return(typeof t=="string"?t:""+t).replace(dA,`
`).replace(fA,"")}function Cc(t,e,n){if(e=ev(e),ev(t)!==e&&n)throw Error(T(425))}function Du(){}var Up=null,zp=null;function Vp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Bp=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,gA=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(mA)}:Bp;function mA(t){setTimeout(function(){throw t})}function xf(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Wa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Wa(e)}function Vi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bo=Math.random().toString(36).slice(2),Mn="__reactFiber$"+bo,Qa="__reactProps$"+bo,li="__reactContainer$"+bo,jp="__reactEvents$"+bo,yA="__reactListeners$"+bo,_A="__reactHandles$"+bo;function ks(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[li]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nv(t);t!==null;){if(n=t[Mn])return n;t=nv(t)}return e}t=n,n=t.parentNode}return null}function Ml(t){return t=t[Mn]||t[li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(T(33))}function Kh(t){return t[Qa]||null}var Wp=[],Cr=-1;function hs(t){return{current:t}}function Ee(t){0>Cr||(t.current=Wp[Cr],Wp[Cr]=null,Cr--)}function ye(t,e){Cr++,Wp[Cr]=t.current,t.current=e}var ts={},St=hs(ts),Vt=hs(!1),Ws=ts;function Zr(t,e){var n=t.type.contextTypes;if(!n)return ts;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Bt(t){return t=t.childContextTypes,t!=null}function Mu(){Ee(Vt),Ee(St)}function iv(t,e,n){if(St.current!==ts)throw Error(T(168));ye(St,e),ye(Vt,n)}function rS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(T(108,nR(t)||"Unknown",s));return Ie({},n,i)}function Ou(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ts,Ws=St.current,ye(St,t),ye(Vt,Vt.current),!0}function sv(t,e,n){var i=t.stateNode;if(!i)throw Error(T(169));n?(t=rS(t,e,Ws),i.__reactInternalMemoizedMergedChildContext=t,Ee(Vt),Ee(St),ye(St,t)):Ee(Vt),ye(Vt,n)}var Yn=null,Gh=!1,Sf=!1;function oS(t){Yn===null?Yn=[t]:Yn.push(t)}function vA(t){Gh=!0,oS(t)}function ds(){if(!Sf&&Yn!==null){Sf=!0;var t=0,e=ue;try{var n=Yn;for(ue=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Yn=null,Gh=!1}catch(s){throw Yn!==null&&(Yn=Yn.slice(t+1)),Ax(Dm,ds),s}finally{ue=e,Sf=!1}}return null}var br=[],kr=0,Lu=null,Fu=0,sn=[],rn=0,Hs=null,Jn=1,Zn="";function ws(t,e){br[kr++]=Fu,br[kr++]=Lu,Lu=t,Fu=e}function aS(t,e,n){sn[rn++]=Jn,sn[rn++]=Zn,sn[rn++]=Hs,Hs=t;var i=Jn;t=Zn;var s=32-En(i)-1;i&=~(1<<s),n+=1;var r=32-En(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Jn=1<<32-En(e)+s|n<<s|i,Zn=r+t}else Jn=1<<r|n<<s|i,Zn=t}function Bm(t){t.return!==null&&(ws(t,1),aS(t,1,0))}function jm(t){for(;t===Lu;)Lu=br[--kr],br[kr]=null,Fu=br[--kr],br[kr]=null;for(;t===Hs;)Hs=sn[--rn],sn[rn]=null,Zn=sn[--rn],sn[rn]=null,Jn=sn[--rn],sn[rn]=null}var Xt=null,Yt=null,xe=!1,mn=null;function lS(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=Vi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hs!==null?{id:Jn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Yt=null,!0):!1;default:return!1}}function Hp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qp(t){if(xe){var e=Yt;if(e){var n=e;if(!rv(t,e)){if(Hp(t))throw Error(T(418));e=Vi(n.nextSibling);var i=Xt;e&&rv(t,e)?lS(i,n):(t.flags=t.flags&-4097|2,xe=!1,Xt=t)}}else{if(Hp(t))throw Error(T(418));t.flags=t.flags&-4097|2,xe=!1,Xt=t}}}function ov(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function bc(t){if(t!==Xt)return!1;if(!xe)return ov(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vp(t.type,t.memoizedProps)),e&&(e=Yt)){if(Hp(t))throw cS(),Error(T(418));for(;e;)lS(t,e),e=Vi(e.nextSibling)}if(ov(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(T(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yt=Vi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Xt?Vi(t.stateNode.nextSibling):null;return!0}function cS(){for(var t=Yt;t;)t=Vi(t.nextSibling)}function eo(){Yt=Xt=null,xe=!1}function Wm(t){mn===null?mn=[t]:mn.push(t)}var wA=mi.ReactCurrentBatchConfig;function pn(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var $u=hs(null),Uu=null,Tr=null,Hm=null;function qm(){Hm=Tr=Uu=null}function Km(t){var e=$u.current;Ee($u),t._currentValue=e}function Kp(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function $r(t,e){Uu=t,Hm=Tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function un(t){var e=t._currentValue;if(Hm!==t)if(t={context:t,memoizedValue:e,next:null},Tr===null){if(Uu===null)throw Error(T(308));Tr=t,Uu.dependencies={lanes:0,firstContext:t}}else Tr=Tr.next=t;return e}var Ts=null;function Gm(t){Ts===null?Ts=[t]:Ts.push(t)}function uS(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Gm(e)):(n.next=s.next,s.next=n),e.interleaved=n,ci(t,i)}function ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function Qm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ne&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ci(t,n)}return s=i.interleaved,s===null?(e.next=e,Gm(i)):(e.next=s.next,s.next=e),i.interleaved=e,ci(t,n)}function su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Mm(t,n)}}function av(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,i){var s=t.updateQueue;Si=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ie({},h,d);break e;case 2:Si=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=h}}function lv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(T(191,s));s.call(i)}}}var dS=new ux.Component().refs;function Gp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qh={isMounted:function(t){return(t=t._reactInternals)?ar(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Rt(),s=Wi(t),r=ri(i,s);r.payload=e,n!=null&&(r.callback=n),e=Bi(t,r,s),e!==null&&(xn(e,t,s,i),su(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Rt(),s=Wi(t),r=ri(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Bi(t,r,s),e!==null&&(xn(e,t,s,i),su(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rt(),i=Wi(t),s=ri(n,i);s.tag=2,e!=null&&(s.callback=e),e=Bi(t,s,i),e!==null&&(xn(e,t,i,n),su(e,t,i))}};function cv(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!qa(n,i)||!qa(s,r):!0}function fS(t,e,n){var i=!1,s=ts,r=e.contextType;return typeof r=="object"&&r!==null?r=un(r):(s=Bt(e)?Ws:St.current,i=e.contextTypes,r=(i=i!=null)?Zr(t,s):ts),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Qh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function uv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Qh.enqueueReplaceState(e,e.state,null)}function Qp(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=dS,Qm(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=un(r):(r=Bt(e)?Ws:St.current,s.context=Zr(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Gp(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Qh.enqueueReplaceState(s,s.state,null),zu(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(T(309));var i=n.stateNode}if(!i)throw Error(T(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;a===dS&&(a=s.refs={}),o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(T(284));if(!n._owner)throw Error(T(290,t))}return t}function kc(t,e){throw t=Object.prototype.toString.call(e),Error(T(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hv(t){var e=t._init;return e(t._payload)}function pS(t){function e(y,m){if(t){var _=y.deletions;_===null?(y.deletions=[m],y.flags|=16):_.push(m)}}function n(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function i(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function s(y,m){return y=Hi(y,m),y.index=0,y.sibling=null,y}function r(y,m,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<m?(y.flags|=2,m):_):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,m,_,w){return m===null||m.tag!==6?(m=Rf(_,y.mode,w),m.return=y,m):(m=s(m,_),m.return=y,m)}function l(y,m,_,w){var E=_.type;return E===vr?u(y,m,_.props.children,w,_.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xi&&hv(E)===m.type)?(w=s(m,_.props),w.ref=Ho(y,m,_),w.return=y,w):(w=uu(_.type,_.key,_.props,null,y.mode,w),w.ref=Ho(y,m,_),w.return=y,w)}function c(y,m,_,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=Af(_,y.mode,w),m.return=y,m):(m=s(m,_.children||[]),m.return=y,m)}function u(y,m,_,w,E){return m===null||m.tag!==7?(m=Ms(_,y.mode,w,E),m.return=y,m):(m=s(m,_),m.return=y,m)}function h(y,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Rf(""+m,y.mode,_),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case gc:return _=uu(m.type,m.key,m.props,null,y.mode,_),_.ref=Ho(y,null,m),_.return=y,_;case _r:return m=Af(m,y.mode,_),m.return=y,m;case xi:var w=m._init;return h(y,w(m._payload),_)}if(ra(m)||zo(m))return m=Ms(m,y.mode,_,null),m.return=y,m;kc(y,m)}return null}function d(y,m,_,w){var E=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,m,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gc:return _.key===E?l(y,m,_,w):null;case _r:return _.key===E?c(y,m,_,w):null;case xi:return E=_._init,d(y,m,E(_._payload),w)}if(ra(_)||zo(_))return E!==null?null:u(y,m,_,w,null);kc(y,_)}return null}function f(y,m,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(m,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gc:return y=y.get(w.key===null?_:w.key)||null,l(m,y,w,E);case _r:return y=y.get(w.key===null?_:w.key)||null,c(m,y,w,E);case xi:var x=w._init;return f(y,m,_,x(w._payload),E)}if(ra(w)||zo(w))return y=y.get(_)||null,u(m,y,w,E,null);kc(m,w)}return null}function p(y,m,_,w){for(var E=null,x=null,S=m,b=m=0,L=null;S!==null&&b<_.length;b++){S.index>b?(L=S,S=null):L=S.sibling;var D=d(y,S,_[b],w);if(D===null){S===null&&(S=L);break}t&&S&&D.alternate===null&&e(y,S),m=r(D,m,b),x===null?E=D:x.sibling=D,x=D,S=L}if(b===_.length)return n(y,S),xe&&ws(y,b),E;if(S===null){for(;b<_.length;b++)S=h(y,_[b],w),S!==null&&(m=r(S,m,b),x===null?E=S:x.sibling=S,x=S);return xe&&ws(y,b),E}for(S=i(y,S);b<_.length;b++)L=f(S,y,b,_[b],w),L!==null&&(t&&L.alternate!==null&&S.delete(L.key===null?b:L.key),m=r(L,m,b),x===null?E=L:x.sibling=L,x=L);return t&&S.forEach(function(V){return e(y,V)}),xe&&ws(y,b),E}function g(y,m,_,w){var E=zo(_);if(typeof E!="function")throw Error(T(150));if(_=E.call(_),_==null)throw Error(T(151));for(var x=E=null,S=m,b=m=0,L=null,D=_.next();S!==null&&!D.done;b++,D=_.next()){S.index>b?(L=S,S=null):L=S.sibling;var V=d(y,S,D.value,w);if(V===null){S===null&&(S=L);break}t&&S&&V.alternate===null&&e(y,S),m=r(V,m,b),x===null?E=V:x.sibling=V,x=V,S=L}if(D.done)return n(y,S),xe&&ws(y,b),E;if(S===null){for(;!D.done;b++,D=_.next())D=h(y,D.value,w),D!==null&&(m=r(D,m,b),x===null?E=D:x.sibling=D,x=D);return xe&&ws(y,b),E}for(S=i(y,S);!D.done;b++,D=_.next())D=f(S,y,b,D.value,w),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?b:D.key),m=r(D,m,b),x===null?E=D:x.sibling=D,x=D);return t&&S.forEach(function(Z){return e(y,Z)}),xe&&ws(y,b),E}function v(y,m,_,w){if(typeof _=="object"&&_!==null&&_.type===vr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case gc:e:{for(var E=_.key,x=m;x!==null;){if(x.key===E){if(E=_.type,E===vr){if(x.tag===7){n(y,x.sibling),m=s(x,_.props.children),m.return=y,y=m;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xi&&hv(E)===x.type){n(y,x.sibling),m=s(x,_.props),m.ref=Ho(y,x,_),m.return=y,y=m;break e}n(y,x);break}else e(y,x);x=x.sibling}_.type===vr?(m=Ms(_.props.children,y.mode,w,_.key),m.return=y,y=m):(w=uu(_.type,_.key,_.props,null,y.mode,w),w.ref=Ho(y,m,_),w.return=y,y=w)}return o(y);case _r:e:{for(x=_.key;m!==null;){if(m.key===x)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){n(y,m.sibling),m=s(m,_.children||[]),m.return=y,y=m;break e}else{n(y,m);break}else e(y,m);m=m.sibling}m=Af(_,y.mode,w),m.return=y,y=m}return o(y);case xi:return x=_._init,v(y,m,x(_._payload),w)}if(ra(_))return p(y,m,_,w);if(zo(_))return g(y,m,_,w);kc(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(n(y,m.sibling),m=s(m,_),m.return=y,y=m):(n(y,m),m=Rf(_,y.mode,w),m.return=y,y=m),o(y)):n(y,m)}return v}var to=pS(!0),gS=pS(!1),Ol={},$n=hs(Ol),Ya=hs(Ol),Xa=hs(Ol);function Is(t){if(t===Ol)throw Error(T(174));return t}function Ym(t,e){switch(ye(Xa,e),ye(Ya,t),ye($n,Ol),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tp(e,t)}Ee($n),ye($n,e)}function no(){Ee($n),Ee(Ya),Ee(Xa)}function mS(t){Is(Xa.current);var e=Is($n.current),n=Tp(e,t.type);e!==n&&(ye(Ya,t),ye($n,n))}function Xm(t){Ya.current===t&&(Ee($n),Ee(Ya))}var ke=hs(0);function Vu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cf=[];function Jm(){for(var t=0;t<Cf.length;t++)Cf[t]._workInProgressVersionPrimary=null;Cf.length=0}var ru=mi.ReactCurrentDispatcher,bf=mi.ReactCurrentBatchConfig,qs=0,Te=null,je=null,Ye=null,Bu=!1,xa=!1,Ja=0,EA=0;function gt(){throw Error(T(321))}function Zm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function e0(t,e,n,i,s,r){if(qs=r,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ru.current=t===null||t.memoizedState===null?bA:kA,t=n(i,s),xa){r=0;do{if(xa=!1,Ja=0,25<=r)throw Error(T(301));r+=1,Ye=je=null,e.updateQueue=null,ru.current=TA,t=n(i,s)}while(xa)}if(ru.current=ju,e=je!==null&&je.next!==null,qs=0,Ye=je=Te=null,Bu=!1,e)throw Error(T(300));return t}function t0(){var t=Ja!==0;return Ja=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Te.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function hn(){if(je===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Ye===null?Te.memoizedState:Ye.next;if(e!==null)Ye=e,je=t;else{if(t===null)throw Error(T(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Ye===null?Te.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Za(t,e){return typeof e=="function"?e(t):e}function kf(t){var e=hn(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var i=je,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((qs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Te.lanes|=u,Ks|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,Cn(i,e.memoizedState)||(Ft=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,Te.lanes|=r,Ks|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Tf(t){var e=hn(),n=e.queue;if(n===null)throw Error(T(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);Cn(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function yS(){}function _S(t,e){var n=Te,i=hn(),s=e(),r=!Cn(i.memoizedState,s);if(r&&(i.memoizedState=s,Ft=!0),i=i.queue,n0(ES.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,el(9,wS.bind(null,n,i,s,e),void 0,null),tt===null)throw Error(T(349));qs&30||vS(n,e,s)}return s}function vS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wS(t,e,n,i){e.value=n,e.getSnapshot=i,xS(e)&&SS(t)}function ES(t,e,n){return n(function(){xS(e)&&SS(t)})}function xS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function SS(t){var e=ci(t,1);e!==null&&xn(e,t,1,-1)}function dv(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:t},e.queue=t,t=t.dispatch=CA.bind(null,Te,t),[e.memoizedState,t]}function el(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function CS(){return hn().memoizedState}function ou(t,e,n,i){var s=An();Te.flags|=t,s.memoizedState=el(1|e,n,void 0,i===void 0?null:i)}function Yh(t,e,n,i){var s=hn();i=i===void 0?null:i;var r=void 0;if(je!==null){var o=je.memoizedState;if(r=o.destroy,i!==null&&Zm(i,o.deps)){s.memoizedState=el(e,n,r,i);return}}Te.flags|=t,s.memoizedState=el(1|e,n,r,i)}function fv(t,e){return ou(8390656,8,t,e)}function n0(t,e){return Yh(2048,8,t,e)}function bS(t,e){return Yh(4,2,t,e)}function kS(t,e){return Yh(4,4,t,e)}function TS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IS(t,e,n){return n=n!=null?n.concat([t]):null,Yh(4,4,TS.bind(null,e,t),n)}function i0(){}function NS(t,e){var n=hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Zm(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function RS(t,e){var n=hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Zm(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function AS(t,e,n){return qs&21?(Cn(n,e)||(n=Mx(),Te.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function xA(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var i=bf.transition;bf.transition={};try{t(!1),e()}finally{ue=n,bf.transition=i}}function PS(){return hn().memoizedState}function SA(t,e,n){var i=Wi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},DS(t))MS(e,n);else if(n=uS(t,e,n,i),n!==null){var s=Rt();xn(n,t,i,s),OS(n,e,i)}}function CA(t,e,n){var i=Wi(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(DS(t))MS(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,Cn(a,o)){var l=e.interleaved;l===null?(s.next=s,Gm(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=uS(t,e,s,i),n!==null&&(s=Rt(),xn(n,t,i,s),OS(n,e,i))}}function DS(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function MS(t,e){xa=Bu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Mm(t,n)}}var ju={readContext:un,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},bA={readContext:un,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:un,useEffect:fv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,TS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=An();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=SA.bind(null,Te,t),[i.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:dv,useDebugValue:i0,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=dv(!1),e=t[0];return t=xA.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Te,s=An();if(xe){if(n===void 0)throw Error(T(407));n=n()}else{if(n=e(),tt===null)throw Error(T(349));qs&30||vS(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,fv(ES.bind(null,i,r,t),[t]),i.flags|=2048,el(9,wS.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=An(),e=tt.identifierPrefix;if(xe){var n=Zn,i=Jn;n=(i&~(1<<32-En(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kA={readContext:un,useCallback:NS,useContext:un,useEffect:n0,useImperativeHandle:IS,useInsertionEffect:bS,useLayoutEffect:kS,useMemo:RS,useReducer:kf,useRef:CS,useState:function(){return kf(Za)},useDebugValue:i0,useDeferredValue:function(t){var e=hn();return AS(e,je.memoizedState,t)},useTransition:function(){var t=kf(Za)[0],e=hn().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:_S,useId:PS,unstable_isNewReconciler:!1},TA={readContext:un,useCallback:NS,useContext:un,useEffect:n0,useImperativeHandle:IS,useInsertionEffect:bS,useLayoutEffect:kS,useMemo:RS,useReducer:Tf,useRef:CS,useState:function(){return Tf(Za)},useDebugValue:i0,useDeferredValue:function(t){var e=hn();return je===null?e.memoizedState=t:AS(e,je.memoizedState,t)},useTransition:function(){var t=Tf(Za)[0],e=hn().memoizedState;return[t,e]},useMutableSource:yS,useSyncExternalStore:_S,useId:PS,unstable_isNewReconciler:!1};function io(t,e){try{var n="",i=e;do n+=tR(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function If(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IA=typeof WeakMap=="function"?WeakMap:Map;function LS(t,e,n){n=ri(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Hu||(Hu=!0,og=i),Yp(t,e)},n}function FS(t,e,n){n=ri(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Yp(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Yp(t,e),typeof i!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function pv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new IA;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=BA.bind(null,t,e,n),e.then(t,t))}function gv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mv(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ri(-1,1),e.tag=2,Bi(n,e,1))),n.lanes|=1),t)}var NA=mi.ReactCurrentOwner,Ft=!1;function Tt(t,e,n,i){e.child=t===null?gS(e,null,n,i):to(e,t.child,n,i)}function yv(t,e,n,i,s){n=n.render;var r=e.ref;return $r(e,s),i=e0(t,e,n,i,r,s),n=t0(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ui(t,e,s)):(xe&&n&&Bm(e),e.flags|=1,Tt(t,e,i,s),e.child)}function _v(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!h0(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,$S(t,e,r,i,s)):(t=uu(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:qa,n(o,i)&&t.ref===e.ref)return ui(t,e,s)}return e.flags|=1,t=Hi(r,i),t.ref=e.ref,t.return=e,e.child=t}function $S(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(qa(r,i)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,ui(t,e,s)}return Xp(t,e,n,i,s)}function US(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Nr,Qt),Qt|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Nr,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,ye(Nr,Qt),Qt|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,ye(Nr,Qt),Qt|=i;return Tt(t,e,s,n),e.child}function zS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xp(t,e,n,i,s){var r=Bt(n)?Ws:St.current;return r=Zr(e,r),$r(e,s),n=e0(t,e,n,i,r,s),i=t0(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ui(t,e,s)):(xe&&i&&Bm(e),e.flags|=1,Tt(t,e,n,s),e.child)}function vv(t,e,n,i,s){if(Bt(n)){var r=!0;Ou(e)}else r=!1;if($r(e,s),e.stateNode===null)au(t,e),fS(e,n,i),Qp(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=un(c):(c=Bt(n)?Ws:St.current,c=Zr(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&uv(e,o,i,c),Si=!1;var d=e.memoizedState;o.state=d,zu(e,i,o,s),l=e.memoizedState,a!==i||d!==l||Vt.current||Si?(typeof u=="function"&&(Gp(e,n,u,i),l=e.memoizedState),(a=Si||cv(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,hS(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:pn(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=un(l):(l=Bt(n)?Ws:St.current,l=Zr(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&uv(e,o,i,l),Si=!1,d=e.memoizedState,o.state=d,zu(e,i,o,s);var p=e.memoizedState;a!==h||d!==p||Vt.current||Si?(typeof f=="function"&&(Gp(e,n,f,i),p=e.memoizedState),(c=Si||cv(e,n,c,i,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Jp(t,e,n,i,r,s)}function Jp(t,e,n,i,s,r){zS(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&sv(e,n,!1),ui(t,e,r);i=e.stateNode,NA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=to(e,t.child,null,r),e.child=to(e,null,a,r)):Tt(t,e,a,r),e.memoizedState=i.state,s&&sv(e,n,!0),e.child}function VS(t){var e=t.stateNode;e.pendingContext?iv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iv(t,e.context,!1),Ym(t,e.containerInfo)}function wv(t,e,n,i,s){return eo(),Wm(s),e.flags|=256,Tt(t,e,n,i),e.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function eg(t){return{baseLanes:t,cachePool:null,transitions:null}}function BS(t,e,n){var i=e.pendingProps,s=ke.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(ke,s&1),t===null)return qp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Zh(o,i,0,null),t=Ms(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=eg(n),e.memoizedState=Zp,t):s0(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return RA(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Hi(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=Hi(a,r):(r=Ms(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?eg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=Zp,i}return r=t.child,t=r.sibling,i=Hi(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function s0(t,e){return e=Zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Tc(t,e,n,i){return i!==null&&Wm(i),to(e,t.child,null,n),t=s0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function RA(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=If(Error(T(422))),Tc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Zh({mode:"visible",children:i.children},s,0,null),r=Ms(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&to(e,t.child,null,o),e.child.memoizedState=eg(o),e.memoizedState=Zp,r);if(!(e.mode&1))return Tc(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(T(419)),i=If(r,i,void 0),Tc(t,e,o,i)}if(a=(o&t.childLanes)!==0,Ft||a){if(i=tt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,ci(t,s),xn(i,t,s,-1))}return u0(),i=If(Error(T(421))),Tc(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jA.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,Yt=Vi(s.nextSibling),Xt=e,xe=!0,mn=null,t!==null&&(sn[rn++]=Jn,sn[rn++]=Zn,sn[rn++]=Hs,Jn=t.id,Zn=t.overflow,Hs=e),e=s0(e,i.children),e.flags|=4096,e)}function Ev(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Kp(t.return,e,n)}function Nf(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function jS(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(Tt(t,e,i.children,n),i=ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ev(t,n,e);else if(t.tag===19)Ev(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ye(ke,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Nf(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Nf(e,!0,n,null,r);break;case"together":Nf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(T(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AA(t,e,n){switch(e.tag){case 3:VS(e),eo();break;case 5:mS(e);break;case 1:Bt(e.type)&&Ou(e);break;case 4:Ym(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ye($u,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ye(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?BS(t,e,n):(ye(ke,ke.current&1),t=ui(t,e,n),t!==null?t.sibling:null);ye(ke,ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return jS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(ke,ke.current),i)break;return null;case 22:case 23:return e.lanes=0,US(t,e,n)}return ui(t,e,n)}var WS,tg,HS,qS;WS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tg=function(){};HS=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Is($n.current);var r=null;switch(n){case"input":s=Sp(t,s),i=Sp(t,i),r=[];break;case"select":s=Ie({},s,{value:void 0}),i=Ie({},i,{value:void 0}),r=[];break;case"textarea":s=kp(t,s),i=kp(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Du)}Ip(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ua.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ua.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ve("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};qS=function(t,e,n,i){n!==i&&(e.flags|=4)};function qo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function PA(t,e,n){var i=e.pendingProps;switch(jm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Bt(e.type)&&Mu(),mt(e),null;case 3:return i=e.stateNode,no(),Ee(Vt),Ee(St),Jm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(cg(mn),mn=null))),tg(t,e),mt(e),null;case 5:Xm(e);var s=Is(Xa.current);if(n=e.type,t!==null&&e.stateNode!=null)HS(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(T(166));return mt(e),null}if(t=Is($n.current),bc(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[Mn]=e,i[Qa]=r,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",i),ve("close",i);break;case"iframe":case"object":case"embed":ve("load",i);break;case"video":case"audio":for(s=0;s<aa.length;s++)ve(aa[s],i);break;case"source":ve("error",i);break;case"img":case"image":case"link":ve("error",i),ve("load",i);break;case"details":ve("toggle",i);break;case"input":R_(i,r),ve("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},ve("invalid",i);break;case"textarea":P_(i,r),ve("invalid",i)}Ip(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Cc(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Cc(i.textContent,a,t),s=["children",""+a]):Ua.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ve("scroll",i)}switch(n){case"input":mc(i),A_(i,r,!0);break;case"textarea":mc(i),D_(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Du)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Mn]=e,t[Qa]=i,WS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Np(n,i),n){case"dialog":ve("cancel",t),ve("close",t),s=i;break;case"iframe":case"object":case"embed":ve("load",t),s=i;break;case"video":case"audio":for(s=0;s<aa.length;s++)ve(aa[s],t);s=i;break;case"source":ve("error",t),s=i;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=i;break;case"details":ve("toggle",t),s=i;break;case"input":R_(t,i),s=Sp(t,i),ve("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ie({},i,{value:void 0}),ve("invalid",t);break;case"textarea":P_(t,i),s=kp(t,i),ve("invalid",t);break;default:s=i}Ip(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?xx(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wx(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&za(t,l):typeof l=="number"&&za(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ua.hasOwnProperty(r)?l!=null&&r==="onScroll"&&ve("scroll",t):l!=null&&Im(t,r,l,o))}switch(n){case"input":mc(t),A_(t,i,!1);break;case"textarea":mc(t),D_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+es(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?Mr(t,!!i.multiple,r,!1):i.defaultValue!=null&&Mr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Du)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)qS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(T(166));if(n=Is(Xa.current),Is($n.current),bc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Mn]=e,(r=i.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Cc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cc(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Mn]=e,e.stateNode=i}return mt(e),null;case 13:if(Ee(ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Yt!==null&&e.mode&1&&!(e.flags&128))cS(),eo(),e.flags|=98560,r=!1;else if(r=bc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(T(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(T(317));r[Mn]=e}else eo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),r=!1}else mn!==null&&(cg(mn),mn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?We===0&&(We=3):u0())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return no(),tg(t,e),t===null&&Ka(e.stateNode.containerInfo),mt(e),null;case 10:return Km(e.type._context),mt(e),null;case 17:return Bt(e.type)&&Mu(),mt(e),null;case 19:if(Ee(ke),r=e.memoizedState,r===null)return mt(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)qo(r,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vu(t),o!==null){for(e.flags|=128,qo(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(ke,ke.current&1|2),e.child}t=t.sibling}r.tail!==null&&Me()>so&&(e.flags|=128,i=!0,qo(r,!1),e.lanes=4194304)}else{if(!i)if(t=Vu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qo(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!xe)return mt(e),null}else 2*Me()-r.renderingStartTime>so&&n!==1073741824&&(e.flags|=128,i=!0,qo(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Me(),e.sibling=null,n=ke.current,ye(ke,i?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return c0(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Qt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function DA(t,e){switch(jm(e),e.tag){case 1:return Bt(e.type)&&Mu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return no(),Ee(Vt),Ee(St),Jm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xm(e),null;case 13:if(Ee(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(T(340));eo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(ke),null;case 4:return no(),null;case 10:return Km(e.type._context),null;case 22:case 23:return c0(),null;case 24:return null;default:return null}}var Ic=!1,vt=!1,MA=typeof WeakSet=="function"?WeakSet:Set,M=null;function Ir(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ne(t,e,i)}else n.current=null}function ng(t,e,n){try{n()}catch(i){Ne(t,e,i)}}var xv=!1;function OA(t,e){if(Up=Ru,t=Yx(),Vm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===s&&(a=o),d===r&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(zp={focusedElem:t,selectionRange:n},Ru=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:pn(e.type,g),v);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(w){Ne(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return p=xv,xv=!1,p}function Sa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&ng(e,n,r)}s=s.next}while(s!==i)}}function Xh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ig(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KS(t){var e=t.alternate;e!==null&&(t.alternate=null,KS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[Qa],delete e[jp],delete e[yA],delete e[_A])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GS(t){return t.tag===5||t.tag===3||t.tag===4}function Sv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Du));else if(i!==4&&(t=t.child,t!==null))for(sg(t,e,n),t=t.sibling;t!==null;)sg(t,e,n),t=t.sibling}function rg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(rg(t,e,n),t=t.sibling;t!==null;)rg(t,e,n),t=t.sibling}var rt=null,gn=!1;function vi(t,e,n){for(n=n.child;n!==null;)QS(t,e,n),n=n.sibling}function QS(t,e,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(jh,n)}catch{}switch(n.tag){case 5:vt||Ir(n,e);case 6:var i=rt,s=gn;rt=null,vi(t,e,n),rt=i,gn=s,rt!==null&&(gn?(t=rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(gn?(t=rt,n=n.stateNode,t.nodeType===8?xf(t.parentNode,n):t.nodeType===1&&xf(t,n),Wa(t)):xf(rt,n.stateNode));break;case 4:i=rt,s=gn,rt=n.stateNode.containerInfo,gn=!0,vi(t,e,n),rt=i,gn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ng(n,e,o),s=s.next}while(s!==i)}vi(t,e,n);break;case 1:if(!vt&&(Ir(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ne(n,e,a)}vi(t,e,n);break;case 21:vi(t,e,n);break;case 22:n.mode&1?(vt=(i=vt)||n.memoizedState!==null,vi(t,e,n),vt=i):vi(t,e,n);break;default:vi(t,e,n)}}function Cv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MA),e.forEach(function(i){var s=WA.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rt=a.stateNode,gn=!1;break e;case 3:rt=a.stateNode.containerInfo,gn=!0;break e;case 4:rt=a.stateNode.containerInfo,gn=!0;break e}a=a.return}if(rt===null)throw Error(T(160));QS(r,o,s),rt=null,gn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ne(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)YS(e,t),e=e.sibling}function YS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Nn(t),i&4){try{Sa(3,t,t.return),Xh(3,t)}catch(g){Ne(t,t.return,g)}try{Sa(5,t,t.return)}catch(g){Ne(t,t.return,g)}}break;case 1:fn(e,t),Nn(t),i&512&&n!==null&&Ir(n,n.return);break;case 5:if(fn(e,t),Nn(t),i&512&&n!==null&&Ir(n,n.return),t.flags&32){var s=t.stateNode;try{za(s,"")}catch(g){Ne(t,t.return,g)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&yx(s,r),Np(a,o);var c=Np(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?xx(s,h):u==="dangerouslySetInnerHTML"?wx(s,h):u==="children"?za(s,h):Im(s,u,h,c)}switch(a){case"input":Cp(s,r);break;case"textarea":_x(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?Mr(s,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?Mr(s,!!r.multiple,r.defaultValue,!0):Mr(s,!!r.multiple,r.multiple?[]:"",!1))}s[Qa]=r}catch(g){Ne(t,t.return,g)}}break;case 6:if(fn(e,t),Nn(t),i&4){if(t.stateNode===null)throw Error(T(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(g){Ne(t,t.return,g)}}break;case 3:if(fn(e,t),Nn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Wa(e.containerInfo)}catch(g){Ne(t,t.return,g)}break;case 4:fn(e,t),Nn(t);break;case 13:fn(e,t),Nn(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(a0=Me())),i&4&&Cv(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||u,fn(e,t),vt=c):fn(e,t),Nn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(M=t,u=t.child;u!==null;){for(h=M=u;M!==null;){switch(d=M,f=d.child,d.tag){case 0:case 11:case 14:case 15:Sa(4,d,d.return);break;case 1:Ir(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Ne(i,n,g)}}break;case 5:Ir(d,d.return);break;case 22:if(d.memoizedState!==null){kv(h);continue}}f!==null?(f.return=d,M=f):kv(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ex("display",o))}catch(g){Ne(t,t.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Ne(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fn(e,t),Nn(t),i&4&&Cv(t);break;case 21:break;default:fn(e,t),Nn(t)}}function Nn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GS(n)){var i=n;break e}n=n.return}throw Error(T(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(za(s,""),i.flags&=-33);var r=Sv(t);rg(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Sv(t);sg(t,a,o);break;default:throw Error(T(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LA(t,e,n){M=t,XS(t)}function XS(t,e,n){for(var i=(t.mode&1)!==0;M!==null;){var s=M,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Ic;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||vt;a=Ic;var c=vt;if(Ic=o,(vt=l)&&!c)for(M=s;M!==null;)o=M,l=o.child,o.tag===22&&o.memoizedState!==null?Tv(s):l!==null?(l.return=o,M=l):Tv(s);for(;r!==null;)M=r,XS(r),r=r.sibling;M=s,Ic=a,vt=c}bv(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,M=r):bv(t)}}function bv(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Xh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!vt)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&lv(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}lv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Wa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}vt||e.flags&512&&ig(e)}catch(d){Ne(e,e.return,d)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function kv(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function Tv(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xh(4,e)}catch(l){Ne(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Ne(e,s,l)}}var r=e.return;try{ig(e)}catch(l){Ne(e,r,l)}break;case 5:var o=e.return;try{ig(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var FA=Math.ceil,Wu=mi.ReactCurrentDispatcher,r0=mi.ReactCurrentOwner,cn=mi.ReactCurrentBatchConfig,ne=0,tt=null,Ue=null,lt=0,Qt=0,Nr=hs(0),We=0,tl=null,Ks=0,Jh=0,o0=0,Ca=null,Ot=null,a0=0,so=1/0,Qn=null,Hu=!1,og=null,ji=null,Nc=!1,Ai=null,qu=0,ba=0,ag=null,lu=-1,cu=0;function Rt(){return ne&6?Me():lu!==-1?lu:lu=Me()}function Wi(t){return t.mode&1?ne&2&&lt!==0?lt&-lt:wA.transition!==null?(cu===0&&(cu=Mx()),cu):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Vx(t.type)),t):1}function xn(t,e,n,i){if(50<ba)throw ba=0,ag=null,Error(T(185));Pl(t,n,i),(!(ne&2)||t!==tt)&&(t===tt&&(!(ne&2)&&(Jh|=n),We===4&&bi(t,lt)),jt(t,i),n===1&&ne===0&&!(e.mode&1)&&(so=Me()+500,Gh&&ds()))}function jt(t,e){var n=t.callbackNode;wR(t,e);var i=Nu(t,t===tt?lt:0);if(i===0)n!==null&&L_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&L_(n),e===1)t.tag===0?vA(Iv.bind(null,t)):oS(Iv.bind(null,t)),gA(function(){!(ne&6)&&ds()}),n=null;else{switch(Ox(i)){case 1:n=Dm;break;case 4:n=Px;break;case 16:n=Iu;break;case 536870912:n=Dx;break;default:n=Iu}n=rC(n,JS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function JS(t,e){if(lu=-1,cu=0,ne&6)throw Error(T(327));var n=t.callbackNode;if(Ur()&&t.callbackNode!==n)return null;var i=Nu(t,t===tt?lt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Ku(t,i);else{e=i;var s=ne;ne|=2;var r=eC();(tt!==t||lt!==e)&&(Qn=null,so=Me()+500,Ds(t,e));do try{zA();break}catch(a){ZS(t,a)}while(1);qm(),Wu.current=r,ne=s,Ue!==null?e=0:(tt=null,lt=0,e=We)}if(e!==0){if(e===2&&(s=Mp(t),s!==0&&(i=s,e=lg(t,s))),e===1)throw n=tl,Ds(t,0),bi(t,i),jt(t,Me()),n;if(e===6)bi(t,i);else{if(s=t.current.alternate,!(i&30)&&!$A(s)&&(e=Ku(t,i),e===2&&(r=Mp(t),r!==0&&(i=r,e=lg(t,r))),e===1))throw n=tl,Ds(t,0),bi(t,i),jt(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(T(345));case 2:Es(t,Ot,Qn);break;case 3:if(bi(t,i),(i&130023424)===i&&(e=a0+500-Me(),10<e)){if(Nu(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Rt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Bp(Es.bind(null,t,Ot,Qn),e);break}Es(t,Ot,Qn);break;case 4:if(bi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-En(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Me()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FA(i/1960))-i,10<i){t.timeoutHandle=Bp(Es.bind(null,t,Ot,Qn),i);break}Es(t,Ot,Qn);break;case 5:Es(t,Ot,Qn);break;default:throw Error(T(329))}}}return jt(t,Me()),t.callbackNode===n?JS.bind(null,t):null}function lg(t,e){var n=Ca;return t.current.memoizedState.isDehydrated&&(Ds(t,e).flags|=256),t=Ku(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&cg(e)),t}function cg(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function $A(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Cn(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bi(t,e){for(e&=~o0,e&=~Jh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-En(e),i=1<<n;t[n]=-1,e&=~i}}function Iv(t){if(ne&6)throw Error(T(327));Ur();var e=Nu(t,0);if(!(e&1))return jt(t,Me()),null;var n=Ku(t,e);if(t.tag!==0&&n===2){var i=Mp(t);i!==0&&(e=i,n=lg(t,i))}if(n===1)throw n=tl,Ds(t,0),bi(t,e),jt(t,Me()),n;if(n===6)throw Error(T(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Es(t,Ot,Qn),jt(t,Me()),null}function l0(t,e){var n=ne;ne|=1;try{return t(e)}finally{ne=n,ne===0&&(so=Me()+500,Gh&&ds())}}function Gs(t){Ai!==null&&Ai.tag===0&&!(ne&6)&&Ur();var e=ne;ne|=1;var n=cn.transition,i=ue;try{if(cn.transition=null,ue=1,t)return t()}finally{ue=i,cn.transition=n,ne=e,!(ne&6)&&ds()}}function c0(){Qt=Nr.current,Ee(Nr)}function Ds(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pA(n)),Ue!==null)for(n=Ue.return;n!==null;){var i=n;switch(jm(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mu();break;case 3:no(),Ee(Vt),Ee(St),Jm();break;case 5:Xm(i);break;case 4:no();break;case 13:Ee(ke);break;case 19:Ee(ke);break;case 10:Km(i.type._context);break;case 22:case 23:c0()}n=n.return}if(tt=t,Ue=t=Hi(t.current,null),lt=Qt=e,We=0,tl=null,o0=Jh=Ks=0,Ot=Ca=null,Ts!==null){for(e=0;e<Ts.length;e++)if(n=Ts[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}Ts=null}return t}function ZS(t,e){do{var n=Ue;try{if(qm(),ru.current=ju,Bu){for(var i=Te.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Bu=!1}if(qs=0,Ye=je=Te=null,xa=!1,Ja=0,r0.current=null,n===null||n.return===null){We=1,tl=e,Ue=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=lt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=gv(o);if(f!==null){f.flags&=-257,mv(f,o,a,r,e),f.mode&1&&pv(r,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){pv(r,c,e),u0();break e}l=Error(T(426))}}else if(xe&&a.mode&1){var v=gv(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),mv(v,o,a,r,e),Wm(io(l,a));break e}}r=l=io(l,a),We!==4&&(We=2),Ca===null?Ca=[r]:Ca.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var y=LS(r,l,e);av(r,y);break e;case 1:a=l;var m=r.type,_=r.stateNode;if(!(r.flags&128)&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ji===null||!ji.has(_)))){r.flags|=65536,e&=-e,r.lanes|=e;var w=FS(r,a,e);av(r,w);break e}}r=r.return}while(r!==null)}nC(n)}catch(E){e=E,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(1)}function eC(){var t=Wu.current;return Wu.current=ju,t===null?ju:t}function u0(){(We===0||We===3||We===2)&&(We=4),tt===null||!(Ks&268435455)&&!(Jh&268435455)||bi(tt,lt)}function Ku(t,e){var n=ne;ne|=2;var i=eC();(tt!==t||lt!==e)&&(Qn=null,Ds(t,e));do try{UA();break}catch(s){ZS(t,s)}while(1);if(qm(),ne=n,Wu.current=i,Ue!==null)throw Error(T(261));return tt=null,lt=0,We}function UA(){for(;Ue!==null;)tC(Ue)}function zA(){for(;Ue!==null&&!hR();)tC(Ue)}function tC(t){var e=sC(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?nC(t):Ue=e,r0.current=null}function nC(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DA(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ue=null;return}}else if(n=PA(n,e,Qt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);We===0&&(We=5)}function Es(t,e,n){var i=ue,s=cn.transition;try{cn.transition=null,ue=1,VA(t,e,n,i)}finally{cn.transition=s,ue=i}return null}function VA(t,e,n,i){do Ur();while(Ai!==null);if(ne&6)throw Error(T(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(T(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(ER(t,r),t===tt&&(Ue=tt=null,lt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nc||(Nc=!0,rC(Iu,function(){return Ur(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=cn.transition,cn.transition=null;var o=ue;ue=1;var a=ne;ne|=4,r0.current=null,OA(t,n),YS(n,t),aA(zp),Ru=!!Up,zp=Up=null,t.current=n,LA(n),dR(),ne=a,ue=o,cn.transition=r}else t.current=n;if(Nc&&(Nc=!1,Ai=t,qu=s),r=t.pendingLanes,r===0&&(ji=null),gR(n.stateNode),jt(t,Me()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Hu)throw Hu=!1,t=og,og=null,t;return qu&1&&t.tag!==0&&Ur(),r=t.pendingLanes,r&1?t===ag?ba++:(ba=0,ag=t):ba=0,ds(),null}function Ur(){if(Ai!==null){var t=Ox(qu),e=cn.transition,n=ue;try{if(cn.transition=null,ue=16>t?16:t,Ai===null)var i=!1;else{if(t=Ai,Ai=null,qu=0,ne&6)throw Error(T(331));var s=ne;for(ne|=4,M=t.current;M!==null;){var r=M,o=r.child;if(M.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(M=c;M!==null;){var u=M;switch(u.tag){case 0:case 11:case 15:Sa(8,u,r)}var h=u.child;if(h!==null)h.return=u,M=h;else for(;M!==null;){u=M;var d=u.sibling,f=u.return;if(KS(u),u===c){M=null;break}if(d!==null){d.return=f,M=d;break}M=f}}}var p=r.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}M=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,M=o;else e:for(;M!==null;){if(r=M,r.flags&2048)switch(r.tag){case 0:case 11:case 15:Sa(9,r,r.return)}var y=r.sibling;if(y!==null){y.return=r.return,M=y;break e}M=r.return}}var m=t.current;for(M=m;M!==null;){o=M;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,M=_;else e:for(o=m;M!==null;){if(a=M,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xh(9,a)}}catch(E){Ne(a,a.return,E)}if(a===o){M=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,M=w;break e}M=a.return}}if(ne=s,ds(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(jh,t)}catch{}i=!0}return i}finally{ue=n,cn.transition=e}}return!1}function Nv(t,e,n){e=io(n,e),e=LS(t,e,1),t=Bi(t,e,1),e=Rt(),t!==null&&(Pl(t,1,e),jt(t,e))}function Ne(t,e,n){if(t.tag===3)Nv(t,t,n);else for(;e!==null;){if(e.tag===3){Nv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ji===null||!ji.has(i))){t=io(n,t),t=FS(e,t,1),e=Bi(e,t,1),t=Rt(),e!==null&&(Pl(e,1,t),jt(e,t));break}}e=e.return}}function BA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Rt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(lt&n)===n&&(We===4||We===3&&(lt&130023424)===lt&&500>Me()-a0?Ds(t,0):o0|=n),jt(t,e)}function iC(t,e){e===0&&(t.mode&1?(e=vc,vc<<=1,!(vc&130023424)&&(vc=4194304)):e=1);var n=Rt();t=ci(t,e),t!==null&&(Pl(t,e,n),jt(t,n))}function jA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iC(t,n)}function WA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(T(314))}i!==null&&i.delete(e),iC(t,n)}var sC;sC=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,AA(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,xe&&e.flags&1048576&&aS(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;au(t,e),t=e.pendingProps;var s=Zr(e,St.current);$r(e,n),s=e0(null,e,i,t,s,n);var r=t0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(i)?(r=!0,Ou(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qm(e),s.updater=Qh,e.stateNode=s,s._reactInternals=e,Qp(e,i,t,n),e=Jp(null,e,i,!0,r,n)):(e.tag=0,xe&&r&&Bm(e),Tt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(au(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=qA(i),t=pn(i,t),s){case 0:e=Xp(null,e,i,t,n);break e;case 1:e=vv(null,e,i,t,n);break e;case 11:e=yv(null,e,i,t,n);break e;case 14:e=_v(null,e,i,pn(i.type,t),n);break e}throw Error(T(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pn(i,s),Xp(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pn(i,s),vv(t,e,i,s,n);case 3:e:{if(VS(e),t===null)throw Error(T(387));i=e.pendingProps,r=e.memoizedState,s=r.element,hS(t,e),zu(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=io(Error(T(423)),e),e=wv(t,e,i,n,s);break e}else if(i!==s){s=io(Error(T(424)),e),e=wv(t,e,i,n,s);break e}else for(Yt=Vi(e.stateNode.containerInfo.firstChild),Xt=e,xe=!0,mn=null,n=gS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),i===s){e=ui(t,e,n);break e}Tt(t,e,i,n)}e=e.child}return e;case 5:return mS(e),t===null&&qp(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,Vp(i,s)?o=null:r!==null&&Vp(i,r)&&(e.flags|=32),zS(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&qp(e),null;case 13:return BS(t,e,n);case 4:return Ym(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=to(e,null,i,n):Tt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pn(i,s),yv(t,e,i,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,ye($u,i._currentValue),i._currentValue=o,r!==null)if(Cn(r.value,o)){if(r.children===s.children&&!Vt.current){e=ui(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=ri(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Kp(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(T(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Kp(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,$r(e,n),s=un(s),i=i(s),e.flags|=1,Tt(t,e,i,n),e.child;case 14:return i=e.type,s=pn(i,e.pendingProps),s=pn(i.type,s),_v(t,e,i,s,n);case 15:return $S(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:pn(i,s),au(t,e),e.tag=1,Bt(i)?(t=!0,Ou(e)):t=!1,$r(e,n),fS(e,i,s),Qp(e,i,s,n),Jp(null,e,i,!0,t,n);case 19:return jS(t,e,n);case 22:return US(t,e,n)}throw Error(T(156,e.tag))};function rC(t,e){return Ax(t,e)}function HA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,i){return new HA(t,e,n,i)}function h0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qA(t){if(typeof t=="function")return h0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rm)return 11;if(t===Am)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uu(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")h0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vr:return Ms(n.children,s,r,e);case Nm:o=8,s|=8;break;case vp:return t=on(12,n,e,s|2),t.elementType=vp,t.lanes=r,t;case wp:return t=on(13,n,e,s),t.elementType=wp,t.lanes=r,t;case Ep:return t=on(19,n,e,s),t.elementType=Ep,t.lanes=r,t;case px:return Zh(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dx:o=10;break e;case fx:o=9;break e;case Rm:o=11;break e;case Am:o=14;break e;case xi:o=16,i=null;break e}throw Error(T(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Ms(t,e,n,i){return t=on(7,t,i,e),t.lanes=n,t}function Zh(t,e,n,i){return t=on(22,t,i,e),t.elementType=px,t.lanes=n,t.stateNode={isHidden:!1},t}function Rf(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function Af(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KA(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hf(0),this.expirationTimes=hf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hf(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function d0(t,e,n,i,s,r,o,a,l){return t=new KA(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=on(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qm(r),t}function GA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_r,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function oC(t){if(!t)return ts;t=t._reactInternals;e:{if(ar(t)!==t||t.tag!==1)throw Error(T(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(t.tag===1){var n=t.type;if(Bt(n))return rS(t,n,e)}return e}function aC(t,e,n,i,s,r,o,a,l){return t=d0(n,i,!0,t,s,r,o,a,l),t.context=oC(null),n=t.current,i=Rt(),s=Wi(n),r=ri(i,s),r.callback=e??null,Bi(n,r,s),t.current.lanes=s,Pl(t,s,i),jt(t,i),t}function ed(t,e,n,i){var s=e.current,r=Rt(),o=Wi(s);return n=oC(n),e.context===null?e.context=n:e.pendingContext=n,e=ri(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Bi(s,e,o),t!==null&&(xn(t,s,o,r),su(t,s,o)),o}function Gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function f0(t,e){Rv(t,e),(t=t.alternate)&&Rv(t,e)}function QA(){return null}var lC=typeof reportError=="function"?reportError:function(t){console.error(t)};function p0(t){this._internalRoot=t}td.prototype.render=p0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(T(409));ed(t,e,null,null)};td.prototype.unmount=p0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Gs(function(){ed(null,t,null,null)}),e[li]=null}};function td(t){this._internalRoot=t}td.prototype.unstable_scheduleHydration=function(t){if(t){var e=$x();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ci.length&&e!==0&&e<Ci[n].priority;n++);Ci.splice(n,0,t),n===0&&zx(t)}};function g0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Av(){}function YA(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=Gu(o);r.call(c)}}var o=aC(e,i,t,0,null,!1,!1,"",Av);return t._reactRootContainer=o,t[li]=o.current,Ka(t.nodeType===8?t.parentNode:t),Gs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=Gu(l);a.call(c)}}var l=d0(t,0,!1,null,null,!1,!1,"",Av);return t._reactRootContainer=l,t[li]=l.current,Ka(t.nodeType===8?t.parentNode:t),Gs(function(){ed(e,l,n,i)}),l}function id(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=Gu(o);a.call(l)}}ed(e,o,t,s)}else o=YA(n,e,t,s,i);return Gu(o)}Lx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oa(e.pendingLanes);n!==0&&(Mm(e,n|1),jt(e,Me()),!(ne&6)&&(so=Me()+500,ds()))}break;case 13:Gs(function(){var i=ci(t,1);if(i!==null){var s=Rt();xn(i,t,1,s)}}),f0(t,1)}};Om=function(t){if(t.tag===13){var e=ci(t,134217728);if(e!==null){var n=Rt();xn(e,t,134217728,n)}f0(t,134217728)}};Fx=function(t){if(t.tag===13){var e=Wi(t),n=ci(t,e);if(n!==null){var i=Rt();xn(n,t,e,i)}f0(t,e)}};$x=function(){return ue};Ux=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Ap=function(t,e,n){switch(e){case"input":if(Cp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Kh(i);if(!s)throw Error(T(90));mx(i),Cp(i,s)}}}break;case"textarea":_x(t,n);break;case"select":e=n.value,e!=null&&Mr(t,!!n.multiple,e,!1)}};bx=l0;kx=Gs;var XA={usingClientEntryPoint:!1,Events:[Ml,Sr,Kh,Sx,Cx,l0]},Ko={findFiberByHostInstance:ks,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},JA={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nx(t),t===null?null:t.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||QA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rc.isDisabled&&Rc.supportsFiber)try{jh=Rc.inject(JA),Fn=Rc}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XA;en.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g0(e))throw Error(T(200));return GA(t,e,null,n)};en.createRoot=function(t,e){if(!g0(t))throw Error(T(299));var n=!1,i="",s=lC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=d0(t,1,!1,null,null,n,!1,i,s),t[li]=e.current,Ka(t.nodeType===8?t.parentNode:t),new p0(e)};en.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(T(188)):(t=Object.keys(t).join(","),Error(T(268,t)));return t=Nx(e),t=t===null?null:t.stateNode,t};en.flushSync=function(t){return Gs(t)};en.hydrate=function(t,e,n){if(!nd(e))throw Error(T(200));return id(null,t,e,!0,n)};en.hydrateRoot=function(t,e,n){if(!g0(t))throw Error(T(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=lC;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=aC(e,null,t,1,n??null,s,!1,r,o),t[li]=e.current,Ka(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new td(e)};en.render=function(t,e,n){if(!nd(e))throw Error(T(200));return id(null,t,e,!1,n)};en.unmountComponentAtNode=function(t){if(!nd(t))throw Error(T(40));return t._reactRootContainer?(Gs(function(){id(null,null,t,!1,function(){t._reactRootContainer=null,t[li]=null})}),!0):!1};en.unstable_batchedUpdates=l0;en.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!nd(n))throw Error(T(200));if(t==null||t._reactInternals===void 0)throw Error(T(38));return id(t,e,n,!1,i)};en.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=en})(ax);var Pv=ax.exports;yp.createRoot=Pv.createRoot,yp.hydrateRoot=Pv.hydrateRoot;function Qu(){return Qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qu.apply(this,arguments)}var Pi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Pi||(Pi={}));const Dv="popstate";function ZA(t){t===void 0&&(t={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return ug("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:nl(s)}return nP(e,n,null,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eP(){return Math.random().toString(36).substr(2,8)}function Mv(t){return{usr:t.state,key:t.key}}function ug(t,e,n,i){return n===void 0&&(n=null),Qu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ko(e):e,{state:n,key:e&&e.key||i||eP()})}function nl(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ko(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function tP(t){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:window.location.href,n=typeof t=="string"?t:nl(t);return qe(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}function nP(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=Pi.Pop,l=null;function c(){a=Pi.Pop,l&&l({action:a,location:d.location})}function u(f,p){a=Pi.Push;let g=ug(d.location,f,p);n&&n(g,f);let v=Mv(g),y=d.createHref(g);try{o.pushState(v,"",y)}catch{s.location.assign(y)}r&&l&&l({action:a,location:d.location})}function h(f,p){a=Pi.Replace;let g=ug(d.location,f,p);n&&n(g,f);let v=Mv(g),y=d.createHref(g);o.replaceState(v,"",y),r&&l&&l({action:a,location:d.location})}let d={get action(){return a},get location(){return t(s,o)},listen(f){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Dv,c),l=f,()=>{s.removeEventListener(Dv,c),l=null}},createHref(f){return e(s,f)},encodeLocation(f){let p=tP(typeof f=="string"?f:nl(f));return{pathname:p.pathname,search:p.search,hash:p.hash}},push:u,replace:h,go(f){return o.go(f)}};return d}var Ov;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ov||(Ov={}));function iP(t,e,n){n===void 0&&(n="/");let i=typeof e=="string"?ko(e):e,s=hC(i.pathname||"/",n);if(s==null)return null;let r=cC(t);sP(r);let o=null;for(let a=0;o==null&&a<r.length;++a)o=fP(r[a],mP(s));return o}function cC(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(qe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=qi([i,l.relativePath]),u=n.concat(l);r.children&&r.children.length>0&&(qe(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),cC(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:hP(c,r.index),routesMeta:u})};return t.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of uC(r.path))s(r,o,l)}),e}function uC(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=uC(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dP(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const rP=/^:\w+$/,oP=3,aP=2,lP=1,cP=10,uP=-2,Lv=t=>t==="*";function hP(t,e){let n=t.split("/"),i=n.length;return n.some(Lv)&&(i+=uP),e&&(i+=aP),n.filter(s=>!Lv(s)).reduce((s,r)=>s+(rP.test(r)?oP:r===""?lP:cP),i)}function dP(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function fP(t,e){let{routesMeta:n}=t,i={},s="/",r=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",u=pP({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(i,u.params);let h=a.route;r.push({params:i,pathname:qi([s,u.pathname]),pathnameBase:wP(qi([s,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(s=qi([s,u.pathnameBase]))}return r}function pP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=gP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,u,h)=>{if(u==="*"){let d=a[h]||"";o=r.slice(0,r.length-d.length).replace(/(.)\/+$/,"$1")}return c[u]=yP(a[h]||"",u),c},{}),pathname:r,pathnameBase:o,pattern:t}}function gP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),m0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(i.push(a),"/([^\\/]+)"));return t.endsWith("*")?(i.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function mP(t){try{return decodeURI(t)}catch(e){return m0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yP(t,e){try{return decodeURIComponent(t)}catch(n){return m0(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function hC(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function m0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _P(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?ko(t):t;return{pathname:n?n.startsWith("/")?n:vP(n,e):e,search:EP(i),hash:xP(s)}}function vP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pf(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fC(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=ko(t):(s=Qu({},t),qe(!s.pathname||!s.pathname.includes("?"),Pf("?","pathname","search",s)),qe(!s.pathname||!s.pathname.includes("#"),Pf("#","pathname","hash",s)),qe(!s.search||!s.search.includes("#"),Pf("#","search","hash",s)));let r=t===""||s.pathname==="",o=r?"/":s.pathname,a;if(i||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=_P(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const qi=t=>t.join("/").replace(/\/\/+/g,"/"),wP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class SP{constructor(e,n,i,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function CP(t){return t instanceof SP}const bP=["post","put","patch","delete"];[...bP];function hg(){return hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hg.apply(this,arguments)}function kP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const TP=typeof Object.is=="function"?Object.is:kP,{useState:IP,useEffect:NP,useLayoutEffect:RP,useDebugValue:AP}=mp;function PP(t,e,n){const i=e(),[{inst:s},r]=IP({inst:{value:i,getSnapshot:e}});return RP(()=>{s.value=i,s.getSnapshot=e,Df(s)&&r({inst:s})},[t,i,e]),NP(()=>(Df(s)&&r({inst:s}),t(()=>{Df(s)&&r({inst:s})})),[t]),AP(i),i}function Df(t){const e=t.getSnapshot,n=t.value;try{const i=e();return!TP(n,i)}catch{return!0}}function DP(t,e,n){return e()}const MP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OP=!MP,LP=OP?DP:PP;"useSyncExternalStore"in mp&&(t=>t.useSyncExternalStore)(mp);const FP=k.exports.createContext(null),$P=k.exports.createContext(null),pC=k.exports.createContext(null),sd=k.exports.createContext(null),rd=k.exports.createContext(null),Ll=k.exports.createContext({outlet:null,matches:[]}),gC=k.exports.createContext(null);function UP(t,e){let{relative:n}=e===void 0?{}:e;Fl()||qe(!1);let{basename:i,navigator:s}=k.exports.useContext(sd),{hash:r,pathname:o,search:a}=mC(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:qi([i,o])),s.createHref({pathname:l,search:a,hash:r})}function Fl(){return k.exports.useContext(rd)!=null}function od(){return Fl()||qe(!1),k.exports.useContext(rd).location}function zP(){Fl()||qe(!1);let{basename:t,navigator:e}=k.exports.useContext(sd),{matches:n}=k.exports.useContext(Ll),{pathname:i}=od(),s=JSON.stringify(dC(n).map(a=>a.pathnameBase)),r=k.exports.useRef(!1);return k.exports.useEffect(()=>{r.current=!0}),k.exports.useCallback(function(a,l){if(l===void 0&&(l={}),!r.current)return;if(typeof a=="number"){e.go(a);return}let c=fC(a,JSON.parse(s),i,l.relative==="path");t!=="/"&&(c.pathname=c.pathname==="/"?t:qi([t,c.pathname])),(l.replace?e.replace:e.push)(c,l.state,l)},[t,e,s,i])}function mC(t,e){let{relative:n}=e===void 0?{}:e,{matches:i}=k.exports.useContext(Ll),{pathname:s}=od(),r=JSON.stringify(dC(i).map(o=>o.pathnameBase));return k.exports.useMemo(()=>fC(t,JSON.parse(r),s,n==="path"),[t,r,s,n])}function VP(t,e){Fl()||qe(!1);let{navigator:n}=k.exports.useContext(sd),i=k.exports.useContext(pC),{matches:s}=k.exports.useContext(Ll),r=s[s.length-1],o=r?r.params:{};r&&r.pathname;let a=r?r.pathnameBase:"/";r&&r.route;let l=od(),c;if(e){var u;let g=typeof e=="string"?ko(e):e;a==="/"||(u=g.pathname)!=null&&u.startsWith(a)||qe(!1),c=g}else c=l;let h=c.pathname||"/",d=a==="/"?h:h.slice(a.length)||"/",f=iP(t,{pathname:d}),p=HP(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},o,g.params),pathname:qi([a,n.encodeLocation?n.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?a:qi([a,n.encodeLocation?n.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,i||void 0);return e&&p?k.exports.createElement(rd.Provider,{value:{location:hg({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Pi.Pop}},p):p}function BP(){let t=KP(),e=CP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},r={padding:"2px 4px",backgroundColor:i};return k.exports.createElement(k.exports.Fragment,null,k.exports.createElement("h2",null,"Unhandled Thrown Error!"),k.exports.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.exports.createElement("pre",{style:s},n):null,k.exports.createElement("p",null,"💿 Hey developer 👋"),k.exports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.exports.createElement("code",{style:r},"errorElement")," props on ",k.exports.createElement("code",{style:r},"<Route>")))}class jP extends k.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?k.exports.createElement(gC.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function WP(t){let{routeContext:e,match:n,children:i}=t,s=k.exports.useContext(FP);return s&&n.route.errorElement&&(s._deepestRenderedBoundaryId=n.route.id),k.exports.createElement(Ll.Provider,{value:e},i)}function HP(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let i=t,s=n==null?void 0:n.errors;if(s!=null){let r=i.findIndex(o=>o.route.id&&(s==null?void 0:s[o.route.id]));r>=0||qe(!1),i=i.slice(0,Math.min(i.length,r+1))}return i.reduceRight((r,o,a)=>{let l=o.route.id?s==null?void 0:s[o.route.id]:null,c=n?o.route.errorElement||k.exports.createElement(BP,null):null,u=()=>k.exports.createElement(WP,{match:o,routeContext:{outlet:r,matches:e.concat(i.slice(0,a+1))}},l?c:o.route.element!==void 0?o.route.element:r);return n&&(o.route.errorElement||a===0)?k.exports.createElement(jP,{location:n.location,component:c,error:l,children:u()}):u()},null)}var Fv;(function(t){t.UseRevalidator="useRevalidator"})(Fv||(Fv={}));var dg;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(dg||(dg={}));function qP(t){let e=k.exports.useContext(pC);return e||qe(!1),e}function KP(){var t;let e=k.exports.useContext(gC),n=qP(dg.UseRouteError),i=k.exports.useContext(Ll),s=i.matches[i.matches.length-1];return e||(i||qe(!1),s.route.id||qe(!1),(t=n.errors)==null?void 0:t[s.route.id])}function hu(t){qe(!1)}function GP(t){let{basename:e="/",children:n=null,location:i,navigationType:s=Pi.Pop,navigator:r,static:o=!1}=t;Fl()&&qe(!1);let a=e.replace(/^\/*/,"/"),l=k.exports.useMemo(()=>({basename:a,navigator:r,static:o}),[a,r,o]);typeof i=="string"&&(i=ko(i));let{pathname:c="/",search:u="",hash:h="",state:d=null,key:f="default"}=i,p=k.exports.useMemo(()=>{let g=hC(c,a);return g==null?null:{pathname:g,search:u,hash:h,state:d,key:f}},[a,c,u,h,d,f]);return p==null?null:k.exports.createElement(sd.Provider,{value:l},k.exports.createElement(rd.Provider,{children:n,value:{location:p,navigationType:s}}))}function QP(t){let{children:e,location:n}=t,i=k.exports.useContext($P),s=i&&!e?i.router.routes:fg(e);return VP(s,n)}var $v;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})($v||($v={}));new Promise(()=>{});function fg(t,e){e===void 0&&(e=[]);let n=[];return k.exports.Children.forEach(t,(i,s)=>{if(!k.exports.isValidElement(i))return;if(i.type===k.exports.Fragment){n.push.apply(n,fg(i.props.children,e));return}i.type!==hu&&qe(!1),!i.props.index||!i.props.children||qe(!1);let r=[...e,s],o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,hasErrorBoundary:i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle};i.props.children&&(o.children=fg(i.props.children,r)),n.push(o)}),n}function pg(){return pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pg.apply(this,arguments)}function YP(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function XP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JP(t,e){return t.button===0&&(!e||e==="_self")&&!XP(t)}const ZP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function e2(t){let{basename:e,children:n,window:i}=t,s=k.exports.useRef();s.current==null&&(s.current=ZA({window:i,v5Compat:!0}));let r=s.current,[o,a]=k.exports.useState({action:r.action,location:r.location});return k.exports.useLayoutEffect(()=>r.listen(a),[r]),k.exports.createElement(GP,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:r})}const xs=k.exports.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u}=e,h=YP(e,ZP),d=UP(c,{relative:s}),f=t2(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s});function p(g){i&&i(g),g.defaultPrevented||f(g)}return k.exports.createElement("a",pg({},h,{href:d,onClick:r?i:p,ref:n,target:l}))});var Uv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(Uv||(Uv={}));var zv;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zv||(zv={}));function t2(t,e){let{target:n,replace:i,state:s,preventScrollReset:r,relative:o}=e===void 0?{}:e,a=zP(),l=od(),c=mC(t,{relative:o});return k.exports.useCallback(u=>{if(JP(u,n)){u.preventDefault();let h=i!==void 0?i:nl(l)===nl(c);a(t,{replace:h,state:s,preventScrollReset:r,relative:o})}},[l,a,c,i,s,n,t,r,o])}const n2="/assets/menu-e0613cf3.svg";var yC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Vv=wn.createContext&&wn.createContext(yC),Ki=globalThis&&globalThis.__assign||function(){return Ki=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Ki.apply(this,arguments)},i2=globalThis&&globalThis.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n};function _C(t){return t&&t.map(function(e,n){return wn.createElement(e.tag,Ki({key:n},e.attr),_C(e.child))})}function $l(t){return function(e){return wn.createElement(s2,Ki({attr:Ki({},t.attr)},e),_C(t.child))}}function s2(t){var e=function(n){var i=t.attr,s=t.size,r=t.title,o=i2(t,["attr","size","title"]),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),wn.createElement("svg",Ki({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:l,style:Ki(Ki({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),r&&wn.createElement("title",null,r),t.children)};return Vv!==void 0?wn.createElement(Vv.Consumer,null,function(n){return e(n)}):e(yC)}function r2(t){return $l({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function o2(){const[t,e]=k.exports.useState(!1),n=()=>e(!t);return ee("nav",{className:"w-full flex bg-gray-800 py-6 justify-between items-center navbar",children:[C(xs,{to:"/about",children:C("h1",{className:"text-xl font-semibold text-gray-50 sm:pl-20 pl-5",children:"Comfort++"})}),ee("ul",{className:"list-none hidden sm:flex justify-end items-center pr-20 text-gray-50 ",children:[C("li",{className:"mr-10",children:C(xs,{to:"/",children:"Home"})}),C("li",{children:C(xs,{to:"/reports",children:"Reports"})})]}),ee("div",{className:"sm:hidden justify-end items-center sm:pr-20 pr-5 z-10 ",onClick:n,children:[" ",t?C(r2,{color:"white"}):C("img",{src:n2,alt:"menu",className:"w-[28px] h-[28px] object-contain"})]}),ee("ul",{className:t?"absolute top-0 left-0 w-full h-screen bg-gray-800 text-gray-50 flex flex-col justify-center text-center":"hidden",children:[C("li",{className:"text-5xl py-6",children:C(xs,{to:"/about",onClick:n,children:"About"})}),C("li",{className:"text-5xl py-6",children:C(xs,{to:"/",onClick:n,children:"Home"})}),C("li",{className:"text-5xl py-6",children:C(xs,{to:"/reports",onClick:n,children:"Reports"})})]})]})}const vC={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};const R=function(t,e){if(!t)throw To(e)},To=function(t){return new Error("Firebase Database ("+vC.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};const wC=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},a2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):a2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||h==null)throw Error();const d=r<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const p=c<<6&192|h;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},EC=function(t){const e=wC(t);return y0.encodeByteArray(e,!0)},Yu=function(t){return EC(t).replace(/\./g,"")},Xu=function(t){try{return y0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l2(t){return xC(void 0,t)}function xC(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!c2(n)||(t[n]=xC(t[n],e[n]));return t}function c2(t){return t!=="__proto__"}function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function u2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h2(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CC(){return vC.NODE_ADMIN===!0}function d2(){try{return typeof indexedDB=="object"}catch{return!1}}function f2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}function p2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const g2=()=>p2().__FIREBASE_DEFAULTS__,m2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Xu(t[1]);return e&&JSON.parse(e)},v0=()=>{try{return g2()||m2()||y2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bC=t=>{var e,n;return(n=(e=v0())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kC=t=>{const e=bC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},_2=()=>{var t;return(t=v0())===null||t===void 0?void 0:t.config},TC=t=>{var e;return(e=v0())===null||e===void 0?void 0:e[`_${t}`]};class Ul{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function IC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Yu(JSON.stringify(n)),Yu(JSON.stringify(o)),a].join(".")}const v2="FirebaseError";class yi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=v2,Object.setPrototypeOf(this,yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?w2(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new yi(s,a,i)}}function w2(t,e){return t.replace(E2,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const E2=/\{\$([^}]+)}/g;function il(t){return JSON.parse(t)}function Ze(t){return JSON.stringify(t)}const NC=function(t){let e={},n={},i={},s="";try{const r=t.split(".");e=il(Xu(r[0])||""),n=il(Xu(r[1])||""),s=r[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:s}},x2=function(t){const e=NC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},S2=function(t){const e=NC(t).claims;return typeof e=="object"&&e.admin===!0};function Wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ro(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function gg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ju(t,e,n){const i={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=e.call(n,t[s],s,t));return i}function sl(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(Bv(r)&&Bv(o)){if(!sl(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Bv(t){return t!==null&&typeof t=="object"}function Io(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class C2{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)i[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)i[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=i[h-3]^i[h-8]^i[h-14]^i[h-16];i[h]=(d<<1|d>>>31)&4294967295}let s=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):h<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const d=(s<<5|s>>>27)+c+l+u+i[h]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=s,s=d}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let s=0;const r=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(r[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}else for(;s<n;)if(r[o]=e[s],++o,++s,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let r=24;r>=0;r-=8)e[i]=this.chain_[s]>>r&255,++i;return e}}function b2(t,e){const n=new k2(t,e);return n.subscribe.bind(n)}class k2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");T2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Mf),s.error===void 0&&(s.error=Mf),s.complete===void 0&&(s.complete=Mf);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function T2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mf(){}function ad(t,e){return`${t} failed: ${e} argument `}const I2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);if(s>=55296&&s<=56319){const r=s-55296;i++,R(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;s=65536+(r<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ld=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};function Be(t){return t&&t._delegate?t._delegate:t}class ns{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ss="[DEFAULT]";class N2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Ul;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A2(e))try{this.getOrInitializeService({instanceIdentifier:Ss})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ss){return this.instances.has(e)}getOptions(e=Ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:R2(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ss){return this.component?this.component.multipleInstances?e:Ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R2(t){return t===Ss?void 0:t}function A2(t){return t.instantiationMode==="EAGER"}class P2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new N2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const D2={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},M2=ie.INFO,O2={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},L2=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=O2[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cd{constructor(e){this.name=e,this._logLevel=M2,this._logHandler=L2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const F2=(t,e)=>e.some(n=>t instanceof n);let jv,Wv;function $2(){return jv||(jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U2(){return Wv||(Wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RC=new WeakMap,mg=new WeakMap,AC=new WeakMap,Of=new WeakMap,w0=new WeakMap;function z2(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Gi(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RC.set(n,t)}).catch(()=>{}),w0.set(e,t),e}function V2(t){if(mg.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});mg.set(t,e)}let yg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function B2(t){yg=t(yg)}function j2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Lf(this),e,...n);return AC.set(i,e.sort?e.sort():[e]),Gi(i)}:U2().includes(t)?function(...e){return t.apply(Lf(this),e),Gi(RC.get(this))}:function(...e){return Gi(t.apply(Lf(this),e))}}function W2(t){return typeof t=="function"?j2(t):(t instanceof IDBTransaction&&V2(t),F2(t,$2())?new Proxy(t,yg):t)}function Gi(t){if(t instanceof IDBRequest)return z2(t);if(Of.has(t))return Of.get(t);const e=W2(t);return e!==t&&(Of.set(t,e),w0.set(e,t)),e}const Lf=t=>w0.get(t);function H2(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Gi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Gi(o.result),l.oldVersion,l.newVersion,Gi(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const q2=["get","getKey","getAll","getAllKeys","count"],K2=["put","add","delete","clear"],Ff=new Map;function Hv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ff.get(e))return Ff.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=K2.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||q2.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Ff.set(e,r),r}B2(t=>({...t,get:(e,n,i)=>Hv(e,n)||t.get(e,n,i),has:(e,n)=>!!Hv(e,n)||t.has(e,n)}));class G2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Q2(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Q2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _g="@firebase/app",qv="0.9.0";const Qs=new cd("@firebase/app"),Y2="@firebase/app-compat",X2="@firebase/analytics-compat",J2="@firebase/analytics",Z2="@firebase/app-check-compat",eD="@firebase/app-check",tD="@firebase/auth",nD="@firebase/auth-compat",iD="@firebase/database",sD="@firebase/database-compat",rD="@firebase/functions",oD="@firebase/functions-compat",aD="@firebase/installations",lD="@firebase/installations-compat",cD="@firebase/messaging",uD="@firebase/messaging-compat",hD="@firebase/performance",dD="@firebase/performance-compat",fD="@firebase/remote-config",pD="@firebase/remote-config-compat",gD="@firebase/storage",mD="@firebase/storage-compat",yD="@firebase/firestore",_D="@firebase/firestore-compat",vD="firebase",wD="9.15.0";const vg="[DEFAULT]",ED={[_g]:"fire-core",[Y2]:"fire-core-compat",[J2]:"fire-analytics",[X2]:"fire-analytics-compat",[eD]:"fire-app-check",[Z2]:"fire-app-check-compat",[tD]:"fire-auth",[nD]:"fire-auth-compat",[iD]:"fire-rtdb",[sD]:"fire-rtdb-compat",[rD]:"fire-fn",[oD]:"fire-fn-compat",[aD]:"fire-iid",[lD]:"fire-iid-compat",[cD]:"fire-fcm",[uD]:"fire-fcm-compat",[hD]:"fire-perf",[dD]:"fire-perf-compat",[fD]:"fire-rc",[pD]:"fire-rc-compat",[gD]:"fire-gcs",[mD]:"fire-gcs-compat",[yD]:"fire-fst",[_D]:"fire-fst-compat","fire-js":"fire-js",[vD]:"fire-js-all"};const Zu=new Map,wg=new Map;function xD(t,e){try{t.container.addComponent(e)}catch(n){Qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){const e=t.name;if(wg.has(e))return Qs.debug(`There were multiple attempts to register component ${e}.`),!1;wg.set(e,t);for(const n of Zu.values())xD(n,t);return!0}function Vl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const SD={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Qi=new zl("app","Firebase",SD);class CD{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const No=wD;function PC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Qi.create("bad-app-name",{appName:String(s)});if(n||(n=_2()),!n)throw Qi.create("no-options");const r=Zu.get(s);if(r){if(sl(n,r.options)&&sl(i,r.config))return r;throw Qi.create("duplicate-app",{appName:s})}const o=new P2(s);for(const l of wg.values())o.addComponent(l);const a=new CD(n,i,o);return Zu.set(s,a),a}function E0(t=vg){const e=Zu.get(t);if(!e&&t===vg)return PC();if(!e)throw Qi.create("no-app",{appName:t});return e}function Un(t,e,n){var i;let s=(i=ED[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qs.warn(a.join(" "));return}Ys(new ns(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const bD="firebase-heartbeat-database",kD=1,rl="firebase-heartbeat-store";let $f=null;function DC(){return $f||($f=H2(bD,kD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(rl)}}}).catch(t=>{throw Qi.create("idb-open",{originalErrorMessage:t.message})})),$f}async function TD(t){try{return(await DC()).transaction(rl).objectStore(rl).get(MC(t))}catch(e){if(e instanceof yi)Qs.warn(e.message);else{const n=Qi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qs.warn(n.message)}}}async function Kv(t,e){try{const i=(await DC()).transaction(rl,"readwrite");return await i.objectStore(rl).put(e,MC(t)),i.done}catch(n){if(n instanceof yi)Qs.warn(n.message);else{const i=Qi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qs.warn(i.message)}}}function MC(t){return`${t.name}!${t.options.appId}`}const ID=1024,ND=30*24*60*60*1e3;class RD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new PD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gv();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const r=new Date(s.date).valueOf();return Date.now()-r<=ND}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Gv(),{heartbeatsToSend:n,unsentEntries:i}=AD(this._heartbeatsCache.heartbeats),s=Yu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Gv(){return new Date().toISOString().substring(0,10)}function AD(t,e=ID){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),Qv(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Qv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class PD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d2()?f2().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await TD(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Qv(t){return Yu(JSON.stringify({version:2,heartbeats:t})).length}function DD(t){Ys(new ns("platform-logger",e=>new G2(e),"PRIVATE")),Ys(new ns("heartbeat",e=>new RD(e),"PRIVATE")),Un(_g,qv,t),Un(_g,qv,"esm2017"),Un("fire-js","")}DD("");var MD="firebase",OD="9.15.0";Un(MD,OD,"app");var LD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O,x0=x0||{},W=LD||self;function eh(){}function ud(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Bl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function FD(t){return Object.prototype.hasOwnProperty.call(t,Uf)&&t[Uf]||(t[Uf]=++$D)}var Uf="closure_uid_"+(1e9*Math.random()>>>0),$D=0;function UD(t,e,n){return t.call.apply(t.bind,arguments)}function zD(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Et(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Et=UD:Et=zD,Et.apply(null,arguments)}function Ac(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function ft(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(i,s,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(i,o)}}function fs(){this.s=this.s,this.o=this.o}var VD=0;fs.prototype.s=!1;fs.prototype.na=function(){!this.s&&(this.s=!0,this.M(),VD!=0)&&FD(this)};fs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function S0(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Yv(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(ud(i)){const s=t.length||0,r=i.length||0;t.length=s+r;for(let o=0;o<r;o++)t[s+o]=i[o]}else t.push(i)}}function xt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}xt.prototype.h=function(){this.defaultPrevented=!0};var BD=function(){if(!W.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{W.addEventListener("test",eh,e),W.removeEventListener("test",eh,e)}catch{}return t}();function th(t){return/^[\s\xa0]*$/.test(t)}var Xv=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function zf(t,e){return t<e?-1:t>e?1:0}function hd(){var t=W.navigator;return t&&(t=t.userAgent)?t:""}function On(t){return hd().indexOf(t)!=-1}function C0(t){return C0[" "](t),t}C0[" "]=eh;function jD(t){var e=qD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var WD=On("Opera"),oo=On("Trident")||On("MSIE"),LC=On("Edge"),Eg=LC||oo,FC=On("Gecko")&&!(hd().toLowerCase().indexOf("webkit")!=-1&&!On("Edge"))&&!(On("Trident")||On("MSIE"))&&!On("Edge"),HD=hd().toLowerCase().indexOf("webkit")!=-1&&!On("Edge");function $C(){var t=W.document;return t?t.documentMode:void 0}var nh;e:{var Vf="",Bf=function(){var t=hd();if(FC)return/rv:([^\);]+)(\)|;)/.exec(t);if(LC)return/Edge\/([\d\.]+)/.exec(t);if(oo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(HD)return/WebKit\/(\S+)/.exec(t);if(WD)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Bf&&(Vf=Bf?Bf[1]:""),oo){var jf=$C();if(jf!=null&&jf>parseFloat(Vf)){nh=String(jf);break e}}nh=Vf}var qD={};function KD(){return jD(function(){let t=0;const e=Xv(String(nh)).split("."),n=Xv("9").split("."),i=Math.max(e.length,n.length);for(let o=0;t==0&&o<i;o++){var s=e[o]||"",r=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s[0].length==0&&r[0].length==0)break;t=zf(s[1].length==0?0:parseInt(s[1],10),r[1].length==0?0:parseInt(r[1],10))||zf(s[2].length==0,r[2].length==0)||zf(s[2],r[2]),s=s[3],r=r[3]}while(t==0)}return 0<=t})}var xg;if(W.document&&oo){var Jv=$C();xg=Jv||parseInt(nh,10)||void 0}else xg=void 0;var GD=xg;function ol(t,e){if(xt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(FC){e:{try{C0(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:QD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ol.X.h.call(this)}}ft(ol,xt);var QD={2:"touch",3:"pen",4:"mouse"};ol.prototype.h=function(){ol.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var jl="closure_listenable_"+(1e6*Math.random()|0),YD=0;function XD(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.ha=s,this.key=++YD,this.ba=this.ea=!1}function dd(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function b0(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function UC(t){const e={};for(const n in t)e[n]=t[n];return e}const Zv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zC(t,e){let n,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(n in i)t[n]=i[n];for(let r=0;r<Zv.length;r++)n=Zv[r],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function fd(t){this.src=t,this.g={},this.h=0}fd.prototype.add=function(t,e,n,i,s){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=Cg(t,e,i,s);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new XD(e,this.src,r,!!i,s),e.ea=n,t.push(e)),e};function Sg(t,e){var n=e.type;if(n in t.g){var i=t.g[n],s=OC(i,e),r;(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(dd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Cg(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.ba&&r.listener==e&&r.capture==!!n&&r.ha==i)return s}return-1}var k0="closure_lm_"+(1e6*Math.random()|0),Wf={};function VC(t,e,n,i,s){if(i&&i.once)return jC(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)VC(t,e[r],n,i,s);return null}return n=N0(n),t&&t[jl]?t.N(e,n,Bl(i)?!!i.capture:!!i,s):BC(t,e,n,!1,i,s)}function BC(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var o=Bl(s)?!!s.capture:!!s,a=I0(t);if(a||(t[k0]=a=new fd(t)),n=a.add(e,n,i,o,r),n.proxy)return n;if(i=JD(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)BD||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(HC(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function JD(){function t(n){return e.call(t.src,t.listener,n)}const e=ZD;return t}function jC(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)jC(t,e[r],n,i,s);return null}return n=N0(n),t&&t[jl]?t.O(e,n,Bl(i)?!!i.capture:!!i,s):BC(t,e,n,!0,i,s)}function WC(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)WC(t,e[r],n,i,s);else i=Bl(i)?!!i.capture:!!i,n=N0(n),t&&t[jl]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=Cg(r,n,i,s),-1<n&&(dd(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=I0(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Cg(e,n,i,s)),(n=-1<t?e[t]:null)&&T0(n))}function T0(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[jl])Sg(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(HC(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=I0(e))?(Sg(n,t),n.h==0&&(n.src=null,e[k0]=null)):dd(t)}}}function HC(t){return t in Wf?Wf[t]:Wf[t]="on"+t}function ZD(t,e){if(t.ba)t=!0;else{e=new ol(e,this);var n=t.listener,i=t.ha||t.src;t.ea&&T0(t),t=n.call(i,e)}return t}function I0(t){return t=t[k0],t instanceof fd?t:null}var Hf="__closure_events_fn_"+(1e9*Math.random()>>>0);function N0(t){return typeof t=="function"?t:(t[Hf]||(t[Hf]=function(e){return t.handleEvent(e)}),t[Hf])}function it(){fs.call(this),this.i=new fd(this),this.P=this,this.I=null}ft(it,fs);it.prototype[jl]=!0;it.prototype.removeEventListener=function(t,e,n,i){WC(this,t,e,n,i)};function ct(t,e){var n,i=t.I;if(i)for(n=[];i;i=i.I)n.push(i);if(t=t.P,i=e.type||e,typeof e=="string")e=new xt(e,t);else if(e instanceof xt)e.target=e.target||t;else{var s=e;e=new xt(i,t),zC(e,s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];s=Pc(o,i,!0,e)&&s}if(o=e.g=t,s=Pc(o,i,!0,e)&&s,s=Pc(o,i,!1,e)&&s,n)for(r=0;r<n.length;r++)o=e.g=n[r],s=Pc(o,i,!1,e)&&s}it.prototype.M=function(){if(it.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)dd(n[i]);delete t.g[e],t.h--}}this.I=null};it.prototype.N=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};it.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Pc(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&Sg(t.i,o),s=a.call(l,i)!==!1&&s}}return s&&!i.defaultPrevented}var R0=W.JSON.stringify;function eM(){var t=GC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class tM{constructor(){this.h=this.g=null}add(e,n){const i=qC.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var qC=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new nM,t=>t.reset());class nM{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function iM(t){W.setTimeout(()=>{throw t},0)}function KC(t,e){bg||sM(),kg||(bg(),kg=!0),GC.add(t,e)}var bg;function sM(){var t=W.Promise.resolve(void 0);bg=function(){t.then(rM)}}var kg=!1,GC=new tM;function rM(){for(var t;t=eM();){try{t.h.call(t.g)}catch(n){iM(n)}var e=qC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}kg=!1}function pd(t,e){it.call(this),this.h=t||1,this.g=e||W,this.j=Et(this.lb,this),this.l=Date.now()}ft(pd,it);O=pd.prototype;O.ca=!1;O.R=null;O.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ct(this,"tick"),this.ca&&(A0(this),this.start()))}};O.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function A0(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}O.M=function(){pd.X.M.call(this),A0(this),delete this.g};function P0(t,e,n){if(typeof t=="function")n&&(t=Et(t,n));else if(t&&typeof t.handleEvent=="function")t=Et(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:W.setTimeout(t,e||0)}function QC(t){t.g=P0(()=>{t.g=null,t.i&&(t.i=!1,QC(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class oM extends fs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:QC(this)}M(){super.M(),this.g&&(W.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function al(t){fs.call(this),this.h=t,this.g={}}ft(al,fs);var ew=[];function YC(t,e,n,i){Array.isArray(n)||(n&&(ew[0]=n.toString()),n=ew);for(var s=0;s<n.length;s++){var r=VC(e,n[s],i||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function XC(t){b0(t.g,function(e,n){this.g.hasOwnProperty(n)&&T0(e)},t),t.g={}}al.prototype.M=function(){al.X.M.call(this),XC(this)};al.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function gd(){this.g=!0}gd.prototype.Aa=function(){this.g=!1};function aM(t,e,n,i,s,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function lM(t,e,n,i,s,r,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+n+`
`+r+" "+o})}function Rr(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+uM(t,n)+(i?" "+i:"")})}function cM(t,e){t.info(function(){return"TIMEOUT: "+e})}gd.prototype.info=function(){};function uM(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return R0(n)}catch{return e}}var lr={},tw=null;function md(){return tw=tw||new it}lr.Pa="serverreachability";function JC(t){xt.call(this,lr.Pa,t)}ft(JC,xt);function ll(t){const e=md();ct(e,new JC(e))}lr.STAT_EVENT="statevent";function ZC(t,e){xt.call(this,lr.STAT_EVENT,t),this.stat=e}ft(ZC,xt);function Nt(t){const e=md();ct(e,new ZC(e,t))}lr.Qa="timingevent";function eb(t,e){xt.call(this,lr.Qa,t),this.size=e}ft(eb,xt);function Wl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return W.setTimeout(function(){t()},e)}var yd={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},tb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function D0(){}D0.prototype.h=null;function nw(t){return t.h||(t.h=t.i())}function nb(){}var Hl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function M0(){xt.call(this,"d")}ft(M0,xt);function O0(){xt.call(this,"c")}ft(O0,xt);var Tg;function _d(){}ft(_d,D0);_d.prototype.g=function(){return new XMLHttpRequest};_d.prototype.i=function(){return{}};Tg=new _d;function ql(t,e,n,i){this.l=t,this.j=e,this.m=n,this.U=i||1,this.S=new al(this),this.O=hM,t=Eg?125:void 0,this.T=new pd(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ib}function ib(){this.i=null,this.g="",this.h=!1}var hM=45e3,Ig={},ih={};O=ql.prototype;O.setTimeout=function(t){this.O=t};function Ng(t,e,n){t.K=1,t.v=wd(hi(e)),t.s=n,t.P=!0,sb(t,null)}function sb(t,e){t.F=Date.now(),Kl(t),t.A=hi(t.v);var n=t.A,i=t.U;Array.isArray(i)||(i=[String(i)]),db(n.i,"t",i),t.C=0,n=t.l.H,t.h=new ib,t.g=Db(t.l,n?e:null,!t.s),0<t.N&&(t.L=new oM(Et(t.La,t,t.g),t.N)),YC(t.S,t.g,"readystatechange",t.ib),e=t.H?UC(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),ll(),aM(t.j,t.u,t.A,t.m,t.U,t.s)}O.ib=function(t){t=t.target;const e=this.L;e&&ei(t)==3?e.l():this.La(t)};O.La=function(t){try{if(t==this.g)e:{const u=ei(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>u)&&(u!=3||Eg||this.g&&(this.h.h||this.g.fa()||ow(this.g)))){this.I||u!=4||e==7||(e==8||0>=h?ll(3):ll(2)),vd(this);var n=this.g.aa();this.Y=n;t:if(rb(this)){var i=ow(this.g);t="";var s=i.length,r=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ns(this),ka(this);var o="";break t}this.h.i=new W.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,lM(this.j,this.u,this.A,this.m,this.U,u,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!th(a)){var c=a;break t}}c=null}if(n=c)Rr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rg(this,n);else{this.i=!1,this.o=3,Nt(12),Ns(this),ka(this);break e}}this.P?(ob(this,u,o),Eg&&this.i&&u==3&&(YC(this.S,this.T,"tick",this.hb),this.T.start())):(Rr(this.j,this.m,o,null),Rg(this,o)),u==4&&Ns(this),this.i&&!this.I&&(u==4?Nb(this.l,this):(this.i=!1,Kl(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Nt(12)):(this.o=0,Nt(13)),Ns(this),ka(this)}}}catch{}finally{}};function rb(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function ob(t,e,n){let i=!0,s;for(;!t.I&&t.C<n.length;)if(s=dM(t,n),s==ih){e==4&&(t.o=4,Nt(14),i=!1),Rr(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Ig){t.o=4,Nt(15),Rr(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Rr(t.j,t.m,s,null),Rg(t,s);rb(t)&&s!=ih&&s!=Ig&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Nt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),B0(e),e.K=!0,Nt(11))):(Rr(t.j,t.m,n,"[Invalid Chunked Response]"),Ns(t),ka(t))}O.hb=function(){if(this.g){var t=ei(this.g),e=this.g.fa();this.C<e.length&&(vd(this),ob(this,t,e),this.i&&t!=4&&Kl(this))}};function dM(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?ih:(n=Number(e.substring(n,i)),isNaN(n)?Ig:(i+=1,i+n>e.length?ih:(e=e.substr(i,n),t.C=i+n,e)))}O.cancel=function(){this.I=!0,Ns(this)};function Kl(t){t.V=Date.now()+t.O,ab(t,t.O)}function ab(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Wl(Et(t.gb,t),e)}function vd(t){t.B&&(W.clearTimeout(t.B),t.B=null)}O.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(cM(this.j,this.A),this.K!=2&&(ll(),Nt(17)),Ns(this),this.o=2,ka(this)):ab(this,this.V-t)};function ka(t){t.l.G==0||t.I||Nb(t.l,t)}function Ns(t){vd(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,A0(t.T),XC(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Rg(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Ag(n.h,t))){if(!t.J&&Ag(n.h,t)&&n.G==3){try{var i=n.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)oh(n),Sd(n);else break e;V0(n),Nt(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=Wl(Et(n.cb,n),6e3));if(1>=gb(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Rs(n,11)}else if((t.J||n.g==t)&&oh(n),!th(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const u=c[3];u!=null&&(n.ma=u,n.j.info("VER="+n.ma));const h=c[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.J=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var r=i.h;r.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(L0(r,r.h),r.h=null))}if(i.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.za=g,Se(i.F,i.D,g))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),i=n;var o=t;if(i.sa=Pb(i,i.H?i.ka:null,i.V),o.J){mb(i.h,o);var a=o,l=i.J;l&&a.setTimeout(l),a.B&&(vd(a),Kl(a)),i.g=o}else Tb(i);0<n.i.length&&Cd(n)}else c[0]!="stop"&&c[0]!="close"||Rs(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Rs(n,7):z0(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}ll(4)}catch{}}function fM(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(ud(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function pM(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ud(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function lb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(ud(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=pM(t),i=fM(t),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],n&&n[r],t)}var cb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gM(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Os(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Os){this.h=e!==void 0?e:t.h,sh(this,t.j),this.s=t.s,this.g=t.g,rh(this,t.m),this.l=t.l,e=t.i;var n=new cl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),iw(this,n),this.o=t.o}else t&&(n=String(t).match(cb))?(this.h=!!e,sh(this,n[1]||"",!0),this.s=ua(n[2]||""),this.g=ua(n[3]||"",!0),rh(this,n[4]),this.l=ua(n[5]||"",!0),iw(this,n[6]||"",!0),this.o=ua(n[7]||"")):(this.h=!!e,this.i=new cl(null,this.h))}Os.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ha(e,sw,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ha(e,sw,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ha(n,n.charAt(0)=="/"?_M:yM,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ha(n,wM)),t.join("")};function hi(t){return new Os(t)}function sh(t,e,n){t.j=n?ua(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function rh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function iw(t,e,n){e instanceof cl?(t.i=e,EM(t.i,t.h)):(n||(e=ha(e,vM)),t.i=new cl(e,t.h))}function Se(t,e,n){t.i.set(e,n)}function wd(t){return Se(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ua(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ha(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,mM),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function mM(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var sw=/[#\/\?@]/g,yM=/[#\?:]/g,_M=/[#\?]/g,vM=/[#\?@]/g,wM=/#/g;function cl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ps(t){t.g||(t.g=new Map,t.h=0,t.i&&gM(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}O=cl.prototype;O.add=function(t,e){ps(this),this.i=null,t=Ro(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function ub(t,e){ps(t),e=Ro(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function hb(t,e){return ps(t),e=Ro(t,e),t.g.has(e)}O.forEach=function(t,e){ps(this),this.g.forEach(function(n,i){n.forEach(function(s){t.call(e,s,i,this)},this)},this)};O.oa=function(){ps(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let r=0;r<s.length;r++)n.push(e[i])}return n};O.W=function(t){ps(this);let e=[];if(typeof t=="string")hb(this,t)&&(e=e.concat(this.g.get(Ro(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};O.set=function(t,e){return ps(this),this.i=null,t=Ro(this,t),hb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};O.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function db(t,e,n){ub(t,e),0<n.length&&(t.i=null,t.g.set(Ro(t,e),S0(n)),t.h+=n.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const r=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var s=r;o[i]!==""&&(s+="="+encodeURIComponent(String(o[i]))),t.push(s)}}return this.i=t.join("&")};function Ro(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function EM(t,e){e&&!t.j&&(ps(t),t.i=null,t.g.forEach(function(n,i){var s=i.toLowerCase();i!=s&&(ub(this,i),db(this,s,n))},t)),t.j=e}var xM=class{constructor(t,e){this.h=t,this.g=e}};function fb(t){this.l=t||SM,W.PerformanceNavigationTiming?(t=W.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(W.g&&W.g.Ga&&W.g.Ga()&&W.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var SM=10;function pb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function gb(t){return t.h?1:t.g?t.g.size:0}function Ag(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function L0(t,e){t.g?t.g.add(e):t.h=e}function mb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}fb.prototype.cancel=function(){if(this.i=yb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function yb(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return S0(t.i)}function F0(){}F0.prototype.stringify=function(t){return W.JSON.stringify(t,void 0)};F0.prototype.parse=function(t){return W.JSON.parse(t,void 0)};function CM(){this.g=new F0}function bM(t,e,n){const i=n||"";try{lb(t,function(s,r){let o=s;Bl(s)&&(o=R0(s)),e.push(i+r+"="+encodeURIComponent(o))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function kM(t,e){const n=new gd;if(W.Image){const i=new Image;i.onload=Ac(Dc,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Ac(Dc,n,i,"TestLoadImage: error",!1,e),i.onabort=Ac(Dc,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Ac(Dc,n,i,"TestLoadImage: timeout",!1,e),W.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Dc(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function Gl(t){this.l=t.ac||null,this.j=t.jb||!1}ft(Gl,D0);Gl.prototype.g=function(){return new Ed(this.l,this.j)};Gl.prototype.i=function(t){return function(){return t}}({});function Ed(t,e){it.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=$0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ft(Ed,it);var $0=0;O=Ed.prototype;O.open=function(t,e){if(this.readyState!=$0)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ul(this)};O.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||W).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ql(this)),this.readyState=$0};O.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof W.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_b(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function _b(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}O.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ql(this):ul(this),this.readyState==3&&_b(this)}};O.Va=function(t){this.g&&(this.response=this.responseText=t,Ql(this))};O.Ua=function(t){this.g&&(this.response=t,Ql(this))};O.ga=function(){this.g&&Ql(this)};function Ql(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ul(t)}O.setRequestHeader=function(t,e){this.v.append(t,e)};O.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ul(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var TM=W.JSON.parse;function Pe(t){it.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vb,this.K=this.L=!1}ft(Pe,it);var vb="",IM=/^https?$/i,NM=["POST","PUT"];O=Pe.prototype;O.Ka=function(t){this.L=t};O.da=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Tg.g(),this.C=this.u?nw(this.u):nw(Tg),this.g.onreadystatechange=Et(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(r){rw(this,r);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const r of i.keys())n.set(r,i.get(r));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),s=W.FormData&&t instanceof W.FormData,!(0<=OC(NM,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xb(this),0<this.B&&((this.K=RM(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Et(this.qa,this)):this.A=P0(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){rw(this,r)}};function RM(t){return oo&&KD()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}O.qa=function(){typeof x0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ct(this,"timeout"),this.abort(8))};function rw(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,wb(t),xd(t)}function wb(t){t.D||(t.D=!0,ct(t,"complete"),ct(t,"error"))}O.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ct(this,"complete"),ct(this,"abort"),xd(this))};O.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xd(this,!0)),Pe.X.M.call(this)};O.Ha=function(){this.s||(this.F||this.v||this.l?Eb(this):this.fb())};O.fb=function(){Eb(this)};function Eb(t){if(t.h&&typeof x0<"u"&&(!t.C[1]||ei(t)!=4||t.aa()!=2)){if(t.v&&ei(t)==4)P0(t.Ha,0,t);else if(ct(t,"readystatechange"),ei(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=a===0){var s=String(t.H).match(cb)[1]||null;if(!s&&W.self&&W.self.location){var r=W.self.location.protocol;s=r.substr(0,r.length-1)}i=!IM.test(s?s.toLowerCase():"")}n=i}if(n)ct(t,"complete"),ct(t,"success");else{t.m=6;try{var o=2<ei(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",wb(t)}}finally{xd(t)}}}}function xd(t,e){if(t.g){xb(t);const n=t.g,i=t.C[0]?eh:null;t.g=null,t.C=null,e||ct(t,"ready");try{n.onreadystatechange=i}catch{}}}function xb(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(W.clearTimeout(t.A),t.A=null)}function ei(t){return t.g?t.g.readyState:0}O.aa=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}};O.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),TM(e)}};function ow(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case vb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}O.Ea=function(){return this.m};O.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Sb(t){let e="";return b0(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function U0(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Sb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Se(t,e,n))}function Go(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Cb(t){this.Ca=0,this.i=[],this.j=new gd,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Go("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Go("baseRetryDelayMs",5e3,t),this.bb=Go("retryDelaySeedMs",1e4,t),this.$a=Go("forwardChannelMaxRetries",2,t),this.ta=Go("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new fb(t&&t.concurrentRequestLimit),this.Fa=new CM,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}O=Cb.prototype;O.ma=8;O.G=1;function z0(t){if(bb(t),t.G==3){var e=t.U++,n=hi(t.F);Se(n,"SID",t.I),Se(n,"RID",e),Se(n,"TYPE","terminate"),Yl(t,n),e=new ql(t,t.j,e,void 0),e.K=2,e.v=wd(hi(n)),n=!1,W.navigator&&W.navigator.sendBeacon&&(n=W.navigator.sendBeacon(e.v.toString(),"")),!n&&W.Image&&(new Image().src=e.v,n=!0),n||(e.g=Db(e.l,null),e.g.da(e.v)),e.F=Date.now(),Kl(e)}Ab(t)}function Sd(t){t.g&&(B0(t),t.g.cancel(),t.g=null)}function bb(t){Sd(t),t.u&&(W.clearTimeout(t.u),t.u=null),oh(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&W.clearTimeout(t.m),t.m=null)}function Cd(t){pb(t.h)||t.m||(t.m=!0,KC(t.Ja,t),t.C=0)}function AM(t,e){return gb(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Wl(Et(t.Ja,t,e),Rb(t,t.C)),t.C++,!0)}O.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new ql(this,this.j,t,void 0);let r=this.s;if(this.S&&(r?(r=UC(r),zC(r,this.S)):r=this.S),this.o!==null||this.N||(s.H=r,r=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var i=this.i[n];if("__data__"in i.g&&(i=i.g.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=kb(this,s,e),n=hi(this.F),Se(n,"RID",t),Se(n,"CVER",22),this.D&&Se(n,"X-HTTP-Session-Id",this.D),Yl(this,n),r&&(this.N?e="headers="+encodeURIComponent(String(Sb(r)))+"&"+e:this.o&&U0(n,this.o,r)),L0(this.h,s),this.Ya&&Se(n,"TYPE","init"),this.O?(Se(n,"$req",e),Se(n,"SID","null"),s.Z=!0,Ng(s,n,null)):Ng(s,n,e),this.G=2}}else this.G==3&&(t?aw(this,t):this.i.length==0||pb(this.h)||aw(this))};function aw(t,e){var n;e?n=e.m:n=t.U++;const i=hi(t.F);Se(i,"SID",t.I),Se(i,"RID",n),Se(i,"AID",t.T),Yl(t,i),t.o&&t.s&&U0(i,t.o,t.s),n=new ql(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=kb(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),L0(t.h,n),Ng(n,i,e)}function Yl(t,e){t.ia&&b0(t.ia,function(n,i){Se(e,i,n)}),t.l&&lb({},function(n,i){Se(e,i,n)})}function kb(t,e,n){n=Math.min(t.i.length,n);var i=t.l?Et(t.l.Ra,t.l,t):null;e:{var s=t.i;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=s[0].h,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<n;l++){let c=s[l].h;const u=s[l].g;if(c-=r,0>c)r=Math.max(0,s[l].h-100),a=!1;else try{bM(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,i}function Tb(t){t.g||t.u||(t.Z=1,KC(t.Ia,t),t.A=0)}function V0(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Wl(Et(t.Ia,t),Rb(t,t.A)),t.A++,!0)}O.Ia=function(){if(this.u=null,Ib(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Wl(Et(this.eb,this),t)}};O.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Nt(10),Sd(this),Ib(this))};function B0(t){t.B!=null&&(W.clearTimeout(t.B),t.B=null)}function Ib(t){t.g=new ql(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=hi(t.sa);Se(e,"RID","rpc"),Se(e,"SID",t.I),Se(e,"CI",t.L?"0":"1"),Se(e,"AID",t.T),Se(e,"TYPE","xmlhttp"),Yl(t,e),t.o&&t.s&&U0(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=wd(hi(e)),n.s=null,n.P=!0,sb(n,t)}O.cb=function(){this.v!=null&&(this.v=null,Sd(this),V0(this),Nt(19))};function oh(t){t.v!=null&&(W.clearTimeout(t.v),t.v=null)}function Nb(t,e){var n=null;if(t.g==e){oh(t),B0(t),t.g=null;var i=2}else if(Ag(t.h,e))n=e.D,mb(t.h,e),i=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;i=md(),ct(i,new eb(i,n)),Cd(t)}else Tb(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(i==1&&AM(t,e)||i==2&&V0(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:Rs(t,5);break;case 4:Rs(t,10);break;case 3:Rs(t,6);break;default:Rs(t,2)}}}function Rb(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Rs(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var i=Et(t.kb,t);n||(n=new Os("//www.google.com/images/cleardot.gif"),W.location&&W.location.protocol=="http"||sh(n,"https"),wd(n)),kM(n.toString(),i)}else Nt(2);t.G=0,t.l&&t.l.va(e),Ab(t),bb(t)}O.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function Ab(t){if(t.G=0,t.la=[],t.l){const e=yb(t.h);(e.length!=0||t.i.length!=0)&&(Yv(t.la,e),Yv(t.la,t.i),t.h.i.length=0,S0(t.i),t.i.length=0),t.l.ua()}}function Pb(t,e,n){var i=n instanceof Os?hi(n):new Os(n,void 0);if(i.g!="")e&&(i.g=e+"."+i.g),rh(i,i.m);else{var s=W.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new Os(null,void 0);i&&sh(r,i),e&&(r.g=e),s&&rh(r,s),n&&(r.l=n),i=r}return n=t.D,e=t.za,n&&e&&Se(i,n,e),Se(i,"VER",t.ma),Yl(t,i),i}function Db(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new Pe(new Gl({jb:!0})):new Pe(t.ra),e.Ka(t.H),e}function Mb(){}O=Mb.prototype;O.xa=function(){};O.wa=function(){};O.va=function(){};O.ua=function(){};O.Ra=function(){};function ah(){if(oo&&!(10<=Number(GD)))throw Error("Environmental error: no available transport.")}ah.prototype.g=function(t,e){return new Zt(t,e)};function Zt(t,e){it.call(this),this.g=new Cb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!th(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!th(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ao(this)}ft(Zt,it);Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Nt(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=Pb(t,null,t.V),Cd(t)};Zt.prototype.close=function(){z0(this.g)};Zt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=R0(t),t=n);e.i.push(new xM(e.ab++,t)),e.G==3&&Cd(e)};Zt.prototype.M=function(){this.g.l=null,delete this.j,z0(this.g),delete this.g,Zt.X.M.call(this)};function Ob(t){M0.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ft(Ob,M0);function Lb(){O0.call(this),this.status=1}ft(Lb,O0);function Ao(t){this.g=t}ft(Ao,Mb);Ao.prototype.xa=function(){ct(this.g,"a")};Ao.prototype.wa=function(t){ct(this.g,new Ob(t))};Ao.prototype.va=function(t){ct(this.g,new Lb)};Ao.prototype.ua=function(){ct(this.g,"b")};ah.prototype.createWebChannel=ah.prototype.g;Zt.prototype.send=Zt.prototype.u;Zt.prototype.open=Zt.prototype.m;Zt.prototype.close=Zt.prototype.close;yd.NO_ERROR=0;yd.TIMEOUT=8;yd.HTTP_ERROR=6;tb.COMPLETE="complete";nb.EventType=Hl;Hl.OPEN="a";Hl.CLOSE="b";Hl.ERROR="c";Hl.MESSAGE="d";it.prototype.listen=it.prototype.N;Pe.prototype.listenOnce=Pe.prototype.O;Pe.prototype.getLastError=Pe.prototype.Oa;Pe.prototype.getLastErrorCode=Pe.prototype.Ea;Pe.prototype.getStatus=Pe.prototype.aa;Pe.prototype.getResponseJson=Pe.prototype.Sa;Pe.prototype.getResponseText=Pe.prototype.fa;Pe.prototype.send=Pe.prototype.da;Pe.prototype.setWithCredentials=Pe.prototype.Ka;var PM=function(){return new ah},DM=function(){return md()},qf=yd,MM=tb,OM=lr,lw={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},LM=Gl,Mc=nb,FM=Pe;const cw="@firebase/firestore";class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");let Po="9.15.0";const Xs=new cd("@firebase/firestore");function uw(){return Xs.logLevel}function F(t,...e){if(Xs.logLevel<=ie.DEBUG){const n=e.map(j0);Xs.debug(`Firestore (${Po}): ${t}`,...n)}}function di(t,...e){if(Xs.logLevel<=ie.ERROR){const n=e.map(j0);Xs.error(`Firestore (${Po}): ${t}`,...n)}}function Pg(t,...e){if(Xs.logLevel<=ie.WARN){const n=e.map(j0);Xs.warn(`Firestore (${Po}): ${t}`,...n)}}function j0(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}var e}function q(t="Unexpected state"){const e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+t;throw di(e),new Error(e)}function Ve(t,e){t||q()}function re(t,e){return t}const I={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class P extends yi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ls{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Fb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $M{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class UM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zM{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ls,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ls)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ve(typeof i.accessToken=="string"),new Fb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string"),new _t(e)}}class VM{constructor(e,n,i,s){this.h=e,this.l=n,this.m=i,this.g=s,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ve(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class BM{constructor(e,n,i,s){this.h=e,this.l=n,this.m=i,this.g=s}getToken(){return Promise.resolve(new VM(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WM{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const i=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.A;return this.A=r.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.T.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.T.getImmediate({optional:!0});r?s(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string"),this.A=n.token,new jM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}class $b{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=HM(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%e.length))}return i}}function ce(t,e){return t<e?-1:t>e?1:0}function ao(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}class nt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new P(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new P(I.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new P(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(I.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new nt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new nt(0,0))}static max(){return new H(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hl{constructor(e,n,i){n===void 0?n=0:n>e.length&&q(),i===void 0?i=e.length-n:i>e.length-n&&q(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return hl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=e.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends hl{construct(e,n,i){return new we(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new P(I.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const qM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends hl{construct(e,n,i){return new It(e,n,i)}static isValidIdentifier(e){return qM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new P(I.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new P(I.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new P(I.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new P(I.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}class ${constructor(e){this.path=e}static fromPath(e){return new $(we.fromString(e))}static fromName(e){return new $(we.fromString(e).popFirst(5))}static empty(){return new $(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new we(e.slice()))}}function KM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=H.fromTimestamp(i===1e9?new nt(n+1,0):new nt(n,i));return new is(s,$.empty(),e)}function GM(t){return new is(t.readTime,t.key,-1)}class is{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new is(H.min(),$.empty(),-1)}static max(){return new is(H.max(),$.empty(),-1)}}function QM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}const YM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function W0(t){if(t.code!==I.FAILED_PRECONDITION||t.message!==YM)throw t;F("LocalStore","Unexpectedly lost primary lease")}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,i)=>{n(e)})}static reject(e){return new N((n,i)=>{i(e)})}static waitFor(e){return new N((n,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(e){let n=N.resolve(!1);for(const i of e)n=n.next(s=>s?N.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new N((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(e,n){return new N((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function Xl(t){return t.name==="IndexedDbTransactionError"}class H0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>n.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}H0.at=-1;class JM{constructor(e,n,i,s,r,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class dl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}function hw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ub(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bd(t){return t==null}function lh(t){return t===0&&1/t==-1/0}function ZM(t){return typeof t=="number"&&Number.isInteger(t)&&!lh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new bt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const eO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(t){if(Ve(!!t),typeof t=="string"){let e=0;const n=eO.exec(t);if(Ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lo(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}function zb(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Vb(t){const e=t.mapValue.fields.__previous_value__;return zb(e)?Vb(e):e}function fl(t){const e=ss(t.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}const Oc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Js(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zb(t)?4:tO(t)?9007199254740991:10:q()}function jn(t,e){if(t===e)return!0;const n=Js(t);if(n!==Js(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fl(t).isEqual(fl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=ss(i.timestampValue),o=ss(s.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return lo(i.bytesValue).isEqual(lo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return $e(i.geoPointValue.latitude)===$e(s.geoPointValue.latitude)&&$e(i.geoPointValue.longitude)===$e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return $e(i.integerValue)===$e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=$e(i.doubleValue),o=$e(s.doubleValue);return r===o?lh(r)===lh(o):isNaN(r)&&isNaN(o)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:return function(i,s){const r=i.mapValue.fields||{},o=s.mapValue.fields||{};if(hw(r)!==hw(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(o[a]===void 0||!jn(r[a],o[a])))return!1;return!0}(t,e);default:return q()}}function pl(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=Js(t),i=Js(e);if(n!==i)return ce(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,r){const o=$e(s.integerValue||s.doubleValue),a=$e(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return dw(t.timestampValue,e.timestampValue);case 4:return dw(fl(t),fl(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(s,r){const o=lo(s),a=lo(r);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,r){const o=s.split("/"),a=r.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ce(o[l],a[l]);if(c!==0)return c}return ce(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,r){const o=ce($e(s.latitude),$e(r.latitude));return o!==0?o:ce($e(s.longitude),$e(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,r){const o=s.values||[],a=r.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=co(o[l],a[l]);if(c)return c}return ce(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===Oc.mapValue&&r===Oc.mapValue)return 0;if(s===Oc.mapValue)return 1;if(r===Oc.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=r.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=ce(a[u],c[u]);if(h!==0)return h;const d=co(o[a[u]],l[c[u]]);if(d!==0)return d}return ce(a.length,c.length)}(t.mapValue,e.mapValue);default:throw q()}}function dw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=ss(t),i=ss(e),s=ce(n.seconds,i.seconds);return s!==0?s:ce(n.nanos,i.nanos)}function uo(t){return Dg(t)}function Dg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const s=ss(i);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?lo(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,$.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let s="[",r=!0;for(const o of i.values||[])r?r=!1:s+=",",s+=Dg(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",o=!0;for(const a of s)o?o=!1:r+=",",r+=`${a}:${Dg(i.fields[a])}`;return r+"}"}(t.mapValue):q();var e,n}function fw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mg(t){return!!t&&"integerValue"in t}function q0(t){return!!t&&"arrayValue"in t}function pw(t){return!!t&&"nullValue"in t}function gw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kf(t){return!!t&&"mapValue"in t}function Ta(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Jl(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Ta(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ta(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class ch{constructor(e,n){this.position=e,this.inclusive=n}}function mw(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(r.field.isKeyField()?i=$.comparator($.fromName(o.referenceValue),n.key):i=co(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function yw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}class Bb{}class ze extends Bb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sO(e,n,i):n==="array-contains"?new aO(e,i):n==="in"?new lO(e,i):n==="not-in"?new cO(e,i):n==="array-contains-any"?new uO(e,i):new ze(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new rO(e,i):new oO(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&Js(this.value)===Js(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bn extends Bb{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new bn(e,n)}matches(e){return jb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function jb(t){return t.op==="and"}function nO(t){return iO(t)&&jb(t)}function iO(t){for(const e of t.filters)if(e instanceof bn)return!1;return!0}function Wb(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+uo(t.value);{const e=t.filters.map(n=>Wb(n)).join(",");return`${t.op}(${e})`}}function Hb(t,e){return t instanceof ze?function(n,i){return i instanceof ze&&n.op===i.op&&n.field.isEqual(i.field)&&jn(n.value,i.value)}(t,e):t instanceof bn?function(n,i){return i instanceof bn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,r,o)=>s&&Hb(r,i.filters[o]),!0):!1}(t,e):void q()}function qb(t){return t instanceof ze?function(e){return`${e.field.canonicalString()} ${e.op} ${uo(e.value)}`}(t):t instanceof bn?function(e){return e.op.toString()+" {"+e.getFilters().map(qb).join(" ,")+"}"}(t):"Filter"}class sO extends ze{constructor(e,n,i){super(e,n,i),this.key=$.fromName(i.referenceValue)}matches(e){const n=$.comparator(e.key,this.key);return this.matchesComparison(n)}}class rO extends ze{constructor(e,n){super(e,"in",n),this.keys=Kb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oO extends ze{constructor(e,n){super(e,"not-in",n),this.keys=Kb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Kb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>$.fromName(i.referenceValue))}class aO extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return q0(n)&&pl(n.arrayValue,this.value)}}class lO extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pl(this.value.arrayValue,n)}}class cO extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!pl(this.value.arrayValue,n)}}class uO extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!q0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>pl(this.value.arrayValue,i))}}class zr{constructor(e,n="asc"){this.field=e,this.dir=n}}function hO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class st{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lc(this.root,e,this.comparator,!0)}}class Lc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??ot.RED,this.left=s??ot.EMPTY,this.right=r??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new ot(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ot.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();const e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(t,e,n,i,s){return this}insert(t,e,n){return new ot(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ke{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _w(this.data.getIterator())}getIteratorFrom(e){return new _w(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class _w{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fs{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new Fs([])}unionWith(e){let n=new Ke(It.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Fs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,i)=>n.isEqual(i))}}class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Kf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ta(n)}setAll(e){let n=It.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=Ta(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());Kf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];Kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Jl(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Ln(Ta(this.value))}}class wt{constructor(e,n,i,s,r,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,H.min(),H.min(),H.min(),Ln.empty(),0)}static newFoundDocument(e,n,i,s){return new wt(e,1,n,H.min(),i,s,0)}static newNoDocument(e,n){return new wt(e,2,n,H.min(),H.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,H.min(),H.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(H.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class dO{constructor(e,n=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.ft=null}}function vw(t,e=null,n=[],i=[],s=null,r=null,o=null){return new dO(t,e,n,i,s,r,o)}function K0(t){const e=re(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Wb(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>uo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>uo(i)).join(",")),e.ft=n}return e.ft}function G0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yw(t.startAt,e.startAt)&&yw(t.endAt,e.endAt)}function Og(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Do{constructor(e,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}}function fO(t,e,n,i,s,r,o,a){return new Do(t,e,n,i,s,r,o,a)}function kd(t){return new Do(t)}function ww(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Q0(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Td(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Gb(t){return t.collectionGroup!==null}function Vr(t){const e=re(t);if(e.dt===null){e.dt=[];const n=Td(e),i=Q0(e);if(n!==null&&i===null)n.isKeyField()||e.dt.push(new zr(n)),e.dt.push(new zr(It.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.dt.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new zr(It.keyField(),r))}}}return e.dt}function fi(t){const e=re(t);if(!e._t)if(e.limitType==="F")e._t=vw(e.path,e.collectionGroup,Vr(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const r of Vr(e)){const o=r.dir==="desc"?"asc":"desc";n.push(new zr(r.field,o))}const i=e.endAt?new ch(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ch(e.startAt.position,e.startAt.inclusive):null;e._t=vw(e.path,e.collectionGroup,n,e.filters,e.limit,i,s)}return e._t}function Lg(t,e){e.getFirstInequalityField(),Td(t);const n=t.filters.concat([e]);return new Do(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uh(t,e,n){return new Do(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Id(t,e){return G0(fi(t),fi(e))&&t.limitType===e.limitType}function Qb(t){return`${K0(fi(t))}|lt:${t.limitType}`}function Fg(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>qb(i)).join(", ")}]`),bd(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>uo(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>uo(i)).join(",")),`Target(${n})`}(fi(t))}; limitType=${t.limitType})`}function Y0(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):$.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of Vr(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,r,o){const a=mw(s,r,o);return s.inclusive?a<=0:a<0}(n.startAt,Vr(n),i)||n.endAt&&!function(s,r,o){const a=mw(s,r,o);return s.inclusive?a>=0:a>0}(n.endAt,Vr(n),i))}(t,e)}function pO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Yb(t){return(e,n)=>{let i=!1;for(const s of Vr(t)){const r=gO(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function gO(t,e,n){const i=t.field.isKeyField()?$.comparator(e.key,n.key):function(s,r,o){const a=r.data.field(s),l=o.data.field(s);return a!==null&&l!==null?co(a,l):q()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return q()}}function Xb(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function Jb(t){return{integerValue:""+t}}function mO(t,e){return ZM(e)?Jb(e):Xb(t,e)}class Nd{constructor(){this._=void 0}}function yO(t,e,n){return t instanceof $g?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(r.fields.__previous_value__=s),{mapValue:r}}(n,e):t instanceof hh?Zb(t,e):t instanceof dh?ek(t,e):function(i,s){const r=vO(i,s),o=Ew(r)+Ew(i.gt);return Mg(r)&&Mg(i.gt)?Jb(o):Xb(i.yt,o)}(t,e)}function _O(t,e,n){return t instanceof hh?Zb(t,e):t instanceof dh?ek(t,e):n}function vO(t,e){return t instanceof Ug?Mg(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class $g extends Nd{}class hh extends Nd{constructor(e){super(),this.elements=e}}function Zb(t,e){const n=tk(e);for(const i of t.elements)n.some(s=>jn(s,i))||n.push(i);return{arrayValue:{values:n}}}class dh extends Nd{constructor(e){super(),this.elements=e}}function ek(t,e){let n=tk(e);for(const i of t.elements)n=n.filter(s=>!jn(s,i));return{arrayValue:{values:n}}}class Ug extends Nd{constructor(e,n){super(),this.yt=e,this.gt=n}}function Ew(t){return $e(t.integerValue||t.doubleValue)}function tk(t){return q0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wO(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof hh&&i instanceof hh||n instanceof dh&&i instanceof dh?ao(n.elements,i.elements,jn):n instanceof Ug&&i instanceof Ug?jn(n.gt,i.gt):n instanceof $g&&i instanceof $g}(t.transform,e.transform)}class $s{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $s}static exists(e){return new $s(void 0,e)}static updateTime(e){return new $s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function du(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class X0{}function nk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xO(t.key,$s.none()):new J0(t.key,t.data,$s.none());{const n=t.data,i=Ln.empty();let s=new Ke(It.comparator);for(let r of e.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Rd(t.key,i,new Fs(s.toArray()),$s.none())}}function EO(t,e,n){t instanceof J0?function(i,s,r){const o=i.value.clone(),a=Sw(i.fieldTransforms,s,r.transformResults);o.setAll(a),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Rd?function(i,s,r){if(!du(i.precondition,s))return void s.convertToUnknownDocument(r.version);const o=Sw(i.fieldTransforms,s,r.transformResults),a=s.data;a.setAll(ik(i)),a.setAll(o),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(t,e,n):function(i,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function Ia(t,e,n,i){return t instanceof J0?function(s,r,o,a){if(!du(s.precondition,r))return o;const l=s.value.clone(),c=Cw(s.fieldTransforms,a,r);return l.setAll(c),r.convertToFoundDocument(r.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof Rd?function(s,r,o,a){if(!du(s.precondition,r))return o;const l=Cw(s.fieldTransforms,a,r),c=r.data;return c.setAll(ik(s)),c.setAll(l),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(t,e,n,i):function(s,r,o){return du(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(t,e,n)}function xw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&ao(n,i,(s,r)=>wO(s,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class J0 extends X0{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rd extends X0{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function ik(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Sw(t,e,n){const i=new Map;Ve(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,_O(o,a,n[s]))}return i}function Cw(t,e,n){const i=new Map;for(const s of t){const r=s.transform,o=n.data.field(s.field);i.set(s.field,yO(r,o,e))}return i}class xO extends X0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class SO{constructor(e){this.count=e}}var Fe,J;function sk(t){if(t===void 0)return di("GRPC error has no .code"),I.UNKNOWN;switch(t){case Fe.OK:return I.OK;case Fe.CANCELLED:return I.CANCELLED;case Fe.UNKNOWN:return I.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return I.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return I.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return I.INTERNAL;case Fe.UNAVAILABLE:return I.UNAVAILABLE;case Fe.UNAUTHENTICATED:return I.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return I.INVALID_ARGUMENT;case Fe.NOT_FOUND:return I.NOT_FOUND;case Fe.ALREADY_EXISTS:return I.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return I.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return I.FAILED_PRECONDITION;case Fe.ABORTED:return I.ABORTED;case Fe.OUT_OF_RANGE:return I.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return I.UNIMPLEMENTED;case Fe.DATA_LOSS:return I.DATA_LOSS;default:return q()}}(J=Fe||(Fe={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";class Mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jl(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return Ub(this.inner)}size(){return this.innerSize}}const CO=new st($.comparator);function rs(){return CO}const rk=new st($.comparator);function da(...t){let e=rk;for(const n of t)e=e.insert(n.key,n);return e}function bO(t){let e=rk;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function As(){return Na()}function ok(){return Na()}function Na(){return new Mo(t=>t.toString(),(t,e)=>t.isEqual(e))}new st($.comparator);const kO=new Ke($.comparator);function te(...t){let e=kO;for(const n of t)e=e.add(n);return e}const TO=new Ke(ce);function ak(){return TO}class Ad{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Zl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ad(H.min(),s,ak(),rs(),te())}}class Zl{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Zl(i,n,te(),te(),te())}}class fu{constructor(e,n,i,s){this.It=e,this.removedTargetIds=n,this.key=i,this.Tt=s}}class lk{constructor(e,n){this.targetId=e,this.Et=n}}class ck{constructor(e,n,i=bt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class bw{constructor(){this.At=0,this.Rt=Tw(),this.bt=bt.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=te(),n=te(),i=te();return this.Rt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:q()}}),new Zl(this.bt,this.Pt,e,n,i)}xt(){this.vt=!1,this.Rt=Tw()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class IO{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=rs(),this.qt=kw(),this.Ut=new Ke(ce)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const i=this.Wt(n);switch(e.state){case 0:this.zt(n)&&i.Dt(e.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(e.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(i.Ft(),i.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),i.Dt(e.resumeToken));break;default:q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((i,s)=>{this.zt(s)&&n(s)})}Jt(e){const n=e.targetId,i=e.Et.count,s=this.Yt(n);if(s){const r=s.target;if(Og(r))if(i===0){const o=new $(r.path);this.Qt(n,o,wt.newNoDocument(o,H.min()))}else Ve(i===1);else this.Xt(n)!==i&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((r,o)=>{const a=this.Yt(o);if(a){if(r.current&&Og(a.target)){const l=new $(a.target.path);this.Lt.get(l)!==null||this.te(o,l)||this.Qt(o,l,wt.newNoDocument(l,e))}r.St&&(n.set(o,r.Ct()),r.xt())}});let i=te();this.qt.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Yt(l);return!c||c.purpose===2||(a=!1,!1)}),a&&(i=i.add(r))}),this.Lt.forEach((r,o)=>o.setReadTime(e));const s=new Ad(e,n,this.Ut,this.Lt,i);return this.Lt=rs(),this.qt=kw(),this.Ut=new Ke(ce),s}Gt(e,n){if(!this.zt(e))return;const i=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,i),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,i){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,n)?s.Nt(n,1):s.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),i&&(this.Lt=this.Lt.insert(n,i))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new bw,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new Ke(ce),this.qt=this.qt.insert(e,n)),n}zt(e){const n=this.Yt(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new bw),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function kw(){return new st($.comparator)}function Tw(){return new st($.comparator)}const NO=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),RO=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),AO=(()=>({and:"AND",or:"OR"}))();class PO{constructor(e,n){this.databaseId=e,this.wt=n}}function zg(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uk(t,e){return t.wt?e.toBase64():e.toUint8Array()}function Br(t){return Ve(!!t),H.fromTimestamp(function(e){const n=ss(e);return new nt(n.seconds,n.nanos)}(t))}function hk(t,e){return function(n){return new we(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function dk(t){const e=we.fromString(t);return Ve(mk(e)),e}function Gf(t,e){const n=dk(e);if(n.get(1)!==t.databaseId.projectId)throw new P(I.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new P(I.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(fk(n))}function Vg(t,e){return hk(t.databaseId,e)}function DO(t){const e=dk(t);return e.length===4?we.emptyPath():fk(e)}function Iw(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fk(t){return Ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function MO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(l,c){return l.wt?(Ve(c===void 0||typeof c=="string"),bt.fromBase64String(c||"")):(Ve(c===void 0||c instanceof Uint8Array),bt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?I.UNKNOWN:sk(l.code);return new P(c,l.message||"")}(o);n=new ck(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Gf(t,i.document.name),r=Br(i.document.updateTime),o=i.document.createTime?Br(i.document.createTime):H.min(),a=new Ln({mapValue:{fields:i.document.fields}}),l=wt.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new fu(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Gf(t,i.document),r=i.readTime?Br(i.readTime):H.min(),o=wt.newNoDocument(s,r),a=i.removedTargetIds||[];n=new fu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Gf(t,i.document),r=i.removedTargetIds||[];n=new fu([],r,s,null)}else{if(!("filter"in e))return q();{e.filter;const i=e.filter;i.targetId;const s=i.count||0,r=new SO(s),o=i.targetId;n=new lk(o,r)}}return n}function OO(t,e){return{documents:[Vg(t,e.path)]}}function LO(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Vg(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Vg(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(l){if(l.length!==0)return gk(bn.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const r=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:mr(u.field),direction:UO(u.dir)}}(c))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(l,c){return l.wt||bd(c)?c:{value:c}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function FO(t){let e=DO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ve(i===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=function(u){const h=pk(u);return h instanceof bn&&nO(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new zr(yr(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,bd(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,d=u.values||[];return new ch(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,d=u.values||[];return new ch(d,h)}(n.endAt)),fO(e,s,o,r,a,"F",l,c)}function $O(t,e){const n=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return q()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function pk(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=yr(e.unaryFilter.field);return ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=yr(e.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yr(e.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=yr(e.unaryFilter.field);return ze.create(r,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(t):t.fieldFilter!==void 0?function(e){return ze.create(yr(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return bn.create(e.compositeFilter.filters.map(n=>pk(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return q()}}(e.compositeFilter.op))}(t):q()}function UO(t){return NO[t]}function zO(t){return RO[t]}function VO(t){return AO[t]}function mr(t){return{fieldPath:t.canonicalString()}}function yr(t){return It.fromServerFormat(t.fieldPath)}function gk(t){return t instanceof ze?function(e){if(e.op==="=="){if(gw(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NAN"}};if(pw(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(gw(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NOT_NAN"}};if(pw(e.value))return{unaryFilter:{field:mr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mr(e.field),op:zO(e.op),value:e.value}}}(t):t instanceof bn?function(e){const n=e.getFilters().map(i=>gk(i));return n.length===1?n[0]:{compositeFilter:{op:VO(e.op),filters:n}}}(t):q()}function mk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class BO{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&EO(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ia(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ia(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ok();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=nk(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(H.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,i)=>xw(n,i))&&ao(this.baseMutations,e.baseMutations,(n,i)=>xw(n,i))}}class jO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Us{constructor(e,n,i,s,r=H.min(),o=H.min(),a=bt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class WO{constructor(e){this.ie=e}}function HO(t){const e=FO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uh(e,e.limit,"L"):e}class qO{constructor(){this.Je=new KO}addToCollectionParentIndex(e,n){return this.Je.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(is.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(is.min())}updateCollectionGroup(e,n,i){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class KO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Ke(we.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ke(we.comparator)).toArray()}}class ho{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ho(0)}static vn(){return new ho(-1)}}class GO{constructor(){this.changes=new Mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?N.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class YO{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&Ia(i.mutation,s,Fs.empty(),nt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,te()).next(()=>i))}getLocalViewOfDocuments(e,n,i=te()){const s=As();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let o=da();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=As();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,te()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,s){let r=rs();const o=Na(),a=Na();return n.forEach((l,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Rd)?r=r.insert(c.key,c):u!==void 0&&(o.set(c.key,u.mutation.getFieldMask()),Ia(u.mutation,c,u.mutation.getFieldMask(),nt.now()))}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new QO(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=Na();let s=new st((o,a)=>o-a),r=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Fs.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(s.get(a.batchId)||te()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=ok();u.forEach(d=>{if(!r.has(d)){const f=nk(n.get(d),i.get(d));f!==null&&h.set(d,f),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return N.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Gb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):N.resolve(As());let a=-1,l=r;return o.next(c=>N.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?N.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,te())).next(u=>({batchId:a,changes:bO(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(i=>{let s=da();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const s=n.collectionGroup;let r=da();return this.indexManager.getCollectionParents(e,s).next(o=>N.forEach(o,a=>{const l=function(c,u){return new Do(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,h)=>{r=r.insert(u,h)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,i){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,i).next(r=>(s=r,this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId))).next(r=>{r.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,wt.newInvalidDocument(c)))});let o=da();return s.forEach((a,l)=>{const c=r.get(a);c!==void 0&&Ia(c.mutation,l,Fs.empty(),nt.now()),Y0(n,l)&&(o=o.insert(a,l))}),o})}}class XO{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return N.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var i;return this.Zn.set(n.id,{id:(i=n).id,version:i.version,createTime:Br(i.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(i){return{name:i.name,query:HO(i.bundledQuery),readTime:Br(i.readTime)}}(n)),N.resolve()}}class JO{constructor(){this.overlays=new st($.comparator),this.es=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const i=As();return N.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.oe(e,n,r)}),N.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.es.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.es.delete(i)),N.resolve()}getOverlaysForCollection(e,n,i){const s=As(),r=n.length+1,o=new $(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return N.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new st((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=As(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=As(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return N.resolve(a)}oe(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(i.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new jO(n,i));let r=this.es.get(n);r===void 0&&(r=te(),this.es.set(n,r)),this.es.set(n,r.add(i.key))}}class Z0{constructor(){this.ns=new Ke(Qe.ss),this.rs=new Ke(Qe.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const i=new Qe(e,n);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.cs(new Qe(e,n))}hs(e,n){e.forEach(i=>this.removeReference(i,n))}ls(e){const n=new $(new we([])),i=new Qe(n,e),s=new Qe(n,e+1),r=[];return this.rs.forEachInRange([i,s],o=>{this.cs(o),r.push(o.key)}),r}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new $(new we([])),i=new Qe(n,e),s=new Qe(n,e+1);let r=te();return this.rs.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new Qe(e,0),i=this.ns.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qe{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return $.comparator(e.key,n.key)||ce(e._s,n._s)}static os(e,n){return ce(e._s,n._s)||$.comparator(e.key,n.key)}}class ZO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ke(Qe.ss)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new BO(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.gs=this.gs.add(new Qe(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ps(i),r=s<0?0:s;return N.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qe(n,0),s=new Qe(n,Number.POSITIVE_INFINITY),r=[];return this.gs.forEachInRange([i,s],o=>{const a=this.ys(o._s);r.push(a)}),N.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ke(ce);return n.forEach(s=>{const r=new Qe(s,0),o=new Qe(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([r,o],a=>{i=i.add(a._s)})}),N.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;$.isDocumentKey(r)||(r=r.child(""));const o=new Qe(new $(r),0);let a=new Ke(ce);return this.gs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l._s)),!0)},o),N.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(i=>{const s=this.ys(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ve(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.gs;return N.forEach(n.mutations,s=>{const r=new Qe(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,n){const i=new Qe(n,0),s=this.gs.firstAfterOrEqual(i);return N.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class eL{constructor(e){this.Es=e,this.docs=new st($.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.Es(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return N.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let i=rs();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():wt.newInvalidDocument(s))}),N.resolve(i)}getAllFromCollection(e,n,i){let s=rs();const r=new $(n.child("")),o=this.docs.getIteratorFrom(r);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||QM(GM(l),i)<=0||(s=s.insert(l.key,l.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,i,s){q()}As(e,n){return N.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new tL(this)}getSize(e){return N.resolve(this.size)}}class tL extends GO{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(i)}),N.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class nL{constructor(e){this.persistence=e,this.Rs=new Mo(n=>K0(n),G0),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Z0,this.targetCount=0,this.vs=ho.Pn()}forEachTarget(e,n){return this.Rs.forEach((i,s)=>n(s)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.bs&&(this.bs=n),N.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Dn(n),N.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Rs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),N.waitFor(r).next(()=>s)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const i=this.Rs.get(n)||null;return N.resolve(i)}addMatchingKeys(e,n,i){return this.Ps.us(n,i),N.resolve()}removeMatchingKeys(e,n,i){this.Ps.hs(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),N.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),N.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Ps.ds(n);return N.resolve(i)}containsKey(e,n){return N.resolve(this.Ps.containsKey(n))}}class iL{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new H0(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new nL(this),this.indexManager=new qO,this.remoteDocumentCache=function(i){return new eL(i)}(i=>this.referenceDelegate.xs(i)),this.yt=new WO(n),this.Ns=new XO(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Vs[e.toKey()];return i||(i=new ZO(n,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);const s=new sL(this.Ss.next());return this.referenceDelegate.ks(),i(s).next(r=>this.referenceDelegate.Os(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ms(e,n){return N.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,n)))}}class sL extends XM{constructor(e){super(),this.currentSequenceNumber=e}}class ey{constructor(e){this.persistence=e,this.Fs=new Z0,this.$s=null}static Bs(e){return new ey(e)}get Ls(){if(this.$s)return this.$s;throw q()}addReference(e,n,i){return this.Fs.addReference(i,n),this.Ls.delete(i.toString()),N.resolve()}removeReference(e,n,i){return this.Fs.removeReference(i,n),this.Ls.add(i.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),N.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(s=>this.Ls.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.Ls.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ls,i=>{const s=$.fromPath(i);return this.qs(e,s).next(r=>{r||n.removeEntry(s,H.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(i=>{i?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return N.or([()=>N.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}class ty{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Si=i,this.Di=s}static Ci(e,n){let i=te(),s=te();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new ty(e,n.fromCache,i,s)}}class rL{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,i,s){return this.ki(e,n).next(r=>r||this.Oi(e,n,s,i)).next(r=>r||this.Mi(e,n))}ki(e,n){if(ww(n))return N.resolve(null);let i=fi(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=uh(n,null,"F"),i=fi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=te(...r);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.Fi(n,a);return this.$i(n,c,o,l.readTime)?this.ki(e,uh(n,null,"F")):this.Bi(e,c,n,l)}))})))}Oi(e,n,i,s){return ww(n)||s.isEqual(H.min())?this.Mi(e,n):this.Ni.getDocuments(e,i).next(r=>{const o=this.Fi(n,r);return this.$i(n,o,i,s)?this.Mi(e,n):(uw()<=ie.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fg(n)),this.Bi(e,o,n,KM(s,-1)))})}Fi(e,n){let i=new Ke(Yb(e));return n.forEach((s,r)=>{Y0(e,r)&&(i=i.add(r))}),i}$i(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Mi(e,n){return uw()<=ie.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Fg(n)),this.Ni.getDocumentsMatchingQuery(e,n,is.min())}Bi(e,n,i,s){return this.Ni.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}class oL{constructor(e,n,i,s){this.persistence=e,this.Li=n,this.yt=s,this.qi=new st(ce),this.Ui=new Mo(r=>K0(r),G0),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YO(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function aL(t,e,n,i){return new oL(t,e,n,i)}async function yk(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Qi(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=te();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}function _k(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function lL(t,e){const n=re(t),i=e.snapshotVersion;let s=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.qi;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Cs.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(r,u.addedDocuments,h)));let f=d.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.has(h)?f=f.withResumeToken(bt.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),s=s.insert(h,f),function(p,g,v){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,f,u)&&a.push(n.Cs.updateTargetData(r,f))});let l=rs(),c=te();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(cL(r,o,e.documentUpdates).next(u=>{l=u.Wi,c=u.zi})),!i.isEqual(H.min())){const u=n.Cs.getLastRemoteSnapshotVersion(r).next(h=>n.Cs.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return N.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.qi=s,r))}function cL(t,e,n){let i=te(),s=te();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let o=rs();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(H.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Wi:o,zi:s}})}function uL(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Cs.getTargetData(i,e).next(r=>r?(s=r,N.resolve(s)):n.Cs.allocateTargetId(i).next(o=>(s=new Us(e,o,0,i.currentSequenceNumber),n.Cs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.qi.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qi=n.qi.insert(i.targetId,i),n.Ui.set(e,i.targetId)),i})}async function Bg(t,e,n){const i=re(t),s=i.qi.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xl(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.qi=i.qi.remove(e),i.Ui.delete(s.target)}function Nw(t,e,n){const i=re(t);let s=H.min(),r=te();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=re(a),h=u.Ui.get(c);return h!==void 0?N.resolve(u.qi.get(h)):u.Cs.getTargetData(l,c)}(i,o,fi(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Li.getDocumentsMatchingQuery(o,e,n?s:H.min(),n?r:te())).next(a=>(hL(i,pO(e),a),{documents:a,Hi:r})))}function hL(t,e,n){let i=t.Ki.get(e)||H.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Ki.set(e,i)}class Rw{constructor(){this.activeTargetIds=ak()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dL{constructor(){this.Lr=new Rw,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,i){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Rw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fL{Ur(e){}shutdown(){}}class Aw{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}const pL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gL{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class mL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,i,s,r){const o=this.ho(e,n);F("RestConnection","Sending: ",o,i);const a={};return this.lo(a,s,r),this.fo(e,o,a,i).then(l=>(F("RestConnection","Received: ",l),l),l=>{throw Pg("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",i),l})}_o(e,n,i,s,r,o){return this.ao(e,n,i,s,r)}lo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Po,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}ho(e,n){const i=pL[e];return`${this.oo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,i,s){return new Promise((r,o)=>{const a=new FM;a.setWithCredentials(!0),a.listenOnce(MM.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case qf.NO_ERROR:const c=a.getResponseJson();F("Connection","XHR received:",JSON.stringify(c)),r(c);break;case qf.TIMEOUT:F("Connection",'RPC "'+e+'" timed out'),o(new P(I.DEADLINE_EXCEEDED,"Request time out"));break;case qf.HTTP_ERROR:const u=a.getStatus();if(F("Connection",'RPC "'+e+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const d=h==null?void 0:h.error;if(d&&d.status&&d.message){const f=function(p){const g=p.toLowerCase().replace(/_/g,"-");return Object.values(I).indexOf(g)>=0?g:I.UNKNOWN}(d.status);o(new P(f,d.message))}else o(new P(I.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new P(I.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{F("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(n,"POST",l,i,15)})}wo(e,n,i){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=PM(),o=DM(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new LM({})),this.lo(a.initMessageHeaders,n,i),a.encodeInitMessageHeaders=!0;const l=s.join("");F("Connection","Creating WebChannel: "+l,a);const c=r.createWebChannel(l,a);let u=!1,h=!1;const d=new gL({Hr:p=>{h?F("Connection","Not sending because WebChannel is closed:",p):(u||(F("Connection","Opening WebChannel transport."),c.open(),u=!0),F("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),f=(p,g,v)=>{p.listen(g,y=>{try{v(y)}catch(m){setTimeout(()=>{throw m},0)}})};return f(c,Mc.EventType.OPEN,()=>{h||F("Connection","WebChannel transport opened.")}),f(c,Mc.EventType.CLOSE,()=>{h||(h=!0,F("Connection","WebChannel transport closed"),d.io())}),f(c,Mc.EventType.ERROR,p=>{h||(h=!0,Pg("Connection","WebChannel transport errored:",p),d.io(new P(I.UNAVAILABLE,"The operation could not be completed")))}),f(c,Mc.EventType.MESSAGE,p=>{var g;if(!h){const v=p.data[0];Ve(!!v);const y=v,m=y.error||((g=y[0])===null||g===void 0?void 0:g.error);if(m){F("Connection","WebChannel received error:",m);const _=m.status;let w=function(x){const S=Fe[x];if(S!==void 0)return sk(S)}(_),E=m.message;w===void 0&&(w=I.INTERNAL,E="Unknown error status: "+_+" with message "+m.message),h=!0,d.io(new P(w,E)),c.close()}else F("Connection","WebChannel received:",v),d.ro(v)}}),f(o,OM.STAT_EVENT,p=>{p.stat===lw.PROXY?F("Connection","Detected buffering proxy"):p.stat===lw.NOPROXY&&F("Connection","Detected no buffering proxy")}),setTimeout(()=>{d.so()},0),d}}function Qf(){return typeof document<"u"?document:null}function Pd(t){return new PO(t,!0)}class vk{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Hs=e,this.timerId=n,this.mo=i,this.yo=s,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),s=Math.max(0,n-i);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yL{constructor(e,n,i,s,r,o,a,l){this.Hs=e,this.vo=i,this.Vo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new vk(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===I.RESOURCE_EXHAUSTED?(di(n.toString()),di("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===I.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.So===n&&this.Go(i,s)},i=>{e(()=>{const s=new P(I.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(s)})})}Go(e,n){const i=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{i(()=>this.Qo(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _L extends yL{constructor(e,n,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.yt=r}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=MO(this.yt,e),i=function(s){if(!("targetChange"in s))return H.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?H.min():r.readTime?Br(r.readTime):H.min()}(e);return this.listener.Wo(n,i)}zo(e){const n={};n.database=Iw(this.yt),n.addTarget=function(s,r){let o;const a=r.target;return o=Og(a)?{documents:OO(s,a)}:{query:LO(s,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0?o.resumeToken=uk(s,r.resumeToken):r.snapshotVersion.compareTo(H.min())>0&&(o.readTime=zg(s,r.snapshotVersion.toTimestamp())),o}(this.yt,e);const i=$O(this.yt,e);i&&(n.labels=i),this.Bo(n)}Ho(e){const n={};n.database=Iw(this.yt),n.removeTarget=e,this.Bo(n)}}class vL extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.yt=s,this.nu=!1}su(){if(this.nu)throw new P(I.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.ao(e,n,i,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(I.UNKNOWN,s.toString())})}_o(e,n,i,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection._o(e,n,i,r,o,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===I.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new P(I.UNKNOWN,r.toString())})}terminate(){this.nu=!0}}class wL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(di(n),this.ou=!1):F("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}class EL{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=r,this.mu.Ur(o=>{i.enqueueAndForget(async()=>{tc(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=re(a);l._u.add(4),await ec(l),l.gu.set("Unknown"),l._u.delete(4),await Dd(l)}(this))})}),this.gu=new wL(i,s)}}async function Dd(t){if(tc(t))for(const e of t.wu)await e(!0)}async function ec(t){for(const e of t.wu)await e(!1)}function wk(t,e){const n=re(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),sy(n)?iy(n):Oo(n).ko()&&ny(n,e))}function Ek(t,e){const n=re(t),i=Oo(n);n.du.delete(e),i.ko()&&xk(n,e),n.du.size===0&&(i.ko()?i.Fo():tc(n)&&n.gu.set("Unknown"))}function ny(t,e){t.yu.Ot(e.targetId),Oo(t).zo(e)}function xk(t,e){t.yu.Ot(e),Oo(t).Ho(e)}function iy(t){t.yu=new IO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),Oo(t).start(),t.gu.uu()}function sy(t){return tc(t)&&!Oo(t).No()&&t.du.size>0}function tc(t){return re(t)._u.size===0}function Sk(t){t.yu=void 0}async function xL(t){t.du.forEach((e,n)=>{ny(t,e)})}async function SL(t,e){Sk(t),sy(t)?(t.gu.hu(e),iy(t)):t.gu.set("Unknown")}async function CL(t,e,n){if(t.gu.set("Online"),e instanceof ck&&e.state===2&&e.cause)try{await async function(i,s){const r=s.cause;for(const o of s.targetIds)i.du.has(o)&&(await i.remoteSyncer.rejectListen(o,r),i.du.delete(o),i.yu.removeTarget(o))}(t,e)}catch(i){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pw(t,i)}else if(e instanceof fu?t.yu.Kt(e):e instanceof lk?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(H.min()))try{const i=await _k(t.localStore);n.compareTo(i)>=0&&await function(s,r){const o=s.yu.Zt(r);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=s.du.get(l);c&&s.du.set(l,c.withResumeToken(a.resumeToken,r))}}),o.targetMismatches.forEach(a=>{const l=s.du.get(a);if(!l)return;s.du.set(a,l.withResumeToken(bt.EMPTY_BYTE_STRING,l.snapshotVersion)),xk(s,a);const c=new Us(l.target,a,1,l.sequenceNumber);ny(s,c)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){F("RemoteStore","Failed to raise snapshot:",i),await Pw(t,i)}}async function Pw(t,e,n){if(!Xl(e))throw e;t._u.add(1),await ec(t),t.gu.set("Offline"),n||(n=()=>_k(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await Dd(t)})}async function Dw(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const i=tc(n);n._u.add(3),await ec(n),i&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await Dd(n)}async function bL(t,e){const n=re(t);e?(n._u.delete(2),await Dd(n)):e||(n._u.add(2),await ec(n),n.gu.set("Unknown"))}function Oo(t){return t.pu||(t.pu=function(e,n,i){const s=re(e);return s.su(),new _L(n,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,i)}(t.datastore,t.asyncQueue,{Yr:xL.bind(null,t),Zr:SL.bind(null,t),Wo:CL.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),sy(t)?iy(t):t.gu.set("Unknown")):(await t.pu.stop(),Sk(t))})),t.pu}class ry{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,s,r){const o=Date.now()+i,a=new ry(e,n,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(I.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ck(t,e){if(di("AsyncQueue",`${e}: ${t}`),Xl(t))return new P(I.UNAVAILABLE,`${e}: ${t}`);throw t}class jr{constructor(e){this.comparator=e?(n,i)=>e(n,i)||$.comparator(n.key,i.key):(n,i)=>$.comparator(n.key,i.key),this.keyedMap=da(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new jr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new jr;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class Mw{constructor(){this.Tu=new st($.comparator)}track(e){const n=e.doc.key,i=this.Tu.get(n);i?e.type!==0&&i.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&i.type!==1?this.Tu=this.Tu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Tu=this.Tu.remove(n):e.type===1&&i.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):q():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,i)=>{e.push(i)}),e}}class fo{constructor(e,n,i,s,r,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new fo(e,n,jr.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}class kL{constructor(){this.Au=void 0,this.listeners=[]}}class TL{constructor(){this.queries=new Mo(e=>Qb(e),Id),this.onlineState="Unknown",this.Ru=new Set}}async function bk(t,e){const n=re(t),i=e.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new kL),s)try{r.Au=await n.onListen(i)}catch(o){const a=Ck(o,`Initialization of query '${Fg(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,r),r.listeners.push(e),e.bu(n.onlineState),r.Au&&e.Pu(r.Au)&&oy(n)}async function kk(t,e){const n=re(t),i=e.query;let s=!1;const r=n.queries.get(i);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),s=r.listeners.length===0)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function IL(t,e){const n=re(t);let i=!1;for(const s of e){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.listeners)a.Pu(s)&&(i=!0);o.Au=s}}i&&oy(n)}function NL(t,e,n){const i=re(t),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(n);i.queries.delete(e)}function oy(t){t.Ru.forEach(e=>{e.next()})}class Tk{constructor(e,n,i){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new fo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Nu||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class Ik{constructor(e){this.key=e}}class Nk{constructor(e){this.key=e}}class RL{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=te(),this.mutatedKeys=te(),this.Gu=Yb(e),this.Qu=new jr(this.Gu)}get ju(){return this.qu}Wu(e,n){const i=n?n.zu:new Mw,s=n?n.Qu:this.Qu;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),f=Y0(this.query,h)?h:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let v=!1;d&&f?d.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),v=!0):this.Hu(d,f)||(i.track({type:2,doc:f}),v=!0,(l&&this.Gu(f,l)>0||c&&this.Gu(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),v=!0):d&&!f&&(i.track({type:1,doc:d}),v=!0,(l||c)&&(a=!0)),v&&(f?(o=o.add(f),r=g?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Qu:o,zu:i,$i:a,mutatedKeys:r}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const r=e.zu.Eu();r.sort((c,u)=>function(h,d){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q()}};return f(h)-f(d)}(c.type,u.type)||this.Gu(c.doc,u.doc)),this.Ju(i);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,r.length!==0||l?{snapshot:new fo(this.query,e.Qu,s,r,e.mutatedKeys,a===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Mw,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=te(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const n=[];return e.forEach(i=>{this.Ku.has(i)||n.push(new Nk(i))}),this.Ku.forEach(i=>{e.has(i)||n.push(new Ik(i))}),n}tc(e){this.qu=e.Hi,this.Ku=te();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return fo.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class AL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class PL{constructor(e){this.key=e,this.nc=!1}}class DL{constructor(e,n,i,s,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Mo(a=>Qb(a),Id),this.rc=new Map,this.oc=new Set,this.uc=new st($.comparator),this.cc=new Map,this.ac=new Z0,this.hc={},this.lc=new Map,this.fc=ho.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function ML(t,e){const n=VL(t);let i,s;const r=n.ic.get(e);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.ec();else{const o=await uL(n.localStore,fi(e));n.isPrimaryClient&&wk(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,s=await OL(n,e,i,a==="current",o.resumeToken)}return s}async function OL(t,e,n,i,s){t._c=(h,d,f)=>async function(p,g,v,y){let m=g.view.Wu(v);m.$i&&(m=await Nw(p.localStore,g.query,!1).then(({documents:E})=>g.view.Wu(E,m)));const _=y&&y.targetChanges.get(g.targetId),w=g.view.applyChanges(m,p.isPrimaryClient,_);return Lw(p,g.targetId,w.Xu),w.snapshot}(t,h,d,f);const r=await Nw(t.localStore,e,!0),o=new RL(e,r.Hi),a=o.Wu(r.documents),l=Zl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);Lw(t,n,c.Xu);const u=new AL(e,n,o);return t.ic.set(e,u),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),c.snapshot}async function LL(t,e){const n=re(t),i=n.ic.get(e),s=n.rc.get(i.targetId);if(s.length>1)return n.rc.set(i.targetId,s.filter(r=>!Id(r,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Bg(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Ek(n.remoteStore,i.targetId),jg(n,i.targetId)}).catch(W0)):(jg(n,i.targetId),await Bg(n.localStore,i.targetId,!0))}async function Rk(t,e){const n=re(t);try{const i=await lL(n.localStore,e);e.targetChanges.forEach((s,r)=>{const o=n.cc.get(r);o&&(Ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.nc=!0:s.modifiedDocuments.size>0?Ve(o.nc):s.removedDocuments.size>0&&(Ve(o.nc),o.nc=!1))}),await Pk(n,i,e)}catch(i){await W0(i)}}function Ow(t,e,n){const i=re(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.ic.forEach((r,o)=>{const a=o.view.bu(e);a.snapshot&&s.push(a.snapshot)}),function(r,o){const a=re(r);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.bu(o)&&(l=!0)}),l&&oy(a)}(i.eventManager,e),s.length&&i.sc.Wo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function FL(t,e,n){const i=re(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.cc.get(e),r=s&&s.key;if(r){let o=new st($.comparator);o=o.insert(r,wt.newNoDocument(r,H.min()));const a=te().add(r),l=new Ad(H.min(),new Map,new Ke(ce),o,a);await Rk(i,l),i.uc=i.uc.remove(r),i.cc.delete(e),ay(i)}else await Bg(i.localStore,e,!1).then(()=>jg(i,e,n)).catch(W0)}function jg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.rc.get(e))t.ic.delete(i),n&&t.sc.wc(i,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(i=>{t.ac.containsKey(i)||Ak(t,i)})}function Ak(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(Ek(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),ay(t))}function Lw(t,e,n){for(const i of n)i instanceof Ik?(t.ac.addReference(i.key,e),$L(t,i)):i instanceof Nk?(F("SyncEngine","Document no longer in limbo: "+i.key),t.ac.removeReference(i.key,e),t.ac.containsKey(i.key)||Ak(t,i.key)):q()}function $L(t,e){const n=e.key,i=n.path.canonicalString();t.uc.get(n)||t.oc.has(i)||(F("SyncEngine","New document in limbo: "+n),t.oc.add(i),ay(t))}function ay(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new $(we.fromString(e)),i=t.fc.next();t.cc.set(i,new PL(n)),t.uc=t.uc.insert(n,i),wk(t.remoteStore,new Us(fi(kd(n.path)),i,2,H0.at))}}async function Pk(t,e,n){const i=re(t),s=[],r=[],o=[];i.ic.isEmpty()||(i.ic.forEach((a,l)=>{o.push(i._c(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=ty.Ci(l.targetId,c);r.push(u)}}))}),await Promise.all(o),i.sc.Wo(s),await async function(a,l){const c=re(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>N.forEach(l,h=>N.forEach(h.Si,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>N.forEach(h.Di,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Xl(u))throw u;F("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.qi.get(h),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);c.qi=c.qi.insert(h,p)}}}(i.localStore,r))}async function UL(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());const i=await yk(n.localStore,e);n.currentUser=e,function(s,r){s.lc.forEach(o=>{o.forEach(a=>{a.reject(new P(I.CANCELLED,r))})}),s.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Pk(n,i.ji)}}function zL(t,e){const n=re(t),i=n.cc.get(e);if(i&&i.nc)return te().add(i.key);{let s=te();const r=n.rc.get(e);if(!r)return s;for(const o of r){const a=n.ic.get(o);s=s.unionWith(a.view.ju)}return s}}function VL(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FL.bind(null,e),e.sc.Wo=IL.bind(null,e.eventManager),e.sc.wc=NL.bind(null,e.eventManager),e}class BL{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=Pd(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return aL(this.persistence,new rL,e.initialUser,this.yt)}yc(e){return new iL(ey.Bs,this.yt)}gc(e){return new dL}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class jL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Ow(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UL.bind(null,this.syncEngine),await bL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new TL}createDatastore(e){const n=Pd(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new mL(s));var s;return function(r,o,a,l){return new vL(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,s=e.asyncQueue,r=a=>Ow(this.syncEngine,a,0),o=Aw.C()?new Aw:new fL,new EL(n,i,s,r,o);var n,i,s,r,o}createSyncEngine(e,n){return function(i,s,r,o,a,l,c){const u=new DL(i,s,r,o,a,l);return c&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=re(e);F("RemoteStore","RemoteStore shutting down."),n._u.add(5),await ec(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}function Dk(t,e,n){if(!n)throw new P(I.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WL(t,e,n,i){if(e===!0&&i===!0)throw new P(I.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Fw(t){if(!$.isDocumentKey(t))throw new P(I.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $w(t){if($.isDocumentKey(t))throw new P(I.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Md(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":q()}function Wr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new P(I.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Md(t);throw new P(I.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function HL(t,e){if(e<=0)throw new P(I.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}const Uw=new Map;class zw{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new P(I.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,WL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(I.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(I.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new $M;switch(n.type){case"gapi":const i=n.client;return new BM(i,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new P(I.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Uw.get(e);n&&(F("ComponentProvider","Removing Datastore"),Uw.delete(e),n.terminate())}(this),Promise.resolve()}}function qL(t,e,n,i={}){var s;const r=(t=Wr(t,Od))._getSettings();if(r.host!=="firestore.googleapis.com"&&r.host!==e&&Pg("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${n}`,ssl:!1})),i.mockUserToken){let o,a;if(typeof i.mockUserToken=="string")o=i.mockUserToken,a=_t.MOCK_USER;else{o=IC(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new P(I.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new _t(l)}t._authCredentials=new UM(new Fb(o,a))}}class Wt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class gs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Yi extends gs{constructor(e,n,i){super(e,n,kd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new $(e))}withConverter(e){return new Yi(this.firestore,e,this._path)}}function Mk(t,e,...n){if(t=Be(t),Dk("collection","path",e),t instanceof Od){const i=we.fromString(e,...n);return $w(i),new Yi(t,null,i)}{if(!(t instanceof Wt||t instanceof Yi))throw new P(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return $w(i),new Yi(t.firestore,null,i)}}function Wg(t,e,...n){if(t=Be(t),arguments.length===1&&(e=$b.R()),Dk("doc","path",e),t instanceof Od){const i=we.fromString(e,...n);return Fw(i),new Wt(t,null,new $(i))}{if(!(t instanceof Wt||t instanceof Yi))throw new P(I.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(we.fromString(e,...n));return Fw(i),new Wt(t.firestore,t instanceof Yi?t.converter:null,new $(i))}}class Ok{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):di("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class KL{constructor(e,n,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=$b.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{F("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(F("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(I.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ck(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function GL(t,e){t.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await yk(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function QL(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YL(t);F("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(s=>Dw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Dw(e.remoteStore,r)),t.onlineComponents=e}async function YL(t){return t.offlineComponents||(F("FirestoreClient","Using default OfflineComponentProvider"),await GL(t,new BL)),t.offlineComponents}async function XL(t){return t.onlineComponents||(F("FirestoreClient","Using default OnlineComponentProvider"),await QL(t,new jL)),t.onlineComponents}async function Hg(t){const e=await XL(t),n=e.eventManager;return n.onListen=ML.bind(null,e.syncEngine),n.onUnlisten=LL.bind(null,e.syncEngine),n}function JL(t,e,n={}){const i=new Ls;return t.asyncQueue.enqueueAndForget(async()=>function(s,r,o,a,l){const c=new Ok({next:h=>{r.enqueueAndForget(()=>kk(s,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new P(I.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new P(I.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Tk(kd(o.path),c,{includeMetadataChanges:!0,Nu:!0});return bk(s,u)}(await Hg(t),t.asyncQueue,e,n,i)),i.promise}class ZL{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new vk(this,"async_queue_retry"),this.Wc=()=>{const n=Qf();n&&F("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Qf();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=Qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new Ls;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Xl(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{this.Kc=i,this.Gc=!1;const s=function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o}(i);throw di("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Gc=!1,i))));return this.Bc=n,n}enqueueAfterDelay(e,n,i){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const s=ry.createAndSchedule(this,e,n,i,r=>this.Yc(r));return this.Uc.push(s),s}zc(){this.Kc&&q()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function Vw(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const i=e;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class fh extends Od{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new ZL,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Fk(this),this._firestoreClient.terminate()}}function eF(t,e,n){n||(n="(default)");const i=Vl(t,"firestore");if(i.isInitialized(n)){const s=i.getImmediate({identifier:n}),r=i.getOptions(n);if(sl(r,e))return s;throw new P(I.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(I.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})}function tF(t,e){const n=typeof t=="object"?t:E0(),i=typeof t=="string"?t:e||"(default)",s=Vl(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=kC("firestore");r&&qL(s,...r)}return s}function Lk(t){return t._firestoreClient||Fk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Fk(t){var e;const n=t._freezeSettings(),i=function(s,r,o,a){return new JM(s,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new KL(t._authCredentials,t._appCheckCredentials,t._queue,i)}class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(bt.fromBase64String(e))}catch(n){throw new P(I.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $k{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new P(I.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uk{constructor(e){this._methodName=e}}class ly{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new P(I.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new P(I.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}const nF=/^__.*__$/;function zk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}class cy{constructor(e,n,i,s,r,o){this.settings=e,this.databaseId=n,this.yt=i,this.ignoreUndefinedProperties=s,r===void 0&&this.na(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new cy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:i,oa:!1});return s.ua(e),s}ca(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:i,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return qg(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(zk(this.sa)&&nF.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class iF{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=i||Pd(e)}da(e,n,i,s=!1){return new cy({sa:e,methodName:n,fa:i,path:It.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function sF(t){const e=t._freezeSettings(),n=Pd(t._databaseId);return new iF(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rF(t,e,n,i=!1){return uy(n,t.da(i?4:3,e))}function uy(t,e){if(Vk(t=Be(t)))return aF("Unsupported field value:",e,t),oF(t,e);if(t instanceof Uk)return function(n,i){if(!zk(i.sa))throw i.ha(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,i){const s=[];let r=0;for(const o of n){let a=uy(o,i.aa(r));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),r++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=Be(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return mO(i.yt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=nt.fromDate(n);return{timestampValue:zg(i.yt,s)}}if(n instanceof nt){const s=new nt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zg(i.yt,s)}}if(n instanceof ly)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof po)return{bytesValue:uk(i.yt,n._byteString)};if(n instanceof Wt){const s=i.databaseId,r=n.firestore._databaseId;if(!r.isEqual(s))throw i.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hk(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i.ha(`Unsupported field value: ${Md(n)}`)}(t,e)}function oF(t,e){const n={};return Ub(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jl(t,(i,s)=>{const r=uy(s,e.ra(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function Vk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nt||t instanceof ly||t instanceof po||t instanceof Wt||t instanceof Uk)}function aF(t,e,n){if(!Vk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=Md(n);throw i==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+i)}}const lF=new RegExp("[~\\*/\\[\\]]");function cF(t,e,n){if(e.search(lF)>=0)throw qg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $k(...e.split("."))._internalPath}catch{throw qg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qg(t,e,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new P(I.INVALID_ARGUMENT,a+t+l)}class Bk{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new uF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class uF extends Bk{data(){return super.data()}}function hy(t,e){return typeof e=="string"?cF(t,e):e instanceof $k?e._internalPath:e._delegate._internalPath}function hF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new P(I.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class fy extends dy{}function jk(t,e,...n){let i=[];e instanceof dy&&i.push(e),i=i.concat(n),function(s){const r=s.filter(a=>a instanceof gy).length,o=s.filter(a=>a instanceof py).length;if(r>1||r>0&&o>0)throw new P(I.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class py extends fy{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new py(e,n,i)}_apply(e){const n=this._parse(e);return qk(e._query,n),new gs(e.firestore,e.converter,Lg(e._query,n))}_parse(e){const n=sF(e.firestore);return function(s,r,o,a,l,c,u){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new P(I.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){jw(u,c);const d=[];for(const f of u)d.push(Bw(a,s,f));h={arrayValue:{values:d}}}else h=Bw(a,s,u)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||jw(u,c),h=rF(o,r,u,c==="in"||c==="not-in");return ze.create(l,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class gy extends dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let r=i;const o=s.getFlattenedFilters();for(const a of o)qk(r,a),r=Lg(r,a)}(e._query,n),new gs(e.firestore,e.converter,Lg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class my extends fy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new my(e,n)}_apply(e){const n=function(i,s,r){if(i.startAt!==null)throw new P(I.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(I.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new zr(s,r);return function(a,l){if(Q0(a)===null){const c=Td(a);c!==null&&Kk(a,c,l.field)}}(i,o),o}(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,function(i,s){const r=i.explicitOrderBy.concat([s]);return new Do(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Wk(t,e="asc"){const n=e,i=hy("orderBy",t);return my._create(i,n)}class yy extends fy{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new yy(e,n,i)}_apply(e){return new gs(e.firestore,e.converter,uh(e._query,this._limit,this._limitType))}}function Hk(t){return HL("limit",t),yy._create("limit",t,"F")}function Bw(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new P(I.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gb(e)&&n.indexOf("/")!==-1)throw new P(I.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(we.fromString(n));if(!$.isDocumentKey(i))throw new P(I.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return fw(t,new $(i))}if(n instanceof Wt)return fw(t,n._key);throw new P(I.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Md(n)}.`)}function jw(t,e){if(!Array.isArray(t)||t.length===0)throw new P(I.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new P(I.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function qk(t,e){if(e.isInequality()){const i=Td(t),s=e.field;if(i!==null&&!i.isEqual(s))throw new P(I.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${s.toString()}'`);const r=Q0(t);r!==null&&Kk(t,s,r)}const n=function(i,s){for(const r of i)for(const o of r.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new P(I.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(I.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Kk(t,e,n){if(!n.isEqual(e))throw new P(I.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class dF{convertValue(e,n="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw q()}}convertObject(e,n){const i={};return Jl(e.fields,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertGeoPoint(e){return new ly($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Vb(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fl(e));default:return null}}convertTimestamp(e){const n=ss(e);return new nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=we.fromString(e);Ve(mk(i));const s=new dl(i.get(1),i.get(3)),r=new $(i.popFirst(5));return s.isEqual(n)||di(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gk extends Bk{constructor(e,n,i,s,r,o){super(e,n,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(hy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class pu extends Gk{data(e={}){return super.data(e)}}class fF{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fa(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new pu(this._firestore,this._userDataWriter,i.key,i,new fa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new P(I.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>{const a=new pu(i._firestore,i._userDataWriter,o.doc.key,o.doc,new fa(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new pu(i._firestore,i._userDataWriter,o.doc.key,o.doc,new fa(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),c=r.indexOf(o.doc.key)),{type:pF(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function pF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q()}}function Kg(t){t=Wr(t,Wt);const e=Wr(t.firestore,fh);return JL(Lk(e),t._key).then(n=>Xk(e,t,n))}class Qk extends dF{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function Yk(t,...e){var n,i,s;t=Be(t);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Vw(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(Vw(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(t instanceof Wt)c=Wr(t.firestore,fh),u=kd(t._key.path),l={next:h=>{e[o]&&e[o](Xk(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Wr(t,gs);c=Wr(h.firestore,fh),u=h._query;const d=new Qk(c);l={next:f=>{e[o]&&e[o](new fF(c,d,h,f))},error:e[o+1],complete:e[o+2]},hF(t._query)}return function(h,d,f,p){const g=new Ok(p),v=new Tk(d,g,f);return h.asyncQueue.enqueueAndForget(async()=>bk(await Hg(h),v)),()=>{g.bc(),h.asyncQueue.enqueueAndForget(async()=>kk(await Hg(h),v))}}(Lk(c),u,a,l)}function Xk(t,e,n){const i=n.docs.get(e._key),s=new Qk(t);return new Gk(t,s,e._key,i,new fa(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){Po=n})(No),Ys(new ns("firestore",(n,{instanceIdentifier:i,options:s})=>{const r=n.getProvider("app").getImmediate(),o=new fh(new zM(n.getProvider("auth-internal")),new WM(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new P(I.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(a.options.projectId,l)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Un(cw,"3.8.0",t),Un(cw,"3.8.0","esm2017")})();function _y(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function Jk(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gF=Jk,Zk=new zl("auth","Firebase",Jk());const Ww=new cd("@firebase/auth");function gu(t,...e){Ww.logLevel<=ie.ERROR&&Ww.error(`Auth (${No}): ${t}`,...e)}function kn(t,...e){throw vy(t,...e)}function zn(t,...e){return vy(t,...e)}function mF(t,e,n){const i=Object.assign(Object.assign({},gF()),{[e]:n});return new zl("auth","Firebase",i).create(e,{appName:t.name})}function vy(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Zk.create(t,...e)}function z(t,e,...n){if(!t)throw vy(e,...n)}function ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gu(e),new Error(e)}function pi(t,e){t||ti(e)}const Hw=new Map;function ni(t){pi(t instanceof Function,"Expected a class definition");let e=Hw.get(t);return e?(pi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hw.set(t,e),e)}function yF(t,e){const n=Vl(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(sl(r,e??{}))return s;kn(s,"already-initialized")}return n.initialize({options:e})}function _F(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Gg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vF(){return qw()==="http:"||qw()==="https:"}function qw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function wF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vF()||u2()||"connection"in navigator)?navigator.onLine:!0}function EF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,pi(n>e,"Short delay should be less than long delay!"),this.isMobile=_0()||SC()}get(){return wF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wy(t,e){pi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class eT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};const SF=new nc(3e4,6e4);function Ld(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ic(t,e,n,i,s={}){return tT(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=Io(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),eT.fetch()(nT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function tT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},xF),e);try{const s=new CF(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Fc(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Fc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Fc(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw mF(t,u,c);kn(t,u)}}catch(s){if(s instanceof yi)throw s;kn(t,"network-request-failed")}}async function Fd(t,e,n,i,s={}){const r=await ic(t,e,n,i,s);return"mfaPendingCredential"in r&&kn(t,"multi-factor-auth-required",{_serverResponse:r}),r}function nT(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?wy(t.config,s):`${t.config.apiScheme}://${s}`}class CF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(zn(this.auth,"network-request-failed")),SF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=zn(t,e,i);return s.customData._tokenResponse=n,s}async function bF(t,e){return ic(t,"POST","/v1/accounts:delete",e)}async function kF(t,e){return ic(t,"POST","/v1/accounts:lookup",e)}function Ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TF(t,e=!1){const n=Be(t),i=await n.getIdToken(e),s=Ey(i);z(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Ra(Yf(s.auth_time)),issuedAtTime:Ra(Yf(s.iat)),expirationTime:Ra(Yf(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Yf(t){return Number(t)*1e3}function Ey(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return gu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Xu(n);return s?JSON.parse(s):(gu("Failed to decode base64 JWT payload"),null)}catch(s){return gu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function IF(t){const e=Ey(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function gl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof yi&&NF(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function NF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class RF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class iT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ra(this.lastLoginAt),this.creationTime=Ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ph(t){var e;const n=t.auth,i=await t.getIdToken(),s=await gl(t,kF(n,{idToken:i}));z(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?DF(r.providerUserInfo):[],a=PF(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new iT(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function AF(t){const e=Be(t);await ph(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PF(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function DF(t){return t.map(e=>{var{providerId:n}=e,i=_y(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function MF(t,e){const n=await tT(t,{},async()=>{const i=Io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=nT(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}class ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return z(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await MF(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new ml;return i&&(z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(z(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(z(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ml,this.toJSON())}_performRefresh(){return ti("not implemented")}}function wi(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zs{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=_y(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new iT(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await gl(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return TF(this,e)}reload(){return AF(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new zs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ph(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await gl(this,bF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,m=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:x,stsTokenManager:S}=n;z(_&&S,e,"internal-error");const b=ml.fromJSON(this.name,S);z(typeof _=="string",e,"internal-error"),wi(h,e.name),wi(d,e.name),z(typeof w=="boolean",e,"internal-error"),z(typeof E=="boolean",e,"internal-error"),wi(f,e.name),wi(p,e.name),wi(g,e.name),wi(v,e.name),wi(y,e.name),wi(m,e.name);const L=new zs({uid:_,auth:e,email:d,emailVerified:w,displayName:h,isAnonymous:E,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:b,createdAt:y,lastLoginAt:m});return x&&Array.isArray(x)&&(L.providerData=x.map(D=>Object.assign({},D))),v&&(L._redirectEventId=v),L}static async _fromIdTokenResponse(e,n,i=!1){const s=new ml;s.updateFromServerResponse(n);const r=new zs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ph(r),r}}class sT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sT.type="NONE";const Kw=sT;function mu(t,e,n){return`firebase:${t}:${e}:${n}`}class Hr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=mu(this.userKey,s.apiKey,r),this.fullPersistenceKey=mu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Hr(ni(Kw),e,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||ni(Kw);const o=mu(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=zs._fromJSON(e,u);c!==r&&(a=h),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Hr(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Hr(r,e,i))}}function Gw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cT(e))return"Blackberry";if(uT(e))return"Webos";if(xy(e))return"Safari";if((e.includes("chrome/")||oT(e))&&!e.includes("edge/"))return"Chrome";if(lT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function rT(t=Ct()){return/firefox\//i.test(t)}function xy(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oT(t=Ct()){return/crios\//i.test(t)}function aT(t=Ct()){return/iemobile/i.test(t)}function lT(t=Ct()){return/android/i.test(t)}function cT(t=Ct()){return/blackberry/i.test(t)}function uT(t=Ct()){return/webos/i.test(t)}function $d(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OF(t=Ct()){var e;return $d(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LF(){return h2()&&document.documentMode===10}function hT(t=Ct()){return $d(t)||lT(t)||uT(t)||cT(t)||/windows phone/i.test(t)||aT(t)}function FF(){try{return!!(window&&window!==window.top)}catch{return!1}}function dT(t,e=[]){let n;switch(t){case"Browser":n=Gw(Ct());break;case"Worker":n=`${Gw(Ct())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${No}/${i}`}class $F{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}class UF{constructor(e,n,i){this.app=e,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qw(this),this.idTokenSubscription=new Qw(this),this.beforeStateQueue=new $F(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zk,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Hr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Be(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await Hr.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return z(o,this,"internal-error"),o.then(()=>r(this.currentUser)),typeof n=="function"?e.addObserver(n,i,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function Ud(t){return Be(t)}class Qw{constructor(e){this.auth=e,this.observer=null,this.addObserver=b2(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zF(t,e,n){const i=Ud(t);z(i._canInitEmulator,i,"emulator-config-failed"),z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=fT(e),{host:o,port:a}=VF(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||BF()}function fT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VF(t){const e=fT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:Yw(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:Yw(o)}}}function Yw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Sy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}async function jF(t,e){return ic(t,"POST","/v1/accounts:update",e)}async function WF(t,e){return Fd(t,"POST","/v1/accounts:signInWithPassword",Ld(t,e))}async function HF(t,e){return Fd(t,"POST","/v1/accounts:signInWithEmailLink",Ld(t,e))}async function qF(t,e){return Fd(t,"POST","/v1/accounts:signInWithEmailLink",Ld(t,e))}class yl extends Sy{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new yl(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new yl(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return WF(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return HF(e,{email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return jF(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return qF(e,{idToken:n,email:this._email,oobCode:this._password});default:kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qr(t,e){return Fd(t,"POST","/v1/accounts:signInWithIdp",Ld(t,e))}const KF="http://localhost";class Zs extends Sy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):kn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=_y(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new Zs(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,qr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qr(e,n)}buildRequest(){const e={requestUri:KF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Io(n)}return e}}function GF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QF(t){const e=la(ca(t)).link,n=e?la(ca(e)).deep_link_id:null,i=la(ca(t)).deep_link_id;return(i?la(ca(i)).link:null)||i||n||e||t}class Cy{constructor(e){var n,i,s,r,o,a;const l=la(ca(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,h=GF((s=l.mode)!==null&&s!==void 0?s:null);z(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=QF(e);try{return new Cy(n)}catch{return null}}}class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,n){return yl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Cy.parseLink(n);return z(i,"argument-error"),yl._fromEmailAndCode(e,i.code,i.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class pT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sc extends pT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ki extends sc{constructor(){super("facebook.com")}static credential(e){return Zs._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ki.credential(e.oauthAccessToken)}catch{return null}}}ki.FACEBOOK_SIGN_IN_METHOD="facebook.com";ki.PROVIDER_ID="facebook.com";class Ti extends sc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zs._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.GOOGLE_SIGN_IN_METHOD="google.com";Ti.PROVIDER_ID="google.com";class Ii extends sc{constructor(){super("github.com")}static credential(e){return Zs._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";class Ni extends sc{constructor(){super("twitter.com")}static credential(e,n){return Zs._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ni.credential(n,i)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await zs._fromIdTokenResponse(e,i,s),o=Xw(i);return new go({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=Xw(i);return new go({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function Xw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class gh extends yi{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new gh(e,n,i,s)}}function gT(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(t,r,e,i):r})}async function YF(t,e,n=!1){const i=await gl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return go._forOperation(t,"link",i)}async function XF(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await gl(t,gT(i,s,e,t),n);z(r.idToken,i,"internal-error");const o=Ey(r.idToken);z(o,i,"internal-error");const{sub:a}=o;return z(t.uid===a,i,"user-mismatch"),go._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&kn(i,"user-mismatch"),r}}async function mT(t,e,n=!1){const i="signIn",s=await gT(t,i,e),r=await go._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function JF(t,e){return mT(Ud(t),e)}function ZF(t,e,n){return JF(Be(t),Lo.credential(e,n))}function e$(t,e,n,i){return Be(t).onIdTokenChanged(e,n,i)}function t$(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function n$(t,e,n,i){return Be(t).onAuthStateChanged(e,n,i)}function i$(t){return Be(t).signOut()}const mh="__sak";class yT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function s$(){const t=Ct();return xy(t)||$d(t)}const r$=1e3,o$=10;class _T extends yT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=s$()&&FF(),this.fallbackToPolling=hT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);LF()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,o$):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},r$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_T.type="LOCAL";const a$=_T;class vT extends yT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vT.type="SESSION";const wT=vT;function l$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new zd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await l$(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zd.receivers=[];function by(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}class c${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=by("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Vn(){return window}function u$(t){Vn().location.href=t}function ET(){return typeof Vn().WorkerGlobalScope<"u"&&typeof Vn().importScripts=="function"}async function h$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function f$(){return ET()?self:null}const xT="firebaseLocalStorageDb",p$=1,yh="firebaseLocalStorage",ST="fbase_key";class rc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vd(t,e){return t.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function g$(){const t=indexedDB.deleteDatabase(xT);return new rc(t).toPromise()}function Qg(){const t=indexedDB.open(xT,p$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(yh,{keyPath:ST})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(yh)?e(i):(i.close(),await g$(),e(await Qg()))})})}async function Jw(t,e,n){const i=Vd(t,!0).put({[ST]:e,value:n});return new rc(i).toPromise()}async function m$(t,e){const n=Vd(t,!1).get(e),i=await new rc(n).toPromise();return i===void 0?null:i.value}function Zw(t,e){const n=Vd(t,!0).delete(e);return new rc(n).toPromise()}const y$=800,_$=3;class CT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>_$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ET()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zd._getInstance(f$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await h$(),!this.activeServiceWorker)return;this.sender=new c$(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qg();return await Jw(e,mh,"1"),await Zw(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Jw(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>m$(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Vd(s,!1).getAll();return new rc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),y$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CT.type="LOCAL";const v$=CT;function w$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function E$(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=zn("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",w$().appendChild(i)})}function x$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new nc(3e4,6e4);function S$(t,e){return e?ni(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class ky extends Sy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function C$(t){return mT(t.auth,new ky(t),t.bypassAuthState)}function b$(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),XF(n,new ky(t),t.bypassAuthState)}async function k$(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),YF(n,new ky(t),t.bypassAuthState)}class bT{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return C$;case"linkViaPopup":case"linkViaRedirect":return k$;case"reauthViaPopup":case"reauthViaRedirect":return b$;default:kn(this.auth,"internal-error")}}resolve(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const T$=new nc(2e3,1e4);class Ar extends bT{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Ar.currentPopupAction&&Ar.currentPopupAction.cancel(),Ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){pi(this.filter.length===1,"Popup operations only handle one event");const e=by();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zn(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,T$.get())};e()}}Ar.currentPopupAction=null;const I$="pendingRedirect",yu=new Map;class N$ extends bT{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=yu.get(this.auth._key());if(!e){try{const i=await R$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}yu.set(this.auth._key(),e)}return this.bypassAuthState||yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R$(t,e){const n=D$(e),i=P$(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function A$(t,e){yu.set(t._key(),e)}function P$(t){return ni(t._redirectPersistence)}function D$(t){return mu(I$,t.config.apiKey,t.name)}async function M$(t,e,n=!1){const i=Ud(t),s=S$(i,e),o=await new N$(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}const O$=10*60*1e3;class L${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!F$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!kT(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O$&&this.cachedEventUids.clear(),this.cachedEventUids.has(e1(e))}saveEventToCache(e){this.cachedEventUids.add(e1(e)),this.lastProcessedEventTime=Date.now()}}function e1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function kT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function F$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kT(t);default:return!1}}async function $$(t,e={}){return ic(t,"GET","/v1/projects",e)}const U$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,z$=/^https?/;async function V$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $$(t);for(const n of e)try{if(B$(n))return}catch{}kn(t,"unauthorized-domain")}function B$(t){const e=Gg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!z$.test(n))return!1;if(U$.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const j$=new nc(3e4,6e4);function t1(){const t=Vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function W$(t){return new Promise((e,n)=>{var i,s,r;function o(){t1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t1(),n(zn(t,"network-request-failed"))},timeout:j$.get()})}if(!((s=(i=Vn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=Vn().gapi)===null||r===void 0)&&r.load)o();else{const a=x$("iframefcb");return Vn()[a]=()=>{gapi.load?o():n(zn(t,"network-request-failed"))},E$(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw _u=null,e})}let _u=null;function H$(t){return _u=_u||W$(t),_u}const q$=new nc(5e3,15e3),K$="__/auth/iframe",G$="emulator/auth/iframe",Q$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function X$(t){const e=t.config;z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?wy(e,G$):`https://${t.config.authDomain}/${K$}`,i={apiKey:e.apiKey,appName:t.name,v:No},s=Y$.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Io(i).slice(1)}`}async function J$(t){const e=await H$(t),n=Vn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:X$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Q$,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=zn(t,"network-request-failed"),a=Vn().setTimeout(()=>{r(o)},q$.get());function l(){Vn().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}const Z$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e3=500,t3=600,n3="_blank",i3="http://localhost";class n1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s3(t,e,n,i=e3,s=t3){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Z$),{width:i.toString(),height:s.toString(),top:r,left:o}),c=Ct().toLowerCase();n&&(a=oT(c)?n3:n),rT(c)&&(e=e||i3,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,p])=>`${d}${f}=${p},`,"");if(OF(c)&&a!=="_self")return r3(e||"",a),new n1(null);const h=window.open(e||"",a,u);z(h,t,"popup-blocked");try{h.focus()}catch{}return new n1(h)}function r3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const o3="__/auth/handler",a3="emulator/auth/handler";function i1(t,e,n,i,s,r){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:No,eventId:s};if(e instanceof pT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(r||{}))o[l]=c}if(e instanceof sc){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${l3(t)}?${Io(a).slice(1)}`}function l3({config:t}){return t.emulator?wy(t,a3):`https://${t.authDomain}/${o3}`}const Xf="webStorageSupport";class c3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wT,this._completeRedirectFn=M$,this._overrideRedirectResult=A$}async _openPopup(e,n,i,s){var r;pi((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=i1(e,n,i,Gg(),s);return s3(e,o,by())}async _openRedirect(e,n,i,s){return await this._originValidation(e),u$(i1(e,n,i,Gg(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(pi(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await J$(e),i=new L$(e);return n.register("authEvent",s=>(z(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xf,{type:Xf},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[Xf];o!==void 0&&n(!!o),kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=V$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hT()||xy()||$d()}}const u3=c3;var s1="@firebase/auth",r1="0.21.0";class h3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function d3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function f3(t){Ys(new ns("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:r,authDomain:o}=i.options;return((a,l)=>{z(r&&!r.includes(":"),"invalid-api-key",{appName:a.name}),z(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:r,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dT(t)},u=new UF(a,l,c);return _F(u,n),u})(i,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ys(new ns("auth-internal",e=>{const n=Ud(e.getProvider("auth").getImmediate());return(i=>new h3(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Un(s1,r1,d3(t)),Un(s1,r1,"esm2017")}const p3=5*60,g3=TC("authIdTokenMaxAge")||p3;let o1=null;const m3=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>g3)return;const s=n==null?void 0:n.token;o1!==s&&(o1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function y3(t=E0()){const e=Vl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yF(t,{popupRedirectResolver:u3,persistence:[v$,a$,wT]}),i=TC("authTokenSyncURL");if(i){const r=m3(i);t$(n,r,()=>r(n.currentUser)),e$(n,o=>r(o))}const s=bC("auth");return s&&zF(n,`http://${s}`),n}f3("Browser");const a1="@firebase/database",l1="0.14.0";let TT="";function _3(t){TT=t}class v3{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ze(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:il(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class w3{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const IT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new v3(e)}}catch{}return new w3},Ps=IT("localStorage"),Yg=IT("sessionStorage");const Kr=new cd("@firebase/database"),E3=function(){let t=1;return function(){return t++}}(),NT=function(t){const e=I2(t),n=new C2;n.update(e);const i=n.digest();return y0.encodeByteArray(i)},oc=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=oc.apply(null,i):typeof i=="object"?e+=Ze(i):e+=i,e+=" "}return e};let Vs=null,c1=!0;const x3=function(t,e){R(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Kr.logLevel=ie.VERBOSE,Vs=Kr.log.bind(Kr),e&&Yg.set("logging_enabled",!0)):typeof t=="function"?Vs=t:(Vs=null,Yg.remove("logging_enabled"))},at=function(...t){if(c1===!0&&(c1=!1,Vs===null&&Yg.get("logging_enabled")===!0&&x3(!0)),Vs){const e=oc.apply(null,t);Vs(e)}},ac=function(t){return function(...e){at(t,...e)}},Xg=function(...t){const e="FIREBASE INTERNAL ERROR: "+oc(...t);Kr.error(e)},gi=function(...t){const e=`FIREBASE FATAL ERROR: ${oc(...t)}`;throw Kr.error(e),new Error(e)},At=function(...t){const e="FIREBASE WARNING: "+oc(...t);Kr.warn(e)},S3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&At("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ty=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},C3=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},mo="[MIN_NAME]",er="[MAX_NAME]",cr=function(t,e){if(t===e)return 0;if(t===mo||e===er)return-1;if(e===mo||t===er)return 1;{const n=u1(t),i=u1(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},b3=function(t,e){return t===e?0:t<e?-1:1},Qo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ze(e))},Iy=function(t){if(typeof t!="object"||t===null)return Ze(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Ze(e[i]),n+=":",n+=Iy(t[e[i]]);return n+="}",n},RT=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function ht(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const AT=function(t){R(!Ty(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let s,r,o,a,l;t===0?(r=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},k3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},T3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function I3(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const N3=new RegExp("^-?(0*)\\d{1,10}$"),R3=-2147483648,A3=2147483647,u1=function(t){if(N3.test(t)){const e=Number(t);if(e>=R3&&e<=A3)return e}return null},Fo=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw At("Exception was thrown by user callback.",n),e},Math.floor(0))}},P3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Aa=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};class D3{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){At(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class M3{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(at("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',At(e)}}class Gr{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Gr.OWNER="owner";const Ny="5",PT="v",DT="s",MT="r",OT="f",LT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FT="ls",$T="p",Jg="ac",UT="websocket",zT="long_polling";class VT{constructor(e,n,i,s,r=!1,o="",a=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ps.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ps.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function O3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function BT(t,e,n){R(typeof e=="string","typeof type must == string"),R(typeof n=="object","typeof params must == object");let i;if(e===UT)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===zT)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);O3(t)&&(n.ns=t.namespace);const s=[];return ht(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}class L3{constructor(){this.counters_={}}incrementCounter(e,n=1){Wn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return l2(this.counters_)}}const Jf={},Zf={};function Ry(t){const e=t.toString();return Jf[e]||(Jf[e]=new L3),Jf[e]}function F3(t,e){const n=t.toString();return Zf[n]||(Zf[n]=e()),Zf[n]}class $3{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Fo(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const h1="start",U3="close",z3="pLPCommand",V3="pRTLPCB",jT="id",WT="pw",HT="ser",B3="cb",j3="seg",W3="ts",H3="d",q3="dframe",qT=1870,KT=30,K3=qT-KT,G3=25e3,Q3=3e4;class Pr{constructor(e,n,i,s,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ac(e),this.stats_=Ry(n),this.urlFn=l=>(this.appCheckToken&&(l[Jg]=this.appCheckToken),BT(n,zT,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new $3(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Q3)),C3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ay((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===h1)this.id=a,this.password=l;else if(o===U3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[h1]="t",i[HT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[B3]=this.scriptTagHolder.uniqueCallbackIdentifier),i[PT]=Ny,this.transportSessionId&&(i[DT]=this.transportSessionId),this.lastSessionId&&(i[FT]=this.lastSessionId),this.applicationId&&(i[$T]=this.applicationId),this.appCheckToken&&(i[Jg]=this.appCheckToken),typeof location<"u"&&location.hostname&&LT.test(location.hostname)&&(i[MT]=OT);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Pr.forceAllow_=!0}static forceDisallow(){Pr.forceDisallow_=!0}static isAvailable(){return Pr.forceAllow_?!0:!Pr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!k3()&&!T3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=EC(n),s=RT(i,K3);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[q3]="t",i[jT]=e,i[WT]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ze(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ay{constructor(e,n,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=E3(),window[z3+this.uniqueCallbackIdentifier]=e,window[V3+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ay.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){at("frame writing exception"),a.stack&&at(a.stack),at(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||at("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[jT]=this.myID,e[WT]=this.myPW,e[HT]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+KT+i.length<=qT;){const o=this.pendingSegs.shift();i=i+"&"+j3+s+"="+o.seg+"&"+W3+s+"="+o.ts+"&"+H3+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(G3)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{at("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const Y3=16384,X3=45e3;let _h=null;typeof MozWebSocket<"u"?_h=MozWebSocket:typeof WebSocket<"u"&&(_h=WebSocket);class yn{constructor(e,n,i,s,r,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ac(this.connId),this.stats_=Ry(n),this.connURL=yn.connectionURL_(n,o,a,s,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,s,r){const o={};return o[PT]=Ny,typeof location<"u"&&location.hostname&&LT.test(location.hostname)&&(o[MT]=OT),n&&(o[DT]=n),i&&(o[FT]=i),s&&(o[Jg]=s),r&&(o[$T]=r),BT(e,UT,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ps.set("previous_websocket_failure",!0);try{let i;CC(),this.mySock=new _h(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){yn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&_h!==null&&!yn.forceDisallow_}static previouslyFailed(){return Ps.isInMemoryStorage||Ps.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ps.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=il(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(R(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Ze(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=RT(n,Y3);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(X3))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}yn.responsesRequiredToBeHealthy=2;yn.healthyTimeout=3e4;class _l{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Pr,yn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=yn&&yn.isAvailable();let i=n&&!yn.previouslyFailed();if(e.webSocketOnly&&(n||At("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[yn];else{const s=this.transports_=[];for(const r of _l.ALL_TRANSPORTS)r&&r.isAvailable()&&s.push(r);_l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}_l.globalTransportInitialized_=!1;const J3=6e4,Z3=5e3,e4=10*1024,t4=100*1024,ep="t",d1="d",n4="s",f1="r",i4="e",p1="o",g1="a",m1="n",y1="p",s4="h";class r4{constructor(e,n,i,s,r,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ac("c:"+this.id+":"),this.transportManager_=new _l(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Aa(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>t4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>e4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ep in e){const n=e[ep];n===g1?this.upgradeIfSecondaryHealthy_():n===f1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===p1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Qo("t",e),i=Qo("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:y1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:g1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:m1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Qo("t",e),i=Qo("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Qo(ep,e);if(d1 in e){const i=e[d1];if(n===s4)this.onHandshake_(i);else if(n===m1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===n4?this.onConnectionShutdown_(i):n===f1?this.onReset_(i):n===i4?Xg("Server Error: "+i):n===p1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Xg("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Ny!==i&&At("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Aa(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(J3))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Aa(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Z3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:y1,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class GT{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}class QT{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){R(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class vh extends QT{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_0()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new vh}getInitialEvent(e){return R(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const _1=32,v1=768;class de{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function oe(){return new de("")}function K(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function os(t){return t.pieces_.length-t.pieceNum_}function me(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new de(t.pieces_,e)}function Py(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function o4(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function vl(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function YT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new de(e,0)}function Re(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof de)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new de(n,0)}function Q(t){return t.pieceNum_>=t.pieces_.length}function $t(t,e){const n=K(t),i=K(e);if(n===null)return e;if(n===i)return $t(me(t),me(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function a4(t,e){const n=vl(t,0),i=vl(e,0);for(let s=0;s<n.length&&s<i.length;s++){const r=cr(n[s],i[s]);if(r!==0)return r}return n.length===i.length?0:n.length<i.length?-1:1}function Dy(t,e){if(os(t)!==os(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function an(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(os(t)>os(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class l4{constructor(e,n){this.errorPrefix_=n,this.parts_=vl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ld(this.parts_[i]);XT(this)}}function c4(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ld(e),XT(t)}function u4(t){const e=t.parts_.pop();t.byteLength_-=ld(e),t.parts_.length>0&&(t.byteLength_-=1)}function XT(t){if(t.byteLength_>v1)throw new Error(t.errorPrefix_+"has a key path longer than "+v1+" bytes ("+t.byteLength_+").");if(t.parts_.length>_1)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+_1+") or object contains a cycle "+Cs(t))}function Cs(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}class My extends QT{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new My}getInitialEvent(e){return R(e==="visible","Unknown event type: "+e),[this.visible_]}}const Yo=1e3,h4=60*5*1e3,w1=30*1e3,d4=1.3,f4=3e4,p4="server_kill",E1=3;class oi extends GT{constructor(e,n,i,s,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=oi.nextPersistentConnectionId_++,this.log_=ac("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yo,this.maxReconnectDelay_=h4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!CC())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");My.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&vh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const s=++this.requestNumber_,r={r:s,a:e,b:n};this.log_(Ze(r)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const n=new Ul,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,i,s){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:i};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+i+" for "+s);const r={p:i},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;oi.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Wn(e,"w")){const i=ro(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();At(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||S2(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=w1)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=x2(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,s=>{const r=s.s,o=s.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,n)}sendUnlisten_(e,n,i,s){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";s&&(r.q=i,r.t=s),this.sendRequest(o,r)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,s){const r={p:n,d:i};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,i,s){this.putInternal("p",e,n,i,s)}merge(e,n,i,s){this.putInternal("m",e,n,i,s)}putInternal(e,n,i,s,r){this.initConnection_();const o={p:n,d:i};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const r=i.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ze(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Xg("Unrecognized action received from server: "+Ze(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>f4&&(this.reconnectDelay_=Yo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*d4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+oi.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(h){R(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?at("getToken() completed but was canceled"):(at("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new r4(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,f=>{At(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(p4)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&At(h),l())}}}interrupt(e){at("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){at("Resuming connection for reason: "+e),delete this.interruptReasons_[e],gg(this.interruptReasons_)&&(this.reconnectDelay_=Yo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(r=>Iy(r)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const i=new de(e).toString();let s;if(this.listens.has(i)){const r=this.listens.get(i);s=r.get(n),r.delete(n),r.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,n){at("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=E1&&(this.reconnectDelay_=w1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){at("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=E1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+TT.replace(/\./g,"-")]=1,_0()?e["framework.cordova"]=1:SC()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=vh.getInstance().currentlyOnline();return gg(this.interruptReasons_)&&e}}oi.nextPersistentConnectionId_=0;oi.nextConnectionId_=0;class G{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new G(e,n)}}class Bd{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new G(mo,e),s=new G(mo,n);return this.compare(i,s)!==0}minPost(){return G.MIN}}let $c;class JT extends Bd{static get __EMPTY_NODE(){return $c}static set __EMPTY_NODE(e){$c=e}compare(e,n){return cr(e.name,n.name)}isDefinedOn(e){throw To("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return G.MIN}maxPost(){return new G(er,$c)}makePost(e,n){return R(typeof e=="string","KeyIndex indexValue must always be a string."),new G(e,$c)}toString(){return".key"}}const Qr=new JT;class Uc{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Xe{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??Xe.RED,this.left=s??Ut.EMPTY_NODE,this.right=r??Ut.EMPTY_NODE}copy(e,n,i,s,r){return new Xe(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return r<0?s=s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ut.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,s;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return Ut.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Xe.RED=!0;Xe.BLACK=!1;class g4{copy(e,n,i,s,r){return this}insert(e,n,i){return new Xe(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ut{constructor(e,n=Ut.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ut(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Xe.BLACK,null,null))}remove(e){return new Ut(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Xe.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Uc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Uc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Uc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Uc(this.root_,null,this.comparator_,!0,e)}}Ut.EMPTY_NODE=new g4;function m4(t,e){return cr(t.name,e.name)}function Oy(t,e){return cr(t,e)}let Zg;function y4(t){Zg=t}const ZT=function(t){return typeof t=="number"?"number:"+AT(t):"string:"+t},eI=function(t){if(t.isLeafNode()){const e=t.val();R(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wn(e,".sv"),"Priority must be a string or number.")}else R(t===Zg||t.isEmpty(),"priority of unexpected type.");R(t===Zg||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let x1;class Ge{constructor(e,n=Ge.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),eI(this.priorityNode_)}static set __childrenNodeConstructor(e){x1=e}static get __childrenNodeConstructor(){return x1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ge(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ge.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Q(e)?this:K(e)===".priority"?this.priorityNode_:Ge.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ge.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=K(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(R(i!==".priority"||os(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Ge.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+ZT(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=AT(this.value_):e+=this.value_,this.lazyHash_=NT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ge.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ge.__childrenNodeConstructor?-1:(R(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,s=Ge.VALUE_TYPE_ORDER.indexOf(n),r=Ge.VALUE_TYPE_ORDER.indexOf(i);return R(s>=0,"Unknown leaf type: "+n),R(r>=0,"Unknown leaf type: "+i),s===r?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ge.VALUE_TYPE_ORDER=["object","boolean","number","string"];let tI,nI;function _4(t){tI=t}function v4(t){nI=t}class w4 extends Bd{compare(e,n){const i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?cr(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return G.MIN}maxPost(){return new G(er,new Ge("[PRIORITY-POST]",nI))}makePost(e,n){const i=tI(e);return new G(n,new Ge("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ae=new w4;const E4=Math.log(2);class x4{constructor(e){const n=r=>parseInt(Math.log(r)/E4,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const wh=function(t,e,n,i){t.sort(e);const s=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new Xe(d,h.node,Xe.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=s(l,f),g=s(f+1,c);return h=t[f],d=n?n(h):h,new Xe(d,h.node,Xe.BLACK,p,g)}},r=function(l){let c=null,u=null,h=t.length;const d=function(p,g){const v=h-p,y=h;h-=p;const m=s(v+1,y),_=t[v],w=n?n(_):_;f(new Xe(w,_.node,g,null,m))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const g=l.nextBitIsOne(),v=Math.pow(2,l.count-(p+1));g?d(v,Xe.BLACK):(d(v,Xe.BLACK),d(v,Xe.RED))}return u},o=new x4(t.length),a=r(o);return new Ut(i||e,a)};let tp;const pr={};class ii{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return R(pr&&Ae,"ChildrenNode.ts has not been loaded"),tp=tp||new ii({".priority":pr},{".priority":Ae}),tp}get(e){const n=ro(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ut?n:null}hasIndex(e){return Wn(this.indexSet_,e.toString())}addIndex(e,n){R(e!==Qr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const r=n.getIterator(G.Wrap);let o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=wh(i,e.getCompare()):a=pr;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ii(u,c)}addToIndexes(e,n){const i=Ju(this.indexes_,(s,r)=>{const o=ro(this.indexSet_,r);if(R(o,"Missing index implementation for "+r),s===pr)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(G.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),wh(a,o.getCompare())}else return pr;else{const a=n.get(e.name);let l=s;return a&&(l=l.remove(new G(e.name,a))),l.insert(e,e.node)}});return new ii(i,this.indexSet_)}removeFromIndexes(e,n){const i=Ju(this.indexes_,s=>{if(s===pr)return s;{const r=n.get(e.name);return r?s.remove(new G(e.name,r)):s}});return new ii(i,this.indexSet_)}}let Xo;class U{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&eI(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xo||(Xo=new U(new Ut(Oy),null,ii.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xo}updatePriority(e){return this.children_.isEmpty()?this:new U(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xo:n}}getChild(e){const n=K(e);return n===null?this:this.getImmediateChild(n).getChild(me(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(R(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new G(e,n);let s,r;n.isEmpty()?(s=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(i,this.children_));const o=s.isEmpty()?Xo:this.priorityNode_;return new U(s,o,r)}}updateChild(e,n){const i=K(e);if(i===null)return n;{R(K(e)!==".priority"||os(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(me(e),n);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,s=0,r=!0;if(this.forEachChild(Ae,(o,a)=>{n[o]=a.val(e),i++,r&&U.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):r=!1}),!e&&r&&s<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+ZT(this.getPriority().val())+":"),this.forEachChild(Ae,(n,i)=>{const s=i.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":NT(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const s=this.resolveIndex_(i);if(s){const r=s.getPredecessorKey(new G(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new G(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new G(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,G.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)<0;)s.getNext(),r=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,G.Wrap);let r=s.peek();for(;r!=null&&n.compare(r,e)>0;)s.getNext(),r=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===lc?-1:0}withIndex(e){if(e===Qr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new U(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Qr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Ae),s=n.getIterator(Ae);let r=i.getNext(),o=s.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=i.getNext(),o=s.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Qr?null:this.indexMap_.get(e.toString())}}U.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class S4 extends U{constructor(){super(new Ut(Oy),U.EMPTY_NODE,ii.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return U.EMPTY_NODE}isEmpty(){return!1}}const lc=new S4;Object.defineProperties(G,{MIN:{value:new G(mo,U.EMPTY_NODE)},MAX:{value:new G(er,lc)}});JT.__EMPTY_NODE=U.EMPTY_NODE;Ge.__childrenNodeConstructor=U;y4(lc);v4(lc);const C4=!0;function Je(t,e=null){if(t===null)return U.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),R(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ge(n,Je(e))}if(!(t instanceof Array)&&C4){const n=[];let i=!1;if(ht(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=Je(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new G(o,l)))}}),n.length===0)return U.EMPTY_NODE;const r=wh(n,m4,o=>o.name,Oy);if(i){const o=wh(n,Ae.getCompare());return new U(r,Je(e),new ii({".priority":o},{".priority":Ae}))}else return new U(r,Je(e),ii.Default)}else{let n=U.EMPTY_NODE;return ht(t,(i,s)=>{if(Wn(t,i)&&i.substring(0,1)!=="."){const r=Je(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Je(e))}}_4(Je);class b4 extends Bd{constructor(e){super(),this.indexPath_=e,R(!Q(e)&&K(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?cr(e.name,n.name):r}makePost(e,n){const i=Je(e),s=U.EMPTY_NODE.updateChild(this.indexPath_,i);return new G(n,s)}maxPost(){const e=U.EMPTY_NODE.updateChild(this.indexPath_,lc);return new G(er,e)}toString(){return vl(this.indexPath_,0).join("/")}}class k4 extends Bd{compare(e,n){const i=e.node.compareTo(n.node);return i===0?cr(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return G.MIN}maxPost(){return G.MAX}makePost(e,n){const i=Je(e);return new G(n,i)}toString(){return".value"}}const T4=new k4;function iI(t){return{type:"value",snapshotNode:t}}function yo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function wl(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function El(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function I4(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}class Ly{constructor(e){this.index_=e}updateChild(e,n,i,s,r,o){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(wl(n,a)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(yo(n,i)):o.trackChildChange(El(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ae,(s,r)=>{n.hasChild(s)||i.trackChildChange(wl(s,r))}),n.isLeafNode()||n.forEachChild(Ae,(s,r)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange(El(s,r,o))}else i.trackChildChange(yo(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?U.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class xl{constructor(e){this.indexedFilter_=new Ly(e.getIndex()),this.index_=e.getIndex(),this.startPost_=xl.getStartPost_(e),this.endPost_=xl.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,r,o){return this.matches(new G(n,i))||(i=U.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,r,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=U.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(U.EMPTY_NODE);const r=this;return n.forEachChild(Ae,(o,a)=>{r.matches(new G(o,a))||(s=s.updateImmediateChild(o,U.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}class N4{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new xl(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,r,o){return this.rangedFilter_.matches(new G(n,i))||(i=U.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,r,o):this.fullLimitUpdateChild_(e,n,i,r,o)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=U.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=U.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(U.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,U.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,r){let o;if(this.reverse_){const h=this.index_.getCompare();o=(d,f)=>h(f,d)}else o=this.index_.getCompare();const a=e;R(a.numChildren()===this.limit_,"");const l=new G(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){const h=a.getImmediateChild(n);let d=s.getChildAfterChild(this.index_,c,this.reverse_);for(;d!=null&&(d.name===n||a.hasChild(d.name));)d=s.getChildAfterChild(this.index_,d,this.reverse_);const f=d==null?1:o(d,l);if(u&&!i.isEmpty()&&f>=0)return r!=null&&r.trackChildChange(El(n,i,h)),a.updateImmediateChild(n,i);{r!=null&&r.trackChildChange(wl(n,h));const g=a.updateImmediateChild(n,U.EMPTY_NODE);return d!=null&&this.rangedFilter_.matches(d)?(r!=null&&r.trackChildChange(yo(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}}else return i.isEmpty()?e:u&&o(c,l)>=0?(r!=null&&(r.trackChildChange(wl(c.name,c.node)),r.trackChildChange(yo(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,U.EMPTY_NODE)):e}}class Fy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mo}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:er}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const e=new Fy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function R4(t){return t.loadsAllData()?new Ly(t.getIndex()):t.hasLimit()?new N4(t):new xl(t)}function S1(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Ae?n="$priority":t.index_===T4?n="$value":t.index_===Qr?n="$key":(R(t.index_ instanceof b4,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ze(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Ze(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Ze(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Ze(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Ze(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function C1(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ae&&(e.i=t.index_.toString()),e}class Eh extends GT{constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=ac("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,s){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=Eh.getListenId_(e,i),a={};this.listens_[o]=a;const l=S1(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),ro(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",s(d,null)}})}unlisten(e,n){const i=Eh.getListenId_(e,n);delete this.listens_[i]}get(e){const n=S1(e._queryParams),i=e._path.toString(),s=new Ul;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Io(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=il(a.responseText)}catch{At("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&At("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class A4{constructor(){this.rootNode_=U.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function xh(){return{value:null,children:new Map}}function sI(t,e,n){if(Q(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=K(e);t.children.has(i)||t.children.set(i,xh());const s=t.children.get(i);e=me(e),sI(s,e,n)}}function em(t,e,n){t.value!==null?n(e,t.value):P4(t,(i,s)=>{const r=new de(e.toString()+"/"+i);em(s,r,n)})}function P4(t,e){t.children.forEach((n,i)=>{e(i,n)})}class D4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ht(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}}const b1=10*1e3,M4=30*1e3,O4=5*60*1e3;class L4{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new D4(e);const i=b1+(M4-b1)*Math.random();Aa(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;ht(e,(s,r)=>{r>0&&Wn(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Aa(this.reportStats_.bind(this),Math.floor(Math.random()*2*O4))}}var _n;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_n||(_n={}));function $y(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Uy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zy(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Sh{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=_n.ACK_USER_WRITE,this.source=$y()}operationForChild(e){if(Q(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new de(e));return new Sh(oe(),n,this.revert)}}else return R(K(this.path)===e,"operationForChild called for unrelated child."),new Sh(me(this.path),this.affectedTree,this.revert)}}class Sl{constructor(e,n){this.source=e,this.path=n,this.type=_n.LISTEN_COMPLETE}operationForChild(e){return Q(this.path)?new Sl(this.source,oe()):new Sl(this.source,me(this.path))}}class tr{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=_n.OVERWRITE}operationForChild(e){return Q(this.path)?new tr(this.source,oe(),this.snap.getImmediateChild(e)):new tr(this.source,me(this.path),this.snap)}}class _o{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=_n.MERGE}operationForChild(e){if(Q(this.path)){const n=this.children.subtree(new de(e));return n.isEmpty()?null:n.value?new tr(this.source,oe(),n.value):new _o(this.source,oe(),n)}else return R(K(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _o(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class nr{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Q(e))return this.isFullyInitialized()&&!this.filtered_;const n=K(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class F4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function $4(t,e,n,i){const s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(I4(o.childName,o.snapshotNode))}),Jo(t,s,"child_removed",e,i,n),Jo(t,s,"child_added",e,i,n),Jo(t,s,"child_moved",r,i,n),Jo(t,s,"child_changed",e,i,n),Jo(t,s,"value",e,i,n),s}function Jo(t,e,n,i,s,r){const o=i.filter(a=>a.type===n);o.sort((a,l)=>z4(t,a,l)),o.forEach(a=>{const l=U4(t,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function U4(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function z4(t,e,n){if(e.childName==null||n.childName==null)throw To("Should only compare child_ events.");const i=new G(e.childName,e.snapshotNode),s=new G(n.childName,n.snapshotNode);return t.index_.compare(i,s)}function jd(t,e){return{eventCache:t,serverCache:e}}function Pa(t,e,n,i){return jd(new nr(e,n,i),t.serverCache)}function rI(t,e,n,i){return jd(t.eventCache,new nr(e,n,i))}function tm(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ir(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let np;const V4=()=>(np||(np=new Ut(b3)),np);class pe{constructor(e,n=V4()){this.value=e,this.children=n}static fromObject(e){let n=new pe(null);return ht(e,(i,s)=>{n=n.set(new de(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:oe(),value:this.value};if(Q(e))return null;{const i=K(e),s=this.children.get(i);if(s!==null){const r=s.findRootMostMatchingPathAndValue(me(e),n);return r!=null?{path:Re(new de(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Q(e))return this;{const n=K(e),i=this.children.get(n);return i!==null?i.subtree(me(e)):new pe(null)}}set(e,n){if(Q(e))return new pe(n,this.children);{const i=K(e),r=(this.children.get(i)||new pe(null)).set(me(e),n),o=this.children.insert(i,r);return new pe(this.value,o)}}remove(e){if(Q(e))return this.children.isEmpty()?new pe(null):new pe(null,this.children);{const n=K(e),i=this.children.get(n);if(i){const s=i.remove(me(e));let r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new pe(null):new pe(this.value,r)}else return this}}get(e){if(Q(e))return this.value;{const n=K(e),i=this.children.get(n);return i?i.get(me(e)):null}}setTree(e,n){if(Q(e))return n;{const i=K(e),r=(this.children.get(i)||new pe(null)).setTree(me(e),n);let o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new pe(this.value,o)}}fold(e){return this.fold_(oe(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Re(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,oe(),n)}findOnPath_(e,n,i){const s=this.value?i(n,this.value):!1;if(s)return s;if(Q(e))return null;{const r=K(e),o=this.children.get(r);return o?o.findOnPath_(me(e),Re(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,oe(),n)}foreachOnPath_(e,n,i){if(Q(e))return this;{this.value&&i(n,this.value);const s=K(e),r=this.children.get(s);return r?r.foreachOnPath_(me(e),Re(n,s),i):new pe(null)}}foreach(e){this.foreach_(oe(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Re(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}class Sn{constructor(e){this.writeTree_=e}static empty(){return new Sn(new pe(null))}}function Da(t,e,n){if(Q(e))return new Sn(new pe(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let r=i.value;const o=$t(s,e);return r=r.updateChild(o,n),new Sn(t.writeTree_.set(s,r))}else{const s=new pe(n),r=t.writeTree_.setTree(e,s);return new Sn(r)}}}function nm(t,e,n){let i=t;return ht(n,(s,r)=>{i=Da(i,Re(e,s),r)}),i}function k1(t,e){if(Q(e))return Sn.empty();{const n=t.writeTree_.setTree(e,new pe(null));return new Sn(n)}}function im(t,e){return ur(t,e)!=null}function ur(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild($t(n.path,e)):null}function T1(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ae,(i,s)=>{e.push(new G(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new G(i,s.value))}),e}function Xi(t,e){if(Q(e))return t;{const n=ur(t,e);return n!=null?new Sn(new pe(n)):new Sn(t.writeTree_.subtree(e))}}function sm(t){return t.writeTree_.isEmpty()}function vo(t,e){return oI(oe(),t.writeTree_,e)}function oI(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(R(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=oI(Re(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Re(t,".priority"),i)),n}}function Vy(t,e){return uI(e,t)}function B4(t,e,n,i,s){R(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=Da(t.visibleWrites,e,n)),t.lastWriteId=i}function j4(t,e,n,i){R(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=nm(t.visibleWrites,e,n),t.lastWriteId=i}function W4(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function H4(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);R(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&q4(a,i.path)?s=!1:an(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return K4(t),!0;if(i.snap)t.visibleWrites=k1(t.visibleWrites,i.path);else{const a=i.children;ht(a,l=>{t.visibleWrites=k1(t.visibleWrites,Re(i.path,l))})}return!0}else return!1}function q4(t,e){if(t.snap)return an(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&an(Re(t.path,n),e))return!0;return!1}function K4(t){t.visibleWrites=aI(t.allWrites,G4,oe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function G4(t){return t.visible}function aI(t,e,n){let i=Sn.empty();for(let s=0;s<t.length;++s){const r=t[s];if(e(r)){const o=r.path;let a;if(r.snap)an(n,o)?(a=$t(n,o),i=Da(i,a,r.snap)):an(o,n)&&(a=$t(o,n),i=Da(i,oe(),r.snap.getChild(a)));else if(r.children){if(an(n,o))a=$t(n,o),i=nm(i,a,r.children);else if(an(o,n))if(a=$t(o,n),Q(a))i=nm(i,oe(),r.children);else{const l=ro(r.children,K(a));if(l){const c=l.getChild(me(a));i=Da(i,oe(),c)}}}else throw To("WriteRecord should have .snap or .children")}}return i}function lI(t,e,n,i,s){if(!i&&!s){const r=ur(t.visibleWrites,e);if(r!=null)return r;{const o=Xi(t.visibleWrites,e);if(sm(o))return n;if(n==null&&!im(o,oe()))return null;{const a=n||U.EMPTY_NODE;return vo(o,a)}}}else{const r=Xi(t.visibleWrites,e);if(!s&&sm(r))return n;if(!s&&n==null&&!im(r,oe()))return null;{const o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(an(c.path,e)||an(e,c.path))},a=aI(t.allWrites,o,e),l=n||U.EMPTY_NODE;return vo(a,l)}}}function Q4(t,e,n){let i=U.EMPTY_NODE;const s=ur(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Ae,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){const r=Xi(t.visibleWrites,e);return n.forEachChild(Ae,(o,a)=>{const l=vo(Xi(r,new de(o)),a);i=i.updateImmediateChild(o,l)}),T1(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const r=Xi(t.visibleWrites,e);return T1(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Y4(t,e,n,i,s){R(i||s,"Either existingEventSnap or existingServerSnap must exist");const r=Re(e,n);if(im(t.visibleWrites,r))return null;{const o=Xi(t.visibleWrites,r);return sm(o)?s.getChild(n):vo(o,s.getChild(n))}}function X4(t,e,n,i){const s=Re(e,n),r=ur(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){const o=Xi(t.visibleWrites,s);return vo(o,i.getNode().getImmediateChild(n))}else return null}function J4(t,e){return ur(t.visibleWrites,e)}function Z4(t,e,n,i,s,r,o){let a;const l=Xi(t.visibleWrites,e),c=ur(l,oe());if(c!=null)a=c;else if(n!=null)a=vo(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let f=d.getNext();for(;f&&u.length<s;)h(f,i)!==0&&u.push(f),f=d.getNext();return u}else return[]}function eU(){return{visibleWrites:Sn.empty(),allWrites:[],lastWriteId:-1}}function Ch(t,e,n,i){return lI(t.writeTree,t.treePath,e,n,i)}function By(t,e){return Q4(t.writeTree,t.treePath,e)}function I1(t,e,n,i){return Y4(t.writeTree,t.treePath,e,n,i)}function bh(t,e){return J4(t.writeTree,Re(t.treePath,e))}function tU(t,e,n,i,s,r){return Z4(t.writeTree,t.treePath,e,n,i,s,r)}function jy(t,e,n){return X4(t.writeTree,t.treePath,e,n)}function cI(t,e){return uI(Re(t.treePath,e),t.writeTree)}function uI(t,e){return{treePath:t,writeTree:e}}class nU{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;R(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),R(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,El(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,wl(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,yo(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,El(i,e.snapshotNode,s.oldSnap));else throw To("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}class iU{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const hI=new iU;class Wy{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new nr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jy(this.writes_,e,i)}}getChildAfterChild(e,n,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ir(this.viewCache_),r=tU(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}}function sU(t){return{filter:t}}function rU(t,e){R(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function oU(t,e,n,i,s){const r=new nU;let o,a;if(n.type===_n.OVERWRITE){const c=n;c.source.fromUser?o=rm(t,e,c.path,c.snap,i,s,r):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Q(c.path),o=kh(t,e,c.path,c.snap,i,s,a,r))}else if(n.type===_n.MERGE){const c=n;c.source.fromUser?o=lU(t,e,c.path,c.children,i,s,r):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=om(t,e,c.path,c.children,i,s,a,r))}else if(n.type===_n.ACK_USER_WRITE){const c=n;c.revert?o=hU(t,e,c.path,i,s,r):o=cU(t,e,c.path,c.affectedTree,i,s,r)}else if(n.type===_n.LISTEN_COMPLETE)o=uU(t,e,n.path,i,r);else throw To("Unknown operation type: "+n.type);const l=r.getChanges();return aU(e,o,l),{viewCache:o,changes:l}}function aU(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=tm(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(iI(tm(e)))}}function dI(t,e,n,i,s,r){const o=e.eventCache;if(bh(i,n)!=null)return e;{let a,l;if(Q(n))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=ir(e),u=c instanceof U?c:U.EMPTY_NODE,h=By(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=Ch(i,ir(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=K(n);if(c===".priority"){R(os(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=I1(i,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=me(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=I1(i,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=jy(i,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return Pa(e,a,o.isFullyInitialized()||Q(n),t.filter.filtersNodes())}}function kh(t,e,n,i,s,r,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(Q(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=K(n);if(!l.isCompleteForPath(n)&&os(n)>1)return e;const p=me(n),v=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),v):c=u.updateChild(l.getNode(),f,v,p,hI,null)}const h=rI(e,c,l.isFullyInitialized()||Q(n),u.filtersNodes()),d=new Wy(s,h,r);return dI(t,h,n,s,d,a)}function rm(t,e,n,i,s,r,o){const a=e.eventCache;let l,c;const u=new Wy(s,e,r);if(Q(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Pa(e,c,!0,t.filter.filtersNodes());else{const h=K(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Pa(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=me(n),f=a.getNode().getImmediateChild(h);let p;if(Q(d))p=i;else{const g=u.getCompleteChild(h);g!=null?Py(d)===".priority"&&g.getChild(YT(d)).isEmpty()?p=g:p=g.updateChild(d,i):p=U.EMPTY_NODE}if(f.equals(p))l=e;else{const g=t.filter.updateChild(a.getNode(),h,p,d,u,o);l=Pa(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function N1(t,e){return t.eventCache.isCompleteForChild(e)}function lU(t,e,n,i,s,r,o){let a=e;return i.foreach((l,c)=>{const u=Re(n,l);N1(e,K(u))&&(a=rm(t,a,u,c,s,r,o))}),i.foreach((l,c)=>{const u=Re(n,l);N1(e,K(u))||(a=rm(t,a,u,c,s,r,o))}),a}function R1(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function om(t,e,n,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;Q(n)?c=i:c=new pe(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),p=R1(t,f,d);l=kh(t,l,new de(h),p,s,r,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const p=e.serverCache.getNode().getImmediateChild(h),g=R1(t,p,d);l=kh(t,l,new de(h),g,s,r,o,a)}}),l}function cU(t,e,n,i,s,r,o){if(bh(s,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(Q(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return kh(t,e,n,l.getNode().getChild(n),s,r,a,o);if(Q(n)){let c=new pe(null);return l.getNode().forEachChild(Qr,(u,h)=>{c=c.set(new de(u),h)}),om(t,e,n,c,s,r,a,o)}else return e}else{let c=new pe(null);return i.foreach((u,h)=>{const d=Re(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),om(t,e,n,c,s,r,a,o)}}function uU(t,e,n,i,s){const r=e.serverCache,o=rI(e,r.getNode(),r.isFullyInitialized()||Q(n),r.isFiltered());return dI(t,o,n,i,hI,s)}function hU(t,e,n,i,s,r){let o;if(bh(i,n)!=null)return e;{const a=new Wy(i,e,s),l=e.eventCache.getNode();let c;if(Q(n)||K(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Ch(i,ir(e));else{const h=e.serverCache.getNode();R(h instanceof U,"serverChildren would be complete if leaf node"),u=By(i,h)}u=u,c=t.filter.updateFullNode(l,u,r)}else{const u=K(n);let h=jy(i,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,me(n),a,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,U.EMPTY_NODE,me(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Ch(i,ir(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||bh(i,oe())!=null,Pa(e,c,o,t.filter.filtersNodes())}}class dU{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new Ly(i.getIndex()),r=R4(i);this.processor_=sU(r);const o=n.serverCache,a=n.eventCache,l=s.updateFullNode(U.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(U.EMPTY_NODE,a.getNode(),null),u=new nr(l,o.isFullyInitialized(),s.filtersNodes()),h=new nr(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=jd(h,u),this.eventGenerator_=new F4(this.query_)}get query(){return this.query_}}function fU(t){return t.viewCache_.serverCache.getNode()}function pU(t,e){const n=ir(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Q(e)&&!n.getImmediateChild(K(e)).isEmpty())?n.getChild(e):null}function A1(t){return t.eventRegistrations_.length===0}function gU(t,e){t.eventRegistrations_.push(e)}function P1(t,e,n){const i=[];if(n){R(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function D1(t,e,n,i){e.type===_n.MERGE&&e.source.queryId!==null&&(R(ir(t.viewCache_),"We should always have a full cache before handling merges"),R(tm(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,r=oU(t.processor_,s,e,n,i);return rU(t.processor_,r.viewCache),R(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,fI(t,r.changes,r.viewCache.eventCache.getNode(),null)}function mU(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ae,(r,o)=>{i.push(yo(r,o))}),n.isFullyInitialized()&&i.push(iI(n.getNode())),fI(t,i,n.getNode(),e)}function fI(t,e,n,i){const s=i?[i]:t.eventRegistrations_;return $4(t.eventGenerator_,e,n,s)}let Th;class yU{constructor(){this.views=new Map}}function _U(t){R(!Th,"__referenceConstructor has already been defined"),Th=t}function vU(){return R(Th,"Reference.ts has not been loaded"),Th}function wU(t){return t.views.size===0}function Hy(t,e,n,i){const s=e.source.queryId;if(s!==null){const r=t.views.get(s);return R(r!=null,"SyncTree gave us an op for an invalid query."),D1(r,e,n,i)}else{let r=[];for(const o of t.views.values())r=r.concat(D1(o,e,n,i));return r}}function EU(t,e,n,i,s){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let a=Ch(n,s?i:null),l=!1;a?l=!0:i instanceof U?(a=By(n,i),l=!1):(a=U.EMPTY_NODE,l=!1);const c=jd(new nr(a,l,!1),new nr(i,s,!1));return new dU(e,c)}return o}function xU(t,e,n,i,s,r){const o=EU(t,e,i,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),gU(o,n),mU(o,n)}function SU(t,e,n,i){const s=e._queryIdentifier,r=[];let o=[];const a=as(t);if(s==="default")for(const[l,c]of t.views.entries())o=o.concat(P1(c,n,i)),A1(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const l=t.views.get(s);l&&(o=o.concat(P1(l,n,i)),A1(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!as(t)&&r.push(new(vU())(e._repo,e._path)),{removed:r,events:o}}function pI(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yr(t,e){let n=null;for(const i of t.views.values())n=n||pU(i,e);return n}function gI(t,e){if(e._queryParams.loadsAllData())return Wd(t);{const i=e._queryIdentifier;return t.views.get(i)}}function mI(t,e){return gI(t,e)!=null}function as(t){return Wd(t)!=null}function Wd(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Ih;function CU(t){R(!Ih,"__referenceConstructor has already been defined"),Ih=t}function bU(){return R(Ih,"Reference.ts has not been loaded"),Ih}let kU=1;class M1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pe(null),this.pendingWriteTree_=eU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function yI(t,e,n,i,s){return B4(t.pendingWriteTree_,e,n,i,s),s?$o(t,new tr($y(),e,n)):[]}function TU(t,e,n,i){j4(t.pendingWriteTree_,e,n,i);const s=pe.fromObject(n);return $o(t,new _o($y(),e,s))}function Di(t,e,n=!1){const i=W4(t.pendingWriteTree_,e);if(H4(t.pendingWriteTree_,e)){let r=new pe(null);return i.snap!=null?r=r.set(oe(),!0):ht(i.children,o=>{r=r.set(new de(o),!0)}),$o(t,new Sh(i.path,r,n))}else return[]}function Hd(t,e,n){return $o(t,new tr(Uy(),e,n))}function IU(t,e,n){const i=pe.fromObject(n);return $o(t,new _o(Uy(),e,i))}function NU(t,e){return $o(t,new Sl(Uy(),e))}function RU(t,e,n){const i=Ky(t,n);if(i){const s=Gy(i),r=s.path,o=s.queryId,a=$t(r,e),l=new Sl(zy(o),a);return Qy(t,r,l)}else return[]}function am(t,e,n,i,s=!1){const r=e._path,o=t.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||mI(o,e))){const l=SU(o,e,n,i);wU(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=l.removed;if(a=l.events,!s){const u=c.findIndex(d=>d._queryParams.loadsAllData())!==-1,h=t.syncPointTree_.findOnPath(r,(d,f)=>as(f));if(u&&!h){const d=t.syncPointTree_.subtree(r);if(!d.isEmpty()){const f=DU(d);for(let p=0;p<f.length;++p){const g=f[p],v=g.query,y=wI(t,g);t.listenProvider_.startListening(Ma(v),Nh(t,v),y.hashFn,y.onComplete)}}}!h&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(Ma(e),null):c.forEach(d=>{const f=t.queryToTagMap.get(qd(d));t.listenProvider_.stopListening(Ma(d),f)}))}MU(t,c)}return a}function AU(t,e,n,i){const s=Ky(t,i);if(s!=null){const r=Gy(s),o=r.path,a=r.queryId,l=$t(o,e),c=new tr(zy(a),l,n);return Qy(t,o,c)}else return[]}function PU(t,e,n,i){const s=Ky(t,i);if(s){const r=Gy(s),o=r.path,a=r.queryId,l=$t(o,e),c=pe.fromObject(n),u=new _o(zy(a),l,c);return Qy(t,o,u)}else return[]}function O1(t,e,n,i=!1){const s=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(s,(d,f)=>{const p=$t(d,s);r=r||Yr(f,p),o=o||as(f)});let a=t.syncPointTree_.get(s);a?(o=o||as(a),r=r||Yr(a,oe())):(a=new yU,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=U.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Yr(p,oe());g&&(r=r.updateImmediateChild(f,g))}));const c=mI(a,e);if(!c&&!e._queryParams.loadsAllData()){const d=qd(e);R(!t.queryToTagMap.has(d),"View does not exist, but we have a tag");const f=OU();t.queryToTagMap.set(d,f),t.tagToQueryMap.set(f,d)}const u=Vy(t.pendingWriteTree_,s);let h=xU(a,e,n,u,r,l);if(!c&&!o&&!i){const d=gI(a,e);h=h.concat(LU(t,e,d))}return h}function qy(t,e,n){const s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=$t(o,e),c=Yr(a,l);if(c)return c});return lI(s,e,r,n,!0)}function $o(t,e){return _I(e,t.syncPointTree_,null,Vy(t.pendingWriteTree_,oe()))}function _I(t,e,n,i){if(Q(t.path))return vI(t,e,n,i);{const s=e.get(oe());n==null&&s!=null&&(n=Yr(s,oe()));let r=[];const o=K(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=cI(i,o);r=r.concat(_I(a,l,c,u))}return s&&(r=r.concat(Hy(s,t,i,n))),r}}function vI(t,e,n,i){const s=e.get(oe());n==null&&s!=null&&(n=Yr(s,oe()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=cI(i,o),u=t.operationForChild(o);u&&(r=r.concat(vI(u,a,l,c)))}),s&&(r=r.concat(Hy(s,t,i,n))),r}function wI(t,e){const n=e.query,i=Nh(t,n);return{hashFn:()=>(fU(e)||U.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?RU(t,n._path,i):NU(t,n._path);{const r=I3(s,n);return am(t,n,null,r)}}}}function Nh(t,e){const n=qd(e);return t.queryToTagMap.get(n)}function qd(t){return t._path.toString()+"$"+t._queryIdentifier}function Ky(t,e){return t.tagToQueryMap.get(e)}function Gy(t){const e=t.indexOf("$");return R(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new de(t.substr(0,e))}}function Qy(t,e,n){const i=t.syncPointTree_.get(e);R(i,"Missing sync point for query tag that we're tracking");const s=Vy(t.pendingWriteTree_,e);return Hy(i,n,s,null)}function DU(t){return t.fold((e,n,i)=>{if(n&&as(n))return[Wd(n)];{let s=[];return n&&(s=pI(n)),ht(i,(r,o)=>{s=s.concat(o)}),s}})}function Ma(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(bU())(t._repo,t._path):t}function MU(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const s=qd(i),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function OU(){return kU++}function LU(t,e,n){const i=e._path,s=Nh(t,e),r=wI(t,n),o=t.listenProvider_.startListening(Ma(e),s,r.hashFn,r.onComplete),a=t.syncPointTree_.subtree(i);if(s)R(!as(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,h)=>{if(!Q(c)&&u&&as(u))return[Wd(u).query];{let d=[];return u&&(d=d.concat(pI(u).map(f=>f.query))),ht(h,(f,p)=>{d=d.concat(p)}),d}});for(let c=0;c<l.length;++c){const u=l[c];t.listenProvider_.stopListening(Ma(u),Nh(t,u))}}return o}class Yy{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Yy(n)}node(){return this.node_}}class Xy{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Re(this.path_,e);return new Xy(this.syncTree_,n)}node(){return qy(this.syncTree_,this.path_)}}const FU=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},L1=function(t,e,n){if(!t||typeof t!="object")return t;if(R(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return $U(t[".sv"],e,n);if(typeof t[".sv"]=="object")return UU(t[".sv"],e);R(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},$U=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:R(!1,"Unexpected server value: "+t)}},UU=function(t,e,n){t.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&R(!1,"Unexpected increment value: "+i);const s=e.node();if(R(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s.getValue();return typeof o!="number"?i:o+i},EI=function(t,e,n,i){return Jy(e,new Xy(n,t),i)},xI=function(t,e,n){return Jy(t,new Yy(e),n)};function Jy(t,e,n){const i=t.getPriority().val(),s=L1(i,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=L1(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Ge(a,Je(s)):t}else{const o=t;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Ge(s))),o.forEachChild(Ae,(a,l)=>{const c=Jy(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}class Zy{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function e_(t,e){let n=e instanceof de?e:new de(e),i=t,s=K(n);for(;s!==null;){const r=ro(i.node.children,s)||{children:{},childCount:0};i=new Zy(s,i,r),n=me(n),s=K(n)}return i}function Uo(t){return t.node.value}function SI(t,e){t.node.value=e,lm(t)}function CI(t){return t.node.childCount>0}function zU(t){return Uo(t)===void 0&&!CI(t)}function Kd(t,e){ht(t.node.children,(n,i)=>{e(new Zy(n,t,i))})}function bI(t,e,n,i){n&&!i&&e(t),Kd(t,s=>{bI(s,e,!0,i)}),n&&i&&e(t)}function VU(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function cc(t){return new de(t.parent===null?t.name:cc(t.parent)+"/"+t.name)}function lm(t){t.parent!==null&&BU(t.parent,t.name,t)}function BU(t,e,n){const i=zU(n),s=Wn(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,lm(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,lm(t))}const jU=/[\[\].#$\/\u0000-\u001F\u007F]/,WU=/[\[\].#$\u0000-\u001F\u007F]/,ip=10*1024*1024,t_=function(t){return typeof t=="string"&&t.length!==0&&!jU.test(t)},kI=function(t){return typeof t=="string"&&t.length!==0&&!WU.test(t)},HU=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kI(t)},qU=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Ty(t)||t&&typeof t=="object"&&Wn(t,".sv")},KU=function(t,e,n,i){i&&e===void 0||Gd(ad(t,"value"),e,n)},Gd=function(t,e,n){const i=n instanceof de?new l4(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Cs(i));if(typeof e=="function")throw new Error(t+"contains a function "+Cs(i)+" with contents = "+e.toString());if(Ty(e))throw new Error(t+"contains "+e.toString()+" "+Cs(i));if(typeof e=="string"&&e.length>ip/3&&ld(e)>ip)throw new Error(t+"contains a string greater than "+ip+" utf8 bytes "+Cs(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(ht(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!t_(o)))throw new Error(t+" contains an invalid key ("+o+") "+Cs(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);c4(i,o),Gd(t,a,i),u4(i)}),s&&r)throw new Error(t+' contains ".value" child '+Cs(i)+" in addition to actual children.")}},GU=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const r=vl(i);for(let o=0;o<r.length;o++)if(!(r[o]===".priority"&&o===r.length-1)){if(!t_(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(a4);let s=null;for(n=0;n<e.length;n++){if(i=e[n],s!==null&&an(s,i))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},QU=function(t,e,n,i){if(i&&e===void 0)return;const s=ad(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const r=[];ht(e,(o,a)=>{const l=new de(o);if(Gd(s,a,Re(n,l)),Py(l)===".priority"&&!qU(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(l)}),GU(s,r)},TI=function(t,e,n,i){if(!(i&&n===void 0)&&!kI(n))throw new Error(ad(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},YU=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),TI(t,e,n,i)},XU=function(t,e){if(K(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},JU=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!t_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!HU(n))throw new Error(ad(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class ZU{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qd(t,e){let n=null;for(let i=0;i<e.length;i++){const s=e[i],r=s.getPath();n!==null&&!Dy(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function II(t,e,n){Qd(t,n),NI(t,i=>Dy(i,e))}function Tn(t,e,n){Qd(t,n),NI(t,i=>an(i,e)||an(e,i))}function NI(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const s=t.eventLists_[i];if(s){const r=s.path;e(r)?(e5(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function e5(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Vs&&at("event: "+n.toString()),Fo(i)}}}const t5="repo_interrupt",n5=25;class i5{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZU,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xh(),this.transactionQueueTree_=new Zy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function s5(t,e,n){if(t.stats_=Ry(t.repoInfo_),t.forceRestClient_||P3())t.server_=new Eh(t.repoInfo_,(i,s,r,o)=>{F1(t,i,s,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$1(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ze(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new oi(t.repoInfo_,e,(i,s,r,o)=>{F1(t,i,s,r,o)},i=>{$1(t,i)},i=>{o5(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=F3(t.repoInfo_,()=>new L4(t.stats_,t.server_)),t.infoData_=new A4,t.infoSyncTree_=new M1({startListening:(i,s,r,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=Hd(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),n_(t,"connected",!1),t.serverSyncTree_=new M1({startListening:(i,s,r,o)=>(t.server_.listen(i,r,s,(a,l)=>{const c=o(a,l);Tn(t.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function r5(t){const n=t.infoData_.getNode(new de(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Yd(t){return FU({timestamp:r5(t)})}function F1(t,e,n,i,s){t.dataUpdateCount++;const r=new de(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(i){const l=Ju(n,c=>Je(c));o=PU(t.serverSyncTree_,r,l,s)}else{const l=Je(n);o=AU(t.serverSyncTree_,r,l,s)}else if(i){const l=Ju(n,c=>Je(c));o=IU(t.serverSyncTree_,r,l)}else{const l=Je(n);o=Hd(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=wo(t,r)),Tn(t.eventQueue_,a,o)}function $1(t,e){n_(t,"connected",e),e===!1&&c5(t)}function o5(t,e){ht(e,(n,i)=>{n_(t,n,i)})}function n_(t,e,n){const i=new de("/.info/"+e),s=Je(n);t.infoData_.updateSnapshot(i,s);const r=Hd(t.infoSyncTree_,i,s);Tn(t.eventQueue_,i,r)}function i_(t){return t.nextWriteId_++}function a5(t,e,n,i,s){Xd(t,"set",{path:e.toString(),value:n,priority:i});const r=Yd(t),o=Je(n,i),a=qy(t.serverSyncTree_,e),l=xI(o,a,r),c=i_(t),u=yI(t.serverSyncTree_,e,l,c,!0);Qd(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(d,f)=>{const p=d==="ok";p||At("set at "+e+" failed: "+d);const g=Di(t.serverSyncTree_,c,!p);Tn(t.eventQueue_,e,g),um(t,s,d,f)});const h=r_(t,e);wo(t,h),Tn(t.eventQueue_,h,[])}function l5(t,e,n,i){Xd(t,"update",{path:e.toString(),value:n});let s=!0;const r=Yd(t),o={};if(ht(n,(a,l)=>{s=!1,o[a]=EI(Re(e,a),Je(l),t.serverSyncTree_,r)}),s)at("update() called with empty data.  Don't do anything."),um(t,i,"ok",void 0);else{const a=i_(t),l=TU(t.serverSyncTree_,e,o,a);Qd(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,u)=>{const h=c==="ok";h||At("update at "+e+" failed: "+c);const d=Di(t.serverSyncTree_,a,!h),f=d.length>0?wo(t,e):e;Tn(t.eventQueue_,f,d),um(t,i,c,u)}),ht(n,c=>{const u=r_(t,Re(e,c));wo(t,u)}),Tn(t.eventQueue_,e,[])}}function c5(t){Xd(t,"onDisconnectEvents");const e=Yd(t),n=xh();em(t.onDisconnect_,oe(),(s,r)=>{const o=EI(s,r,t.serverSyncTree_,e);sI(n,s,o)});let i=[];em(n,oe(),(s,r)=>{i=i.concat(Hd(t.serverSyncTree_,s,r));const o=r_(t,s);wo(t,o)}),t.onDisconnect_=xh(),Tn(t.eventQueue_,oe(),i)}function u5(t,e,n){let i;K(e._path)===".info"?i=O1(t.infoSyncTree_,e,n):i=O1(t.serverSyncTree_,e,n),II(t.eventQueue_,e._path,i)}function cm(t,e,n){let i;K(e._path)===".info"?i=am(t.infoSyncTree_,e,n):i=am(t.serverSyncTree_,e,n),II(t.eventQueue_,e._path,i)}function h5(t){t.persistentConnection_&&t.persistentConnection_.interrupt(t5)}function Xd(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),at(n,...e)}function um(t,e,n,i){e&&Fo(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let r=s;i&&(r+=": "+i);const o=new Error(r);o.code=s,e(o)}})}function RI(t,e,n){return qy(t.serverSyncTree_,e,n)||U.EMPTY_NODE}function s_(t,e=t.transactionQueueTree_){if(e||Jd(t,e),Uo(e)){const n=PI(t,e);R(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&d5(t,cc(e),n)}else CI(e)&&Kd(e,n=>{s_(t,n)})}function d5(t,e,n){const i=n.map(c=>c.currentWriteId),s=RI(t,e,i);let r=s;const o=s.hash();for(let c=0;c<n.length;c++){const u=n[c];R(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=$t(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Xd(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(Di(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();Jd(t,e_(t.transactionQueueTree_,e)),s_(t,t.transactionQueueTree_),Tn(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)Fo(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{At("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}wo(t,e)}},o)}function wo(t,e){const n=AI(t,e),i=cc(n),s=PI(t,n);return f5(t,s,i),i}function f5(t,e,n){if(e.length===0)return;const i=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=$t(n,l.path);let u=!1,h;if(R(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(Di(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=n5)u=!0,h="maxretry",s=s.concat(Di(t.serverSyncTree_,l.currentWriteId,!0));else{const d=RI(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){Gd("transaction failed: Data returned ",f,l.path);let p=Je(f);typeof f=="object"&&f!=null&&Wn(f,".priority")||(p=p.updatePriority(d.getPriority()));const v=l.currentWriteId,y=Yd(t),m=xI(p,d,y);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=m,l.currentWriteId=i_(t),o.splice(o.indexOf(v),1),s=s.concat(yI(t.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally)),s=s.concat(Di(t.serverSyncTree_,v,!0))}else u=!0,h="nodata",s=s.concat(Di(t.serverSyncTree_,l.currentWriteId,!0))}Tn(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(h),!1,null))))}Jd(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Fo(i[a]);s_(t,t.transactionQueueTree_)}function AI(t,e){let n,i=t.transactionQueueTree_;for(n=K(e);n!==null&&Uo(i)===void 0;)i=e_(i,n),e=me(e),n=K(e);return i}function PI(t,e){const n=[];return DI(t,e,n),n.sort((i,s)=>i.order-s.order),n}function DI(t,e,n){const i=Uo(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);Kd(e,s=>{DI(t,s,n)})}function Jd(t,e){const n=Uo(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,SI(e,n.length>0?n:void 0)}Kd(e,i=>{Jd(t,i)})}function r_(t,e){const n=cc(AI(t,e)),i=e_(t.transactionQueueTree_,e);return VU(i,s=>{sp(t,s)}),sp(t,i),bI(i,s=>{sp(t,s)}),n}function sp(t,e){const n=Uo(e);if(n){const i=[];let s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(R(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(R(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Di(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?SI(e,void 0):n.length=r+1,Tn(t.eventQueue_,cc(e),s);for(let o=0;o<i.length;o++)Fo(i[o])}}function p5(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function g5(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):At(`Invalid query segment '${n}' in query '${t}'`)}return e}const U1=function(t,e){const n=m5(t),i=n.namespace;n.domain==="firebase.com"&&gi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&gi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||S3();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new VT(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new de(n.pathString)}},m5=function(t){let e="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(s=p5(t.substring(u,h)));const d=g5(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),r=i}"ns"in d&&(r=d.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};class MI{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ze(this.snapshot.exportVal())}}class OI{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class LI{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class o_{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return Q(this._path)?null:Py(this._path)}get ref(){return new _i(this._repo,this._path)}get _queryIdentifier(){const e=C1(this._queryParams),n=Iy(e);return n==="{}"?"default":n}get _queryObject(){return C1(this._queryParams)}isEqual(e){if(e=Be(e),!(e instanceof o_))return!1;const n=this._repo===e._repo,i=Dy(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+o4(this._path)}}class _i extends o_{constructor(e,n){super(e,n,new Fy,!1)}get parent(){const e=YT(this._path);return e===null?null:new _i(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Cl{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new de(e),i=Rh(this.ref,e);return new Cl(this._node.getChild(n),i,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new Cl(s,Rh(this.ref,i),Ae)))}hasChild(e){const n=new de(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function hm(t,e){return t=Be(t),t._checkNotDeleted("ref"),e!==void 0?Rh(t._root,e):t._root}function Rh(t,e){return t=Be(t),K(t._path)===null?YU("child","path",e,!1):TI("child","path",e,!1),new _i(t._repo,Re(t._path,e))}function y5(t,e){t=Be(t),XU("set",t._path),KU("set",e,t._path,!1);const n=new Ul;return a5(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function _5(t,e){QU("update",e,t._path,!1);const n=new Ul;return l5(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}class Zd{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new MI("value",this,new Cl(e.snapshotNode,new _i(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new OI(this,e,n):null}matches(e){return e instanceof Zd?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class ef{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new OI(this,e,n):null}createEvent(e,n){R(e.childName!=null,"Child events should have a childName.");const i=Rh(new _i(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new MI(e.type,this,new Cl(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ef?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function v5(t,e,n,i,s){let r;if(typeof i=="object"&&(r=void 0,s=i),typeof i=="function"&&(r=i),s&&s.onlyOnce){const l=n,c=(u,h)=>{cm(t._repo,t,a),l(u,h)};c.userCallback=n.userCallback,c.context=n.context,n=c}const o=new LI(n,r||void 0),a=e==="value"?new Zd(o):new ef(e,o);return u5(t._repo,t,a),()=>cm(t._repo,t,a)}function w5(t,e,n,i){return v5(t,"value",e,n,i)}function E5(t,e,n){let i=null;const s=n?new LI(n):null;e==="value"?i=new Zd(s):e&&(i=new ef(e,s)),cm(t._repo,t,i)}_U(_i);CU(_i);const x5="FIREBASE_DATABASE_EMULATOR_HOST",dm={};let S5=!1;function C5(t,e,n,i){t.repoInfo_=new VT(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),i&&(t.authTokenProvider_=i)}function b5(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||gi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),at("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=U1(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[x5]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=U1(r,s),a=o.repoInfo):l=!o.repoInfo.secure;const u=s&&l?new Gr(Gr.OWNER):new M3(t.name,t.options,e);JU("Invalid Firebase Database URL",o),Q(o.path)||gi("Database URL must point to the root of a Firebase Database (not including a child path).");const h=T5(a,t,u,new D3(t.name,n));return new I5(h,t)}function k5(t,e){const n=dm[e];(!n||n[t.key]!==t)&&gi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),h5(t),delete n[t.key]}function T5(t,e,n,i){let s=dm[e.name];s||(s={},dm[e.name]=s);let r=s[t.toURLString()];return r&&gi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new i5(t,S5,n,i),s[t.toURLString()]=r,r}class I5{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(s5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new _i(this._repo,oe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(k5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&gi("Cannot call "+e+" on a deleted database.")}}function N5(t=E0(),e){const n=Vl(t,"database").getImmediate({identifier:e}),i=kC("database");return i&&R5(n,...i),n}function R5(t,e,n,i={}){t=Be(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&gi("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&gi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Gr(Gr.OWNER);else if(i.mockUserToken){const o=typeof i.mockUserToken=="string"?i.mockUserToken:IC(i.mockUserToken,t.app.options.projectId);r=new Gr(o)}C5(s,e,n,r)}function A5(t){_3(No),Ys(new ns("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return b5(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),Un(a1,l1,t),Un(a1,l1,"esm2017")}function P5(t){return{".sv":{increment:t}}}oi.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};oi.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};A5();const D5={apiKey:"AIzaSyDyWFv4fbHiRAdZ_5oeUaIXplIvTBdohy4",authDomain:"energy-coach-f5270.firebaseapp.com",databaseURL:"https://energy-coach-f5270-default-rtdb.firebaseio.com",projectId:"energy-coach-f5270",storageBucket:"energy-coach-f5270.appspot.com",messagingSenderId:"629843836728",appId:"1:629843836728:web:5a6aface5a5b0748318bcd"},tf=PC(D5);eF(tf,{experimentalForceLongPolling:!0});const bl=tF(tf),a_=y3(tf),fm=N5(tf);function M5(){const t=["cold","neutral","warm"];return[async i=>{await y5(hm(fm,"/recomendation"),{rec:i})},async i=>{let s=t[i];const r=hm(fm,"/comfort");await _5(r,{[s]:P5(1)})}]}function z1(t){const e=[20,"OFF",16,17,18,19,20,21,22,23,24,11,10,9,8,7,6,5,4,3];let i=[1,2,3,4,5,6,7,8,9,10,11,24,23,22,21,20,19,18,17,16].indexOf(t);return e[i]}function O5(t){return typeof t=="number"?t+"ºC":t}async function L5(t){let e=null,n=null;const i=Wg(bl,"usernames",t),s=await Kg(i);if(!s.exists())return console.log("Username not found!"),e=!1,[n,e];const r=Wg(bl,"users",s.data().uid),o=await Kg(r);if(o.exists())return e=!0,n=o.data().email,[n,e]}async function F5(t){const e=Wg(bl,"users",t),n=await Kg(e),i=await n.data().role,s=await n.data().username;return[i,s]}function $5(t,e){const[n,i]=k.exports.useState(t);return k.exports.useEffect(()=>{setTimeout(()=>{const s=hm(fm,"/recomendation/rec");let r=w5(s,o=>{i(o.val())});return n===1&&setTimeout(()=>{e(7)},2e3),()=>E5(s,r)},1e3)},[n]),n}function U5(t){const[e,n]=k.exports.useState(!1);return k.exports.useEffect(()=>{const i=Mk(bl,"recomendations2"),s=jk(i,Wk("date","desc"),Hk(1)),r=Yk(s,o=>{o.forEach(a=>{let l=a.data();console.log("llego una recomendacion, ejecutando..."),t(l.option),n(!0)})});return()=>r},[]),e}function z5(t){return $l({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5 12.5a1.5 1.5 0 1 1-2-1.415V9.5a.5.5 0 0 1 1 0v1.585A1.5 1.5 0 0 1 5 12.5z"}},{tag:"path",attr:{d:"M1 2.5a2.5 2.5 0 0 1 5 0v7.55a3.5 3.5 0 1 1-5 0V2.5zM3.5 1A1.5 1.5 0 0 0 2 2.5v7.987l-.167.15a2.5 2.5 0 1 0 3.333 0L5 10.486V2.5A1.5 1.5 0 0 0 3.5 1zm5 1a.5.5 0 0 1 .5.5v1.293l.646-.647a.5.5 0 0 1 .708.708L9 5.207v1.927l1.669-.963.495-1.85a.5.5 0 1 1 .966.26l-.237.882 1.12-.646a.5.5 0 0 1 .5.866l-1.12.646.884.237a.5.5 0 1 1-.26.966l-1.848-.495L9.5 8l1.669.963 1.849-.495a.5.5 0 1 1 .258.966l-.883.237 1.12.646a.5.5 0 0 1-.5.866l-1.12-.646.237.883a.5.5 0 1 1-.966.258L10.67 9.83 9 8.866v1.927l1.354 1.353a.5.5 0 0 1-.708.708L9 12.207V13.5a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5z"}}]})(t)}function V5(t){return $l({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"circle",attr:{cx:"184",cy:"232",r:"24"}},{tag:"path",attr:{d:"M256.05 384c-45.42 0-83.62-29.53-95.71-69.83a8 8 0 017.82-10.17h175.69a8 8 0 017.82 10.17c-11.99 40.3-50.2 69.83-95.62 69.83z"}},{tag:"circle",attr:{cx:"328",cy:"232",r:"24"}},{tag:"circle",attr:{cx:"256",cy:"256",r:"208",fill:"none",strokeMiterlimit:"10",strokeWidth:"32"}}]})(t)}function B5(t){return $l({tag:"svg",attr:{version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 30 30",style:"enable-background:new 0 0 30 30;"},child:[{tag:"path",attr:{d:`M4.14,14.76c0-0.24,0.09-0.44,0.27-0.61c0.17-0.17,0.38-0.25,0.62-0.25h2.06c0.24,0,0.44,0.08,0.6,0.25
	c0.17,0.17,0.25,0.37,0.25,0.61c0,0.25-0.08,0.46-0.25,0.63c-0.17,0.17-0.37,0.25-0.6,0.25H5.03c-0.25,0-0.46-0.08-0.63-0.25
	C4.22,15.22,4.14,15.01,4.14,14.76z M7.06,7.74c0-0.23,0.08-0.44,0.24-0.62C7.5,6.96,7.71,6.87,7.96,6.87
	c0.21,0,0.41,0.08,0.59,0.25l1.45,1.48c0.17,0.16,0.25,0.36,0.25,0.6c0,0.24-0.08,0.44-0.25,0.6c-0.17,0.17-0.36,0.25-0.6,0.25
	c-0.26,0-0.46-0.08-0.61-0.25l-1.5-1.44C7.15,8.19,7.06,7.98,7.06,7.74z M9.67,14.76c0-0.71,0.14-1.39,0.43-2.04
	c0.28-0.65,0.67-1.22,1.14-1.69c0.48-0.47,1.05-0.85,1.7-1.13S14.28,9.47,15,9.47c0.96,0,1.84,0.24,2.66,0.72
	c0.82,0.48,1.47,1.12,1.94,1.94c0.47,0.81,0.71,1.69,0.71,2.63c0,0.15-0.01,0.29-0.03,0.42c-0.28-0.17-0.6-0.25-0.97-0.25
	c-0.24,0-0.48,0.05-0.72,0.15c0.01-0.07,0.01-0.18,0.01-0.32c0-0.98-0.35-1.81-1.06-2.5c-0.71-0.69-1.56-1.04-2.55-1.04
	c-0.99,0-1.83,0.35-2.54,1.04s-1.05,1.52-1.05,2.5v0.18c-0.29,0.02-0.57,0.1-0.84,0.25c-0.01,0.01-0.04,0.03-0.1,0.07
	s-0.12,0.09-0.19,0.14s-0.14,0.11-0.23,0.19s-0.18,0.16-0.26,0.24C9.7,15.51,9.67,15.15,9.67,14.76z M9.7,18.41v-0.15
	c-0.01-0.09,0-0.2,0.02-0.33c0.05-0.36,0.19-0.7,0.42-1.02c0.13-0.16,0.22-0.27,0.27-0.31c0.01-0.02,0.02-0.04,0.04-0.06l0.04-0.04
	c0.03-0.01,0.07-0.05,0.12-0.1c0.02-0.02,0.05-0.05,0.08-0.08s0.06-0.04,0.07-0.06c0.05-0.05,0.1-0.08,0.14-0.1l0.17-0.11
	c0.14-0.09,0.31-0.14,0.5-0.14h0.03c0.1,0,0.19,0.01,0.26,0.03c0.03,0.01,0.07,0.03,0.13,0.07v0.01c0.14,0.06,0.26,0.16,0.34,0.29
	c0.08,0.13,0.13,0.27,0.13,0.42c0,0.17-0.05,0.31-0.14,0.42c-0.06,0.09-0.14,0.17-0.22,0.23c-0.02,0.01-0.04,0.02-0.06,0.03
	c-0.02,0.01-0.04,0.02-0.04,0.02l-0.06,0.04c-0.04,0.03-0.07,0.06-0.1,0.08s-0.06,0.06-0.11,0.11c-0.04,0.05-0.08,0.09-0.11,0.14
	c-0.03,0.04-0.06,0.1-0.09,0.15c-0.03,0.06-0.05,0.12-0.05,0.17v0.15c0.04,0.15,0.08,0.27,0.11,0.36c0.07,0.14,0.18,0.28,0.34,0.44
	c0.01,0.02,0.09,0.1,0.24,0.25c0.86,0.78,1.27,1.62,1.21,2.5c-0.02,0.3-0.09,0.59-0.21,0.87c-0.12,0.28-0.26,0.51-0.43,0.7
	c-0.16,0.19-0.29,0.33-0.39,0.43c-0.1,0.09-0.18,0.16-0.25,0.21c-0.01,0.01-0.03,0.02-0.06,0.04c-0.03,0.02-0.06,0.04-0.07,0.04
	c-0.08,0.04-0.15,0.06-0.22,0.07c-0.09,0.01-0.15,0.02-0.2,0.02c-0.3,0-0.54-0.1-0.71-0.3c-0.14-0.17-0.2-0.37-0.18-0.59
	c0.02-0.22,0.13-0.4,0.33-0.53L11,22.75c0.01-0.01,0.03-0.03,0.05-0.04c0.02-0.02,0.04-0.04,0.07-0.06
	c0.03-0.02,0.06-0.05,0.08-0.08c0.03-0.03,0.06-0.07,0.08-0.1c0.03-0.04,0.06-0.08,0.08-0.12c0.03-0.04,0.06-0.09,0.08-0.14
	c0.03-0.05,0.05-0.1,0.07-0.15c0.02-0.05,0.03-0.1,0.05-0.16c0.01-0.06,0.02-0.12,0.02-0.17c0.02-0.2-0.03-0.4-0.15-0.6
	c-0.05-0.11-0.12-0.22-0.22-0.33c-0.07-0.08-0.12-0.13-0.15-0.16c-0.09-0.11-0.14-0.17-0.15-0.18c-0.02-0.01-0.04-0.03-0.07-0.06
	s-0.05-0.04-0.06-0.05c-0.15-0.14-0.26-0.26-0.34-0.36c-0.12-0.16-0.21-0.26-0.24-0.32c-0.19-0.26-0.32-0.52-0.39-0.78
	c-0.04-0.14-0.07-0.25-0.08-0.32c0-0.02-0.01-0.05-0.02-0.08S9.7,18.44,9.7,18.41z M13.58,18.08c0-0.06,0-0.1,0.01-0.14
	c0.02-0.22,0.09-0.43,0.2-0.64c0.11-0.21,0.22-0.39,0.35-0.53c0.13-0.14,0.25-0.27,0.38-0.38s0.23-0.19,0.31-0.25l0.12-0.07
	c0.15-0.09,0.32-0.14,0.5-0.14c0.11,0,0.21,0.01,0.3,0.03c0.01,0,0.02,0.01,0.05,0.02c0.03,0.02,0.05,0.03,0.06,0.04
	c0.01,0,0.02,0,0.03,0.01c0.01,0,0.03,0.02,0.07,0.05c0.2,0.12,0.32,0.3,0.38,0.54c0,0.02,0,0.04,0,0.07c0,0.02,0,0.04,0,0.05
	c0,0.03-0.01,0.07-0.02,0.12s-0.02,0.08-0.02,0.09c-0.07,0.23-0.21,0.39-0.42,0.5c-0.33,0.22-0.51,0.45-0.53,0.69
	c-0.01,0.08-0.01,0.15,0,0.22c0.02,0.12,0.08,0.25,0.17,0.39c0.11,0.16,0.19,0.27,0.24,0.32c0.16,0.16,0.25,0.25,0.28,0.27
	c0.12,0.11,0.28,0.28,0.47,0.51c0.54,0.65,0.79,1.32,0.74,2c-0.02,0.3-0.09,0.59-0.21,0.87c-0.12,0.28-0.26,0.51-0.43,0.7
	c-0.16,0.18-0.3,0.33-0.4,0.43c-0.11,0.1-0.19,0.17-0.25,0.21l-0.12,0.08c-0.11,0.04-0.17,0.06-0.21,0.07
	c-0.11,0.01-0.18,0.02-0.2,0.02h-0.03c-0.08,0-0.14-0.01-0.19-0.02c-0.02,0-0.05,0-0.08-0.01c-0.03-0.01-0.06-0.01-0.07-0.01
	c-0.01,0-0.02,0-0.03-0.01c-0.01-0.01-0.02-0.01-0.04-0.02c-0.01-0.01-0.02-0.01-0.03-0.01c-0.15-0.11-0.24-0.17-0.26-0.21
	c-0.16-0.18-0.22-0.38-0.19-0.6c0.03-0.22,0.14-0.39,0.34-0.53l0.03-0.04c0.02-0.02,0.05-0.05,0.09-0.08l0.12-0.12l0.13-0.16
	l0.12-0.19l0.09-0.22l0.04-0.24c0.01-0.4-0.22-0.82-0.69-1.27c-0.19-0.17-0.33-0.31-0.44-0.43C13.79,19.37,13.54,18.72,13.58,18.08z
	 M14.12,6.92V4.85c0-0.24,0.09-0.45,0.26-0.62c0.17-0.17,0.38-0.25,0.61-0.25c0.24,0,0.45,0.08,0.62,0.25
	c0.17,0.17,0.25,0.38,0.25,0.62v2.07c0,0.24-0.08,0.43-0.25,0.59S15.24,7.74,15,7.74c-0.24,0-0.44-0.08-0.61-0.23
	C14.21,7.35,14.12,7.16,14.12,6.92z M17.48,17.93c0.02-0.22,0.09-0.43,0.2-0.64c0.11-0.21,0.22-0.39,0.35-0.53
	c0.13-0.14,0.25-0.27,0.38-0.38c0.12-0.11,0.22-0.19,0.3-0.25l0.13-0.07c0.02-0.02,0.06-0.04,0.1-0.08
	c0.11-0.04,0.24-0.07,0.38-0.07c0.34,0,0.59,0.13,0.77,0.38c0.05,0.07,0.08,0.14,0.1,0.23c0.01,0.02,0.02,0.05,0.02,0.08v0.11
	c0,0.31-0.15,0.55-0.45,0.7c-0.32,0.21-0.49,0.44-0.52,0.69c-0.04,0.34,0.19,0.74,0.68,1.2c0.88,0.77,1.28,1.61,1.23,2.5
	c-0.02,0.3-0.09,0.59-0.21,0.87c-0.12,0.28-0.27,0.51-0.43,0.7c-0.17,0.19-0.3,0.33-0.39,0.43s-0.18,0.16-0.25,0.21
	c-0.16,0.1-0.3,0.15-0.41,0.16c-0.03,0.01-0.08,0.01-0.15,0.01c-0.3,0-0.53-0.1-0.69-0.3c-0.15-0.17-0.21-0.37-0.19-0.59
	s0.13-0.4,0.32-0.53c0.03-0.01,0.09-0.06,0.18-0.14s0.18-0.21,0.29-0.38c0.1-0.18,0.16-0.35,0.17-0.53c0.02-0.4-0.22-0.82-0.7-1.27
	c-0.41-0.36-0.73-0.75-0.94-1.16C17.51,18.86,17.42,18.4,17.48,17.93z M19.77,9.21c0-0.25,0.08-0.45,0.23-0.6l1.46-1.48
	c0.18-0.17,0.38-0.25,0.61-0.25c0.24,0,0.44,0.09,0.61,0.26s0.26,0.38,0.26,0.61c0,0.25-0.09,0.46-0.26,0.62l-1.48,1.44
	c-0.18,0.17-0.38,0.25-0.61,0.25c-0.23,0-0.43-0.08-0.58-0.25C19.85,9.65,19.77,9.44,19.77,9.21z M22.07,14.76
	c0-0.22,0.09-0.42,0.26-0.61c0.16-0.17,0.35-0.25,0.58-0.25h2.06c0.24,0,0.45,0.09,0.62,0.26s0.27,0.37,0.27,0.6
	c0,0.24-0.09,0.45-0.26,0.62c-0.18,0.17-0.38,0.26-0.63,0.26h-2.06c-0.24,0-0.45-0.08-0.6-0.25C22.15,15.22,22.07,15.01,22.07,14.76
	z`}}]})(t)}const j5="/assets/avatar-profile-3fc0e81d.jpg";function W5({role:t,username:e}){return ee("div",{className:"w-72 lg:w-72 md:w-[267px] bg-gray-800 rounded-2xl px-8 py-6 shadow-lg my-10 whitespace-pre-line",children:[C("div",{className:"flex items-center justify-between",children:C("span",{className:"text-gray-400 text-sm",children:"Perfil"})}),C("div",{className:"mt-6 w-fit mx-auto",children:C("img",{src:j5,className:"rounded-full w-28",alt:"profile picture"})}),ee("div",{className:"mt-8",children:[C("h2",{className:"text-white font-bold text-2xl",children:"Welcome"}),C("p",{className:"text-white font-bold",children:e})]}),C("p",{className:"text-emerald-400 font-semibold mt-2.5",children:t==="admin"?"Administrador":"Usuario Regular"}),ee("div",{className:"mt-3 text-white text-sm",children:[C("span",{className:"text-gray-400 font-semibold",children:"Edificio: "}),C("span",{children:"11C"})]}),ee("div",{className:"mt-3 text-white text-sm",children:[C("span",{className:"text-gray-400 font-semibold",children:"Sala: "}),C("span",{children:"Laboratorio de Sistemas Telematicos"})]}),C("div",{className:"mt-3 flex flex-col justify-center items-center",children:C("button",{className:"p-4 rounded bg-emerald-400 active:scale-[.97] active:duration-75 transition-all hover:scale-[1.05] ease-in-out",onClick:()=>{i$(a_)},children:"Cerrar Sesión"})})]})}const H5="http://127.0.0.1:3000/",q5="integradora/confort";async function K5(t,e){const i=await(await fetch(H5+"send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({topic:t,msg:e})})).json();console.log(i.res)}const G5={publish:K5,topic:q5};function Q5({temperature:t,recCodeToTemp:e,setRec:n,publish:i,topic:s}){return ee("div",{className:"flex flex-col justify-center items-center",children:[ee("div",{className:"flex flex-col justify-center items-center mt-4",children:[C("label",{children:"Cambiar temperatura del aire:"}),C("input",{className:"caret-transparent p-2 rounded w-1/2 text-center text-black",type:"number",name:"ACtemp",min:16,max:24,value:t?e(t):"0",onKeyDown:r=>r.preventDefault(),onChange:r=>{let o=parseInt(r.target.value);n(e(o)),i(s,e(o)+"")}})]}),ee("div",{className:"mt-4 p-4 text-gray-200 flex justify-center border border-gray-600 rounded-lg lg:w-2/3 ",onChange:r=>{n(parseInt(r.target.value)),i(s,r.target.value)},children:[C("label",{className:"font-medium text-lg mr-4",htmlFor:"",children:"Estado:"}),ee("label",{className:"font-normal text-lg mx-8",htmlFor:"ON",children:[C("input",{value:1,name:"estado",id:"ON",className:"mr-10",type:"radio"}),"ON"]}),ee("label",{className:"font-normal text-lg mx-2",htmlFor:"OFF",children:[C("input",{value:2,name:"estado",id:"OFF",type:"radio",className:""}),"OFF"]})]})]})}function l_(t){k.exports.useEffect(()=>{document.title=`${t} - Comfort++`},[])}function Y5(){l_("Home");const[t,e]=k.exports.useContext(bN),[n,i]=k.exports.useState(null),[s,r]=k.exports.useState(null);async function o(){const[f,p]=await F5(t.uid);i(f),r(p)}o();const[a,l]=M5(),{publish:c,topic:u}=G5;U5(a);const h=$5(0,a),d=O5(z1(h));return ee("div",{className:"flex-grow flex flex-col md:flex-row md:flex p-8 ",children:[C("div",{className:"md:p-6 md:mr-6 md:w-2/3 md:border-r-2 md:border-r-gray-400 flex flex-col justify-center items-center",children:ee("div",{className:"bg-gray-800 rounded-2xl px-8 py-6 shadow-lg my-10 w-5/6 h-11/12 text-gray-50",children:[C("h1",{children:C(xs,{to:"/about",className:"underline",children:"Acerca del proyecto"})}),ee("div",{className:"flex flex-col justify-center items-center mt-4",children:[C("h1",{children:"Temperatura del aire:"}),C("h1",{className:"font-semibold text-xl",children:d||"Cargando..."})]}),n==="admin"?C(Q5,{displayTemperature:d,temperature:h,recCodeToTemp:z1,setRec:a,publish:c,topic:u}):C(si,{}),ee("div",{className:"inline-block text-center w-full mb-4 text-black",children:[C("h1",{className:"mt-5 text-gray-50",children:"Cuentanos, ¿qué sientes en este momento?"}),ee("div",{className:"float-left px-[2px] sm:px-4 w-1/3 ",children:[C("div",{className:"flex flex-col items-center",children:C(z5,{className:"p-4",color:"#60a5fa",size:80})}),C("button",{className:"w-full rounded bg-emerald-400 h-[28px]",onClick:()=>{l(0),alert("Se registro su voto correctamente")},children:"Frio"})]}),ee("div",{className:"float-left px-[2px] sm:px-4 w-1/3",children:[C("div",{className:"flex flex-col items-center",children:C(V5,{className:"p-4",color:"#FFF",size:80})}),C("button",{className:"w-full rounded bg-emerald-400 h-[28px]",onClick:()=>{l(1),alert("Se registro su voto correctamente")},children:"Neutral"})]}),ee("div",{className:"float-left px-[2px]  sm:px-4 w-1/3 ",children:[C("div",{className:"flex flex-col items-center",children:C(B5,{className:"p-4",color:"#fbbf24",size:80})}),C("button",{className:"w-full rounded bg-emerald-400 h-[28px]",onClick:()=>{l(2),alert("Se registro su voto correctamente")},children:"Calor"})]})]})]})}),C("div",{className:"md:w-1/3 md:border-opacity-0 border-t-2 border-t-gray-400 flex flex-col justify-center items-center",children:C(W5,{role:n,username:s})})]})}function uc(t){return t+.5|0}const Mi=(t,e,n)=>Math.max(Math.min(t,n),e);function pa(t){return Mi(uc(t*2.55),0,255)}function Ji(t){return Mi(uc(t*255),0,255)}function Xn(t){return Mi(uc(t/2.55)/100,0,1)}function V1(t){return Mi(uc(t*100),0,100)}const nn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pm=[..."0123456789ABCDEF"],X5=t=>pm[t&15],J5=t=>pm[(t&240)>>4]+pm[t&15],zc=t=>(t&240)>>4===(t&15),Z5=t=>zc(t.r)&&zc(t.g)&&zc(t.b)&&zc(t.a);function ez(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&nn[t[1]]*17,g:255&nn[t[2]]*17,b:255&nn[t[3]]*17,a:e===5?nn[t[4]]*17:255}:(e===7||e===9)&&(n={r:nn[t[1]]<<4|nn[t[2]],g:nn[t[3]]<<4|nn[t[4]],b:nn[t[5]]<<4|nn[t[6]],a:e===9?nn[t[7]]<<4|nn[t[8]]:255})),n}const tz=(t,e)=>t<255?e(t):"";function nz(t){var e=Z5(t)?X5:J5;return t?"#"+e(t.r)+e(t.g)+e(t.b)+tz(t.a,e):void 0}const iz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function FI(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function sz(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function rz(t,e,n){const i=FI(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function oz(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function c_(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=oz(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function u_(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ji)}function h_(t,e,n){return u_(FI,t,e,n)}function az(t,e,n){return u_(rz,t,e,n)}function lz(t,e,n){return u_(sz,t,e,n)}function $I(t){return(t%360+360)%360}function cz(t){const e=iz.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?pa(+e[5]):Ji(+e[5]));const s=$I(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=az(s,r,o):e[1]==="hsv"?i=lz(s,r,o):i=h_(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function uz(t,e){var n=c_(t);n[0]=$I(n[0]+e),n=h_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function hz(t){if(!t)return;const e=c_(t),n=e[0],i=V1(e[1]),s=V1(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${Xn(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const B1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},j1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function dz(){const t={},e=Object.keys(j1),n=Object.keys(B1);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,B1[r]);r=parseInt(j1[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let Vc;function fz(t){Vc||(Vc=dz(),Vc.transparent=[0,0,0,0]);const e=Vc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const pz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function gz(t){const e=pz.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?pa(o):Mi(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?pa(i):Mi(i,0,255)),s=255&(e[4]?pa(s):Mi(s,0,255)),r=255&(e[6]?pa(r):Mi(r,0,255)),{r:i,g:s,b:r,a:n}}}function mz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const rp=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,gr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function yz(t,e,n){const i=gr(Xn(t.r)),s=gr(Xn(t.g)),r=gr(Xn(t.b));return{r:Ji(rp(i+n*(gr(Xn(e.r))-i))),g:Ji(rp(s+n*(gr(Xn(e.g))-s))),b:Ji(rp(r+n*(gr(Xn(e.b))-r))),a:t.a+n*(e.a-t.a)}}function Bc(t,e,n){if(t){let i=c_(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=h_(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function UI(t,e){return t&&Object.assign(e||{},t)}function W1(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ji(t[3]))):(e=UI(t,{r:0,g:0,b:0,a:1}),e.a=Ji(e.a)),e}function _z(t){return t.charAt(0)==="r"?gz(t):cz(t)}class kl{constructor(e){if(e instanceof kl)return e;const n=typeof e;let i;n==="object"?i=W1(e):n==="string"&&(i=ez(e)||fz(e)||_z(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=UI(this._rgb);return e&&(e.a=Xn(e.a)),e}set rgb(e){this._rgb=W1(e)}rgbString(){return this._valid?mz(this._rgb):void 0}hexString(){return this._valid?nz(this._rgb):void 0}hslString(){return this._valid?hz(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=yz(this._rgb,e._rgb,n)),this}clone(){return new kl(this.rgb)}alpha(e){return this._rgb.a=Ji(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=uc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Bc(this._rgb,2,e),this}darken(e){return Bc(this._rgb,2,-e),this}saturate(e){return Bc(this._rgb,1,e),this}desaturate(e){return Bc(this._rgb,1,-e),this}rotate(e){return uz(this._rgb,e),this}}function qn(){}const vz=(()=>{let t=0;return()=>t++})();function he(t){return t===null||typeof t>"u"}function Ce(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function se(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function et(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Gt(t,e){return et(t)?t:e}function ae(t,e){return typeof t>"u"?e:t}const wz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ge(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function le(t,e,n,i){let s,r,o;if(Ce(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(se(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function Ah(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Ph(t){if(Ce(t))return t.map(Ph);if(se(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=Ph(t[n[s]]);return e}return t}function zI(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Ez(t,e,n,i){if(!zI(t))return;const s=e[t],r=n[t];se(s)&&se(r)?Tl(s,r,i):e[t]=Ph(r)}function Tl(t,e,n){const i=Ce(e)?e:[e],s=i.length;if(!se(t))return t;n=n||{};const r=n.merger||Ez;let o;for(let a=0;a<s;++a){if(o=i[a],!se(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function Oa(t,e){return Tl(t,e,{merger:xz})}function xz(t,e,n){if(!zI(t))return;const i=e[t],s=n[t];se(i)&&se(s)?Oa(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ph(s))}const H1={"":t=>t,x:t=>t.x,y:t=>t.y};function Sz(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Cz(t){const e=Sz(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Eo(t,e){return(H1[e]||(H1[e]=Cz(e)))(t)}function d_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const dn=t=>typeof t<"u",ls=t=>typeof t=="function",q1=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function bz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const dt=Math.PI,Bn=2*dt,Dh=Number.POSITIVE_INFINITY,kz=dt/180,zt=dt/2,ms=dt/4,K1=dt*2/3,Oi=Math.log10,Zi=Math.sign;function vu(t,e,n){return Math.abs(t-e)<n}function G1(t){const e=Math.round(t);t=vu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Oi(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Tz(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function Mh(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Iz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function VI(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Li(t){return t*(dt/180)}function f_(t){return t*(180/dt)}function Q1(t){if(!et(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Nz(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*dt&&(r+=Bn),{angle:r,distance:s}}function Rz(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Dn(t){return(t%Bn+Bn)%Bn}function Az(t,e,n,i){const s=Dn(t),r=Dn(e),o=Dn(n),a=Dn(r-s),l=Dn(o-s),c=Dn(s-r),u=Dn(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function vn(t,e,n){return Math.max(e,Math.min(n,t))}function Pz(t){return vn(t,-32768,32767)}function Dr(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function p_(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const gm=(t,e,n,i)=>p_(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),Dz=(t,e,n)=>p_(t,n,i=>t[i][e]>=n);function Mz(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const BI=["push","pop","shift","splice","unshift"];function Oz(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),BI.forEach(n=>{const i="_onData"+d_(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Y1(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(BI.forEach(r=>{delete t[r]}),delete t._chartjs)}function jI(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const WI=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function HI(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,WI.call(window,()=>{i=!1,t.apply(e,n)}))}}function Lz(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const g_=t=>t==="start"?"left":t==="end"?"right":"center",yt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Fz=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,jc=t=>t===0||t===1,X1=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Bn/n)),J1=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Bn/n)+1,La={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*zt)+1,easeOutSine:t=>Math.sin(t*zt),easeInOutSine:t=>-.5*(Math.cos(dt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>jc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>jc(t)?t:X1(t,.075,.3),easeOutElastic:t=>jc(t)?t:J1(t,.075,.3),easeInOutElastic(t){return jc(t)?t:t<.5?.5*X1(t*2,.1125,.45):.5+.5*J1(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-La.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?La.easeInBounce(t*2)*.5:La.easeOutBounce(t*2-1)*.5+.5};function qI(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Z1(t){return qI(t)?t:new kl(t)}function op(t){return qI(t)?t:new kl(t).saturate(.5).darken(.1).hexString()}const $z=["x","y","borderWidth","radius","tension"],Uz=["color","borderColor","backgroundColor"];function zz(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Uz},numbers:{type:"number",properties:$z}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Vz(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const eE=new Map;function Bz(t,e){e=e||{};const n=t+JSON.stringify(e);let i=eE.get(n);return i||(i=new Intl.NumberFormat(t,e),eE.set(n,i)),i}function m_(t,e,n){return Bz(e,n).format(t)}const KI={values(t){return Ce(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=jz(t,n)}const o=Oi(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),m_(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Oi(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?KI.numeric.call(this,t,e,n):""}};function jz(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var nf={formatters:KI};function Wz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:nf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const sr=Object.create(null),mm=Object.create(null);function Fa(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function ap(t,e,n){return typeof e=="string"?Tl(Fa(t,e),n):Tl(Fa(t,""),e)}class Hz{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>op(s.backgroundColor),this.hoverBorderColor=(i,s)=>op(s.borderColor),this.hoverColor=(i,s)=>op(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return ap(this,e,n)}get(e){return Fa(this,e)}describe(e,n){return ap(mm,e,n)}override(e,n){return ap(sr,e,n)}route(e,n,i,s){const r=Fa(this,e),o=Fa(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return se(l)?Object.assign({},c,l):ae(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Oe=new Hz({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[zz,Vz,Wz]);function qz(t){return!t||he(t.size)||he(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Oh(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Kz(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&Ce(h)!==!0)o=Oh(t,s,r,o,h);else if(Ce(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!Ce(d)&&(o=Oh(t,s,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function ys(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function tE(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function nE(t,e,n,i){GI(t,e,n,i,null)}function GI(t,e,n,i,s){let r,o,a,l,c,u,h,d;const f=e.pointStyle,p=e.rotation,g=e.radius;let v=(p||0)*kz;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(v),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,g,0,0,Bn):t.arc(n,i,g,0,Bn),t.closePath();break;case"triangle":u=s?s/2:g,t.moveTo(n+Math.sin(v)*u,i-Math.cos(v)*g),v+=K1,t.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*g),v+=K1,t.lineTo(n+Math.sin(v)*u,i-Math.cos(v)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(v+ms)*l,h=Math.cos(v+ms)*(s?s/2-c:l),a=Math.sin(v+ms)*l,d=Math.sin(v+ms)*(s?s/2-c:l),t.arc(n-h,i-a,c,v-dt,v-zt),t.arc(n+d,i-o,c,v-zt,v),t.arc(n+h,i+a,c,v,v+zt),t.arc(n-d,i+o,c,v+zt,v+dt),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}v+=ms;case"rectRot":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":v+=ms;case"cross":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),v+=ms,h=Math.cos(v)*(s?s/2:g),o=Math.cos(v)*g,a=Math.sin(v)*g,d=Math.sin(v)*(s?s/2:g),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(v)*g,a=Math.sin(v)*g,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(v)*(s?s/2:g),i+Math.sin(v)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function QI(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function y_(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function __(t){t.restore()}function rr(t,e,n,i,s,r={}){const o=Ce(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Gz(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Yz(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),he(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),Qz(t,n,i,c,r),i+=s.lineHeight;t.restore()}function Gz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),he(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Qz(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Yz(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Il(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-zt,dt,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,dt,zt,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,zt,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-zt,!0),t.lineTo(n+o.topLeft,i)}const Xz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Jz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Zz(t,e){const n=(""+t).match(Xz);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const eV=t=>+t||0;function YI(t,e){const n={},i=se(e),s=i?Object.keys(e):e,r=se(t)?i?o=>ae(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=eV(r(o));return n}function XI(t){return YI(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Bs(t){return YI(t,["topLeft","topRight","bottomLeft","bottomRight"])}function kt(t){const e=XI(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function He(t,e){t=t||{},e=e||Oe.font;let n=ae(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ae(t.style,e.style);i&&!(""+i).match(Jz)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:ae(t.family,e.family),lineHeight:Zz(ae(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ae(t.weight,e.weight),string:""};return s.string=qz(s),s}function Wc(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Ce(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function tV(t,e,n){const{min:i,max:s}=t,r=wz(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function hr(t,e){return Object.assign(Object.create(t),e)}function v_(t,e=[""],n=t,i,s=()=>t[0]){dn(i)||(i=tN("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:s,override:o=>v_([o,...t],e,n,i)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete t[0][a],!0},get(o,a){return ZI(o,a,()=>cV(a,e,t,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,a){return sE(o).includes(a)},ownKeys(o){return sE(o)},set(o,a,l){const c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function xo(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:JI(t,i),setContext:r=>xo(t,r,n,i),override:r=>xo(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return ZI(r,o,()=>iV(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function JI(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:ls(n)?n:()=>n,isIndexable:ls(i)?i:()=>i}}const nV=(t,e)=>t?t+d_(e):e,w_=(t,e)=>se(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ZI(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function iV(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return ls(a)&&o.isScriptable(e)&&(a=sV(e,a,t,n)),Ce(a)&&a.length&&(a=rV(e,a,t,o.isIndexable)),w_(e,a)&&(a=xo(a,s,r&&r[e],o)),a}function sV(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(r,o||i),a.delete(t),w_(t,e)&&(e=E_(s._scopes,s,t,e)),e}function rV(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(dn(r.index)&&i(t))e=e[r.index%e.length];else if(se(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=E_(c,s,t,u);e.push(xo(h,r,o&&o[t],a))}}return e}function eN(t,e,n){return ls(t)?t(e,n):t}const oV=(t,e)=>t===!0?e:typeof t=="string"?Eo(e,t):void 0;function aV(t,e,n,i,s){for(const r of e){const o=oV(n,r);if(o){t.add(o);const a=eN(o._fallback,n,s);if(dn(a)&&a!==n&&a!==i)return a}else if(o===!1&&dn(i)&&n!==i)return null}return!1}function E_(t,e,n,i){const s=e._rootScopes,r=eN(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=iE(a,o,n,r||n,i);return l===null||dn(r)&&r!==n&&(l=iE(a,o,r,l,i),l===null)?!1:v_(Array.from(a),[""],s,r,()=>lV(e,n,i))}function iE(t,e,n,i,s){for(;n;)n=aV(t,e,n,i,s);return n}function lV(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Ce(s)&&se(n)?n:s||{}}function cV(t,e,n,i){let s;for(const r of e)if(s=tN(nV(r,t),n),dn(s))return w_(t,s)?E_(n,i,t,s):s}function tN(t,e){for(const n of e){if(!n)continue;const i=n[t];if(dn(i))return i}}function sE(t){let e=t._keys;return e||(e=t._keys=uV(t._scopes)),e}function uV(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function nN(){return typeof window<"u"&&typeof document<"u"}function x_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lh(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const sf=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function hV(t,e){return sf(t).getPropertyValue(e)}const dV=["top","right","bottom","left"];function js(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=dV[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const fV=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function pV(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(fV(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function bs(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=sf(n),r=s.boxSizing==="border-box",o=js(s,"padding"),a=js(s,"border","width"),{x:l,y:c,box:u}=pV(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=e;return r&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}function gV(t,e,n){let i,s;if(e===void 0||n===void 0){const r=x_(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=sf(r),l=js(a,"border","width"),c=js(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Lh(a.maxWidth,r,"clientWidth"),s=Lh(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||Dh,maxHeight:s||Dh}}const Hc=t=>Math.round(t*10)/10;function mV(t,e,n,i){const s=sf(t),r=js(s,"margin"),o=Lh(s.maxWidth,t,"clientWidth")||Dh,a=Lh(s.maxHeight,t,"clientHeight")||Dh,l=gV(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=js(s,"border","width"),f=js(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=Hc(Math.min(c,o,l.maxWidth)),u=Hc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Hc(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Hc(Math.floor(u*i))),{width:c,height:u}}function rE(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const yV=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function oE(t,e){const n=hV(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const _V=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},vV=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Xr(t,e,n){return t?_V(e,n):vV()}function iN(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function sN(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}class wV{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=WI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Kn=new wV;const aE="transparent",EV={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Z1(t||aE),s=i.valid&&Z1(e||aE);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class xV{constructor(e,n,i,s){const r=n[i];s=Wc([e.to,s,r,e.from]);const o=Wc([e.from,r,s]);this._active=!0,this._fn=e.fn||EV[e.type||typeof o],this._easing=La[e.easing]||La.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Wc([e.to,n,s,e.from]),this._from=Wc([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class rN{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!se(e))return;const n=Object.keys(Oe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!se(r))return;const o={};for(const a of n)o[a]=r[a];(Ce(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=CV(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&SV(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new xV(d,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Kn.add(this._chart,i),!0}}function SV(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function CV(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lE(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function bV(t,e,n){if(n===!1)return!1;const i=lE(t,n),s=lE(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function kV(t){let e,n,i,s;return se(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function oN(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function cE(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(i.all)continue;break}c=t.values[l],et(c)&&(r||e===0||Zi(e)===Zi(c))&&(e+=c)}return e}}function TV(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function uE(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function IV(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function NV(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function RV(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function hE(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function dE(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=IV(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const p=e[f],{[l]:g,[c]:v}=p,y=p._stacks||(p._stacks={});d=y[c]=RV(s,u,g),d[a]=v,d._top=hE(d,o,!0,i.type),d._bottom=hE(d,o,!1,i.type);const m=d._visualValues||(d._visualValues={});m[a]=v}}function lp(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function AV(t,e){return hr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function PV(t,e,n){return hr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const cp=t=>t==="reset"||t==="none",fE=(t,e)=>e?t:Object.assign({},t),DV=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:oN(n,!0),values:null};class $a{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=uE(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,f,p)=>h==="x"?d:h==="r"?p:f,r=n.xAxisID=ae(i.xAxisID,lp(e,"x")),o=n.yAxisID=ae(i.yAxisID,lp(e,"y")),a=n.rAxisID=ae(i.rAxisID,lp(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Y1(this._data,this),e._stacked&&Zo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(se(n))this._data=TV(n);else if(i!==n){if(i){Y1(i,this);const s=this._cachedMeta;Zo(s),s._parsed=[]}n&&Object.isExtensible(n)&&Oz(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=uE(n.vScale,n),n.stack!==i.stack&&(s=!0,Zo(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&dE(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{Ce(s[e])?d=this.parseArrayData(i,s,e,n):se(s[e])?d=this.parseObjectData(i,s,e,n):d=this.parsePrimitiveData(i,s,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&dE(this,d)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let d,f,p;for(d=0,f=s;d<f;++d)p=d+i,h[d]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,f;for(u=0,h=s;u<h;++u)d=u+i,f=n[d],c[u]={x:r.parse(Eo(f,a),d),y:o.parse(Eo(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:oN(s,!0),values:n._stacks[e.axis]._visualValues};return cE(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=cE(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=DV(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=NV(a);let d,f;function p(){f=s[d];const g=f[a.axis];return!et(f[e.axis])||u>g||h<g}for(d=0;d<o&&!(!p()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!p()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],et(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=kV(ae(this.options.clip,bV(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=PV(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=AV(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&dn(i);if(a)return fE(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(Oe.elements[e]),p=()=>this.getContext(i,s,n),g=c.resolveNamedOptions(d,f,p,h);return g.$shared&&(g.$shared=l,r[o]=Object.freeze(fE(g,l))),g}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new rN(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||cp(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){cp(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!cp(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Zo(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}X($a,"defaults",{}),X($a,"datasetElementType",null),X($a,"dataElementType",null);function MV(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=jI(i.sort((s,r)=>s-r))}return t._cache.$bar}function OV(t){const e=t.iScale,n=MV(e,t.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(dn(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function LV(t,e,n,i){const s=n.barThickness;let r,o;return he(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function FV(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function $V(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function aN(t,e,n,i){return Ce(t)?$V(t,e,n,i):e[n.axis]=n.parse(t,i),e}function pE(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[s.axis]=a||s.parse(o[c],c),l.push(aN(d,h,r,c));return l}function up(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function UV(t,e,n){return t!==0?Zi(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function zV(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}function VV(t,e,n,i){let s=e.borderSkipped;const r={};if(!s){t.borderSkipped=r;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=zV(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[gE(u,o,a,l)]=!0,s=c)),r[gE(s,o,a,l)]=!0,t.borderSkipped=r}function gE(t,e,n,i){return i?(t=BV(t,e,n),t=mE(t,n,e)):t=mE(t,e,n),t}function BV(t,e,n){return t===e?n:t===n?e:t}function mE(t,e,n){return t==="start"?e:t==="end"?n:t}function jV(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class wu extends $a{parsePrimitiveData(e,n,i,s){return pE(e,n,i,s)}parseArrayData(e,n,i,s){return pE(e,n,i,s)}parseObjectData(e,n,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let d,f,p,g;for(d=i,f=i+s;d<f;++d)g=n[d],p={},p[r.axis]=r.parse(Eo(g,c),d),h.push(aN(Eo(g,u),p,o,d));return h}updateRangeFromParsed(e,n,i,s){super.updateRangeFromParsed(e,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(e),o=r._custom,a=up(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,s);for(let f=n;f<n+i;f++){const p=this.getParsed(f),g=r||he(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),v=this._calculateBarIndexPixels(f,u),y=(p._stacks||{})[a.axis],m={horizontal:c,base:g.base,enableBorderRadius:!y||up(p._custom)||o===y._top||o===y._bottom,x:c?g.head:v.center,y:c?v.center:g.head,height:c?v.size:Math.abs(g.size),width:c?Math.abs(g.size):v.size};d&&(m.options=h||this.resolveDataElementOptions(f,e[f].active?"active":s));const _=m.options||e[f].options;VV(m,_,y,o),jV(m,_,u.ratio),this.updateElement(e[f],f,m,s)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(he(u)||isNaN(u))return!0};for(const l of s)if(!(n!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const s=this._getStacks(e,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||OV(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:s},options:{base:r,minBarLength:o}}=this,a=r||0,l=this.getParsed(e),c=l._custom,u=up(c);let h=l[n.axis],d=0,f=i?this.applyStack(n,l,i):h,p,g;f!==h&&(d=f-h,f=h),u&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&Zi(h)!==Zi(c.barEnd)&&(d=0),d+=h);const v=!he(r)&&!u?r:d;let y=n.getPixelForValue(v);if(this.chart.getDataVisibility(e)?p=n.getPixelForValue(d+f):p=y,g=p-y,Math.abs(g)<o){g=UV(g,n,a)*o,h===a&&(y-=g/2);const m=n.getPixelForDecimal(0),_=n.getPixelForDecimal(1),w=Math.min(m,_),E=Math.max(m,_);y=Math.max(Math.min(y,E),w),p=y+g,i&&!u&&(l._stacks[n.axis]._visualValues[s]=n.getValueForPixel(p)-n.getValueForPixel(y))}if(y===n.getPixelForValue(a)){const m=Zi(g)*n.getLineWidthForValue(a)/2;y+=m,g-=m}return{size:g,base:y,head:p,center:p+g/2}}_calculateBarIndexPixels(e,n){const i=n.scale,s=this.options,r=s.skipNull,o=ae(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?FV(e,n,s,c):LV(e,n,s,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&i[r].draw(this._ctx)}}X(wu,"id","bar"),X(wu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),X(wu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function _s(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class S_{static override(e){Object.assign(S_.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return _s()}parse(){return _s()}format(){return _s()}add(){return _s()}diff(){return _s()}startOf(){return _s()}endOf(){return _s()}}var WV={_date:S_};function HV(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?Dz:gm;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(r,e,n-u),d=l(r,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function hc(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=HV(r[a],e,o,s);for(let f=h;f<=d;++f){const p=u[f];p.skip||i(p,c,f)}}}function qV(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function hp(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||hc(t,n,e,function(a,l,c){!s&&!QI(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function KV(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=Nz(o,{x:e.x,y:e.y});Az(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return hc(t,n,e,r),s}function GV(t,e,n,i,s,r){let o=[];const a=qV(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const p=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(p))&&!f)return;const v=a(e,p);v<l?(o=[{element:u,datasetIndex:h,index:d}],l=v):v===l&&o.push({element:u,datasetIndex:h,index:d})}return hc(t,n,e,c),o}function dp(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?KV(t,e,n,s):GV(t,e,n,i,s,r)}function yE(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return hc(t,n,e,(l,c,u)=>{l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var QV={evaluateInteractionItems:hc,modes:{index(t,e,n,i){const s=bs(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?hp(t,s,r,i,o):dp(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=bs(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?hp(t,s,r,i,o):dp(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=bs(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return hp(t,s,r,i,o)},nearest(t,e,n,i){const s=bs(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return dp(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=bs(e,t);return yE(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=bs(e,t);return yE(t,s,"y",n.intersect,i)}}};const lN=["left","top","right","bottom"];function ea(t,e){return t.filter(n=>n.pos===e)}function _E(t,e){return t.filter(n=>lN.indexOf(n.pos)===-1&&n.box.axis===e)}function ta(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function YV(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function XV(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!lN.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function JV(t,e){const n=XV(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function ZV(t){const e=YV(t),n=ta(e.filter(c=>c.box.fullSize),!0),i=ta(ea(e,"left"),!0),s=ta(ea(e,"right")),r=ta(ea(e,"top"),!0),o=ta(ea(e,"bottom")),a=_E(e,"x"),l=_E(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:ea(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function vE(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function cN(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function eB(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!se(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&cN(o,r.getPadding());const a=Math.max(0,e.outerWidth-vE(o,t,"left","right")),l=Math.max(0,e.outerHeight-vE(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function tB(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function nB(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function ga(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,nB(a.horizontal,e));const{same:h,other:d}=eB(e,n,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&ga(s,e,n,i)||u}function qc(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function wE(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;dn(c.start)&&(o=c.start),l.fullSize?qc(l,s.left,o,n.outerWidth-s.right-s.left,d):qc(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;dn(c.start)&&(r=c.start),l.fullSize?qc(l,r,s.top,d,n.outerHeight-s.bottom-s.top):qc(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var ln={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=kt(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=ZV(t.boxes),l=a.vertical,c=a.horizontal;le(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const u=l.reduce((g,v)=>v.box.options&&v.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);cN(d,kt(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),p=JV(l.concat(c),h);ga(a.fullSize,f,h,p),ga(l,f,h,p),ga(c,f,h,p)&&ga(l,f,h,p),tB(f),wE(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,wE(a.rightAndBottom,f,h,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},le(a.chartArea,g=>{const v=g.box;Object.assign(v,t.chartArea),v.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class uN{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class iB extends uN{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Eu="$chartjs",sB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},EE=t=>t===null||t==="";function rB(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Eu]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",EE(s)){const r=oE(t,"width");r!==void 0&&(t.width=r)}if(EE(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=oE(t,"height");r!==void 0&&(t.height=r)}return t}const hN=yV?{passive:!0}:!1;function oB(t,e,n){t.addEventListener(e,n,hN)}function aB(t,e,n){t.canvas.removeEventListener(e,n,hN)}function lB(t,e){const n=sB[t.type]||t.type,{x:i,y:s}=bs(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Fh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function cB(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Fh(a.addedNodes,i),o=o&&!Fh(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function uB(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Fh(a.removedNodes,i),o=o&&!Fh(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Nl=new Map;let xE=0;function dN(){const t=window.devicePixelRatio;t!==xE&&(xE=t,Nl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function hB(t,e){Nl.size||window.addEventListener("resize",dN),Nl.set(t,e)}function dB(t){Nl.delete(t),Nl.size||window.removeEventListener("resize",dN)}function fB(t,e,n){const i=t.canvas,s=i&&x_(i);if(!s)return;const r=HI((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),hB(t,r),o}function fp(t,e,n){n&&n.disconnect(),e==="resize"&&dB(t)}function pB(t,e,n){const i=t.canvas,s=HI(r=>{t.ctx!==null&&n(lB(r,t))},t);return oB(i,e,s),s}class gB extends uN{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(rB(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Eu])return!1;const i=n[Eu].initial;["height","width"].forEach(r=>{const o=i[r];he(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Eu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:cB,detach:uB,resize:fB}[n]||pB;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:fp,detach:fp,resize:fp}[n]||aB)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return mV(e,n,i,s)}isAttached(e){const n=x_(e);return!!(n&&n.isConnected)}}function mB(t){return!nN()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?iB:gB}class cs{constructor(){X(this,"active",!1)}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Mh(this.x)&&Mh(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}X(cs,"defaults",{}),X(cs,"defaultRoutes");function yB(t,e){const n=t.options.ticks,i=_B(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?wB(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return EB(e,c,r,o/s),c;const u=vB(r,e,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(Kc(e,c,u,he(f)?0:a-f,a),h=0,d=o-1;h<d;h++)Kc(e,c,u,r[h],r[h+1]);return Kc(e,c,u,l,he(f)?e.length:l+f),c}return Kc(e,c,u),c}function _B(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function vB(t,e,n){const i=xB(t),s=e.length/n;if(!i)return Math.max(s,1);const r=Tz(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function wB(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function EB(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function Kc(t,e,n,i,s){const r=ae(i,0),o=Math.min(ae(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function xB(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const SB=t=>t==="left"?"right":t==="right"?"left":t,SE=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n;function CE(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function CB(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function bB(t,e){le(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function na(t){return t.drawTicks?t.tickLength:0}function bE(t,e){if(!t.display)return 0;const n=He(t.font,e),i=kt(t.padding);return(Ce(t.text)?t.text.length:1)*n.lineHeight+i.height}function kB(t,e){return hr(t,{scale:e,type:"scale"})}function TB(t,e,n){return hr(t,{tick:n,index:e,type:"tick"})}function IB(t,e,n){let i=g_(t);return(n&&e!=="right"||!n&&e==="right")&&(i=SB(i)),i}function NB(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,p;const g=o-s,v=a-r;if(t.isHorizontal()){if(f=yt(i,r,a),se(n)){const y=Object.keys(n)[0],m=n[y];p=u[y].getPixelForValue(m)+g-e}else n==="center"?p=(c.bottom+c.top)/2+g-e:p=SE(t,n,e);d=a-r}else{if(se(n)){const y=Object.keys(n)[0],m=n[y];f=u[y].getPixelForValue(m)-v+e}else n==="center"?f=(c.left+c.right)/2-v+e:f=SE(t,n,e);p=yt(i,o,s),h=n==="left"?-zt:zt}return{titleX:f,titleY:p,maxWidth:d,rotation:h}}class dr extends cs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=Gt(e,Number.POSITIVE_INFINITY),n=Gt(n,Number.NEGATIVE_INFINITY),i=Gt(i,Number.POSITIVE_INFINITY),s=Gt(s,Number.NEGATIVE_INFINITY),{min:Gt(e,i),max:Gt(n,s),minDefined:et(e),maxDefined:et(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Gt(n,Gt(i,n)),max:Gt(i,Gt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ge(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=tV(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?CE(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=yB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ge(this.options.afterUpdate,[this])}beforeSetDimensions(){ge(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ge(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ge(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ge(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=ge(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){ge(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ge(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=this.ticks.length,s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=vn(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-na(e.grid)-n.padding-bE(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=f_(Math.min(Math.asin(vn((u.highest.height+6)/a,-1,1)),Math.asin(vn(l/c,-1,1))-Math.asin(vn(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){ge(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ge(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=bE(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=na(r)+l):(e.height=this.maxHeight,e.width=na(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,p=Li(this.labelRotation),g=Math.cos(p),v=Math.sin(p);if(a){const y=i.mirror?0:v*h.width+g*d.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{const y=i.mirror?0:g*h.width+v*d.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,v,g)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*n.height):(d=i*e.height,f=s*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ge(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)he(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=CE(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,n){const{ctx:i,_longestTextCache:s}=this,r=[],o=[];let a=0,l=0,c,u,h,d,f,p,g,v,y,m,_;for(c=0;c<n;++c){if(d=e[c].label,f=this._resolveTickFontOptions(c),i.font=p=f.string,g=s[p]=s[p]||{data:{},gc:[]},v=f.lineHeight,y=m=0,!he(d)&&!Ce(d))y=Oh(i,g.data,g.gc,y,d),m=v;else if(Ce(d))for(u=0,h=d.length;u<h;++u)_=d[u],!he(_)&&!Ce(_)&&(y=Oh(i,g.data,g.gc,y,_),m+=v);r.push(y),o.push(m),a=Math.max(y,a),l=Math.max(m,l)}bB(s,n);const w=r.indexOf(a),E=o.indexOf(l),x=S=>({width:r[S]||0,height:o[S]||0});return{first:x(0),last:x(n-1),widest:x(w),highest:x(E),widths:r,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Pz(this._alignToPixels?ys(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=TB(this.getContext(),e,i))}return this.$context||(this.$context=kB(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Li(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=na(r),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,v=g/2,y=function(De){return ys(i,De,g)};let m,_,w,E,x,S,b,L,D,V,Z,Le;if(o==="top")m=y(this.bottom),S=this.bottom-d,L=m-v,V=y(e.top)+v,Le=e.bottom;else if(o==="bottom")m=y(this.top),V=e.top,Le=y(e.bottom)-v,S=m+v,L=this.top+d;else if(o==="left")m=y(this.right),x=this.right-d,b=m-v,D=y(e.left)+v,Z=e.right;else if(o==="right")m=y(this.left),D=e.left,Z=y(e.right)-v,x=m+v,b=this.left+d;else if(n==="x"){if(o==="center")m=y((e.top+e.bottom)/2+.5);else if(se(o)){const De=Object.keys(o)[0],pt=o[De];m=y(this.chart.scales[De].getPixelForValue(pt))}V=e.top,Le=e.bottom,S=m+v,L=S+d}else if(n==="y"){if(o==="center")m=y((e.left+e.right)/2);else if(se(o)){const De=Object.keys(o)[0],pt=o[De];m=y(this.chart.scales[De].getPixelForValue(pt))}x=m-v,b=x-d,D=e.left,Z=e.right}const Ht=ae(s.ticks.maxTicksLimit,h),be=Math.max(1,Math.ceil(h/Ht));for(_=0;_<h;_+=be){const De=this.getContext(_),pt=r.setContext(De),A=a.setContext(De),B=pt.lineWidth,j=pt.color,fe=A.dash||[],_e=A.dashOffset,In=pt.tickWidth,qt=pt.tickColor,Hn=pt.tickBorderDash||[],Kt=pt.tickBorderDashOffset;w=CB(this,_,l),w!==void 0&&(E=ys(i,w,B),c?x=b=D=Z=E:S=L=V=Le=E,f.push({tx1:x,ty1:S,tx2:b,ty2:L,x1:D,y1:V,x2:Z,y2:Le,width:B,color:j,borderDash:fe,borderDashOffset:_e,tickWidth:In,tickColor:qt,tickBorderDash:Hn,tickBorderDashOffset:Kt}))}return this._ticksLength=h,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=na(i.grid),f=d+u,p=h?-u:f,g=-Li(this.labelRotation),v=[];let y,m,_,w,E,x,S,b,L,D,V,Z,Le="middle";if(s==="top")x=this.bottom-p,S=this._getXAxisLabelAlignment();else if(s==="bottom")x=this.top+p,S=this._getXAxisLabelAlignment();else if(s==="left"){const be=this._getYAxisLabelAlignment(d);S=be.textAlign,E=be.x}else if(s==="right"){const be=this._getYAxisLabelAlignment(d);S=be.textAlign,E=be.x}else if(n==="x"){if(s==="center")x=(e.top+e.bottom)/2+f;else if(se(s)){const be=Object.keys(s)[0],De=s[be];x=this.chart.scales[be].getPixelForValue(De)+f}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")E=(e.left+e.right)/2-f;else if(se(s)){const be=Object.keys(s)[0],De=s[be];E=this.chart.scales[be].getPixelForValue(De)}S=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?Le="top":l==="end"&&(Le="bottom"));const Ht=this._getLabelSizes();for(y=0,m=a.length;y<m;++y){_=a[y],w=_.label;const be=r.setContext(this.getContext(y));b=this.getPixelForTick(y)+r.labelOffset,L=this._resolveTickFontOptions(y),D=L.lineHeight,V=Ce(w)?w.length:1;const De=V/2,pt=be.color,A=be.textStrokeColor,B=be.textStrokeWidth;let j=S;o?(E=b,S==="inner"&&(y===m-1?j=this.options.reverse?"left":"right":y===0?j=this.options.reverse?"right":"left":j="center"),s==="top"?c==="near"||g!==0?Z=-V*D+D/2:c==="center"?Z=-Ht.highest.height/2-De*D+D:Z=-Ht.highest.height+D/2:c==="near"||g!==0?Z=D/2:c==="center"?Z=Ht.highest.height/2-De*D:Z=Ht.highest.height-V*D,h&&(Z*=-1),g!==0&&!be.showLabelBackdrop&&(E+=D/2*Math.sin(g))):(x=b,Z=(1-V)*D/2);let fe;if(be.showLabelBackdrop){const _e=kt(be.backdropPadding),In=Ht.heights[y],qt=Ht.widths[y];let Hn=Z-_e.top,Kt=0-_e.left;switch(Le){case"middle":Hn-=In/2;break;case"bottom":Hn-=In;break}switch(S){case"center":Kt-=qt/2;break;case"right":Kt-=qt;break}fe={left:Kt,top:Hn,width:qt+_e.width,height:In+_e.height,color:be.backdropColor}}v.push({label:w,font:L,textOffset:Z,options:{rotation:g,color:pt,strokeColor:A,strokeWidth:B,textAlign:j,textBaseline:Le,translation:[E,x],backdrop:fe}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Li(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=ys(e,this.left,o)-o/2,u=ys(e,this.right,a)+a/2,h=d=l):(h=ys(e,this.top,o)-o/2,d=ys(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&y_(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;rr(i,c,0,u,l,a)}s&&__(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=He(i.font),o=kt(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||se(n)?(l+=o.bottom,Ce(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=NB(this,l,n,a);rr(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:IB(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ae(e.grid&&e.grid.z,-1),s=ae(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==dr.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return He(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Gc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;PB(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,RB(e,o,i),this.override&&Oe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in Oe[s]&&(delete Oe[s][i],this.override&&delete sr[i])}}function RB(t,e,n){const i=Tl(Object.create(null),[n?Oe.get(n):{},Oe.get(e),t.defaults]);Oe.set(e,i),t.defaultRoutes&&AB(e,t.defaultRoutes),t.descriptors&&Oe.describe(e,t.descriptors)}function AB(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Oe.route(r,s,l,a)})}function PB(t){return"id"in t&&"defaults"in t}class DB{constructor(){this.controllers=new Gc($a,"datasets",!0),this.elements=new Gc(cs,"elements"),this.plugins=new Gc(Object,"plugins"),this.scales=new Gc(dr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):le(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=d_(e);ge(i["before"+s],[],i),n[e](i),ge(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Pn=new DB;class MB{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(ge(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){he(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=ae(i.options&&i.options.plugins,{}),r=OB(i);return s===!1&&!n?[]:FB(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function OB(t){const e={},n=[],i=Object.keys(Pn.plugins.items);for(let r=0;r<i.length;r++)n.push(Pn.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function LB(t,e){return!e&&t===!1?null:t===!0?{}:t}function FB(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=LB(i[l],s);c!==null&&r.push({plugin:a,options:$B(t.config,{plugin:a,local:n[l]},c,o)})}return r}function $B(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ym(t,e){const n=Oe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function UB(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function zB(t,e){return t===e?"_index_":"_value_"}function VB(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function $h(t,e){if(t==="x"||t==="y"||t==="r"||(t=e.axis||VB(e.position)||t.length>1&&$h(t[0].toLowerCase(),e),t))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function BB(t,e){const n=sr[t.type]||{scales:{}},i=e.scales||{},s=ym(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!se(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=$h(o,a),c=zB(l,s),u=n.scales||{};r[o]=Oa(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||ym(a,e),u=(sr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=UB(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),Oa(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];Oa(a,[Oe.scales[a.type],Oe.scale])}),r}function fN(t){const e=t.options||(t.options={});e.plugins=ae(e.plugins,{}),e.scales=BB(t,e)}function pN(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function jB(t){return t=t||{},t.data=pN(t.data),fN(t),t}const kE=new Map,gN=new Set;function Qc(t,e){let n=kE.get(t);return n||(n=e(),kE.set(t,n),gN.add(n)),n}const ia=(t,e,n)=>{const i=Eo(e,n);i!==void 0&&t.add(i)};class WB{constructor(e){this._config=jB(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=pN(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),fN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Qc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Qc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Qc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Qc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>ia(l,e,h))),u.forEach(h=>ia(l,s,h)),u.forEach(h=>ia(l,sr[r]||{},h)),u.forEach(h=>ia(l,Oe,h)),u.forEach(h=>ia(l,mm,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),gN.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,sr[n]||{},Oe.datasets[n]||{},{type:n},Oe,mm]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=TE(this._resolverCache,e,s);let l=o;if(qB(o,n)){r.$shared=!1,i=ls(i)?i():i;const c=this.createResolver(e,i,a);l=xo(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=TE(this._resolverCache,e,i);return se(n)?xo(r,n,void 0,s):r}}function TE(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:v_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const HB=t=>se(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||ls(t[n]),!1);function qB(t,e){const{isScriptable:n,isIndexable:i}=JI(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(ls(a)||HB(a))||o&&Ce(a))return!0}return!1}var KB="4.1.1";const GB=["top","bottom","left","right","chartArea"];function IE(t,e){return t==="top"||t==="bottom"||GB.indexOf(t)===-1&&e==="x"}function NE(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function RE(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ge(n&&n.onComplete,[t],e)}function QB(t){const e=t.chart,n=e.options.animation;ge(n&&n.onProgress,[t],e)}function mN(t){return nN()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const xu={},AE=t=>{const e=mN(t);return Object.values(xu).filter(n=>n.canvas===e).pop()};function YB(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function XB(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function JB(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}var Ei;let dc=(Ei=class{static register(...e){Pn.add(...e),PE()}static unregister(...e){Pn.remove(...e),PE()}constructor(e,n){const i=this.config=new WB(n),s=mN(e),r=AE(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||mB(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=vz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new MB,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Lz(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],xu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Kn.listen(this,"complete",RE),Kn.listen(this,"progress",QB),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return he(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Pn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():rE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tE(this.canvas,this.ctx),this}stop(){return Kn.stop(this),this}resize(e,n){Kn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,rE(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ge(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};le(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=$h(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),le(r,o=>{const a=o.options,l=a.id,c=$h(l,a),u=ae(a.type,o.dtype);(a.position===void 0||IE(a.position,c)!==IE(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=Pn.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),le(s,(o,a)=>{o||delete i[a]}),le(i,o=>{ln.configure(this,o,o.options),ln.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(NE("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||ym(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Pn.getController(a),{datasetElementType:c,dataElementType:u}=Oe.datasets[a];Object.assign(l,{dataElementType:Pn.getElement(u),datasetElementType:c&&Pn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){le(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||le(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(NE("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){le(this.scales,e=>{ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!q1(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;YB(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!q1(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ln.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],le(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ls(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kn.has(this)?this.attached&&!Kn.running(this)&&Kn.start(this):(this.draw(),RE({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=JB(e)||this.chartArea,o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&y_(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&__(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return QI(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=QV.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=hr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);dn(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Kn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),tE(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete xu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};le(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){le(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},le(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Ah(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=bz(e),c=XB(e,this._lastEvent,i,l);i&&(this._lastEvent=null,ge(r.onHover,[e,a,this],this),l&&ge(r.onClick,[e,a,this],this));const u=!Ah(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},X(Ei,"defaults",Oe),X(Ei,"instances",xu),X(Ei,"overrides",sr),X(Ei,"registry",Pn),X(Ei,"version",KB),X(Ei,"getChart",AE),Ei);function PE(){return le(dc.instances,t=>t._plugins.invalidate())}function yN(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-h,u=i+h):(h=r/2,a=n-h,l=n+h,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function Fi(t,e,n,i){return t?0:vn(e,n,i)}function ZB(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=XI(i);return{t:Fi(s.top,r.top,0,n),r:Fi(s.right,r.right,0,e),b:Fi(s.bottom,r.bottom,0,n),l:Fi(s.left,r.left,0,e)}}function ej(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=Bs(s),o=Math.min(e,n),a=t.borderSkipped,l=i||se(s);return{topLeft:Fi(!l||a.top||a.left,r.topLeft,0,o),topRight:Fi(!l||a.top||a.right,r.topRight,0,o),bottomLeft:Fi(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Fi(!l||a.bottom||a.right,r.bottomRight,0,o)}}function tj(t){const e=yN(t),n=e.right-e.left,i=e.bottom-e.top,s=ZB(t,n/2,i/2),r=ej(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function pp(t,e,n,i){const s=e===null,r=n===null,a=t&&!(s&&r)&&yN(t,i);return a&&(s||Dr(e,a.left,a.right))&&(r||Dr(n,a.top,a.bottom))}function nj(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function ij(t,e){t.rect(e.x,e.y,e.w,e.h)}function gp(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}class Su extends cs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=tj(this),a=nj(o.radius)?Il:ij;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,gp(o,n,r)),e.clip(),a(e,gp(r,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,gp(r,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,i){return pp(this,e,n,i)}inXRange(e,n){return pp(this,e,null,n)}inYRange(e,n){return pp(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}X(Su,"id","bar"),X(Su,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),X(Su,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const DE=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},sj=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ME extends cs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ge(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=He(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=DE(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((p,g)=>{const v=i+n/2+r.measureText(p.text).width;(g===0||c[c.length-1]+v+2*a>o)&&(h+=u,c[c.length-(g>0?0:1)]=0,f+=u,d++),l[g]={left:0,top:f,row:d,width:v,height:s},c[c.length-1]+=v+a}),h}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,p=0,g=0;return this.legendItems.forEach((v,y)=>{const{itemWidth:m,itemHeight:_}=rj(i,n,r,v,s);y>0&&f+_+2*a>u&&(h+=d+a,c.push({width:d,height:f}),p+=d+a,g++,d=f=0),l[y]={left:p,top:f,col:g,width:m,height:_},d=Math.max(d,m),f+=_+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Xr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=yt(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=yt(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=yt(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=yt(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;y_(e,this),this._draw(),__(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=Oe.color,l=Xr(e.rtl,this.left,this.width),c=He(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:v}=DE(o,h),y=function(x,S,b){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;s.save();const L=ae(b.lineWidth,1);if(s.fillStyle=ae(b.fillStyle,a),s.lineCap=ae(b.lineCap,"butt"),s.lineDashOffset=ae(b.lineDashOffset,0),s.lineJoin=ae(b.lineJoin,"miter"),s.lineWidth=L,s.strokeStyle=ae(b.strokeStyle,a),s.setLineDash(ae(b.lineDash,[])),o.usePointStyle){const D={radius:g*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:L},V=l.xPlus(x,p/2),Z=S+d;GI(s,D,V,Z,o.pointStyleWidth&&p)}else{const D=S+Math.max((h-g)/2,0),V=l.leftForLtr(x,p),Z=Bs(b.borderRadius);s.beginPath(),Object.values(Z).some(Le=>Le!==0)?Il(s,{x:V,y:D,w:p,h:g,radius:Z}):s.rect(V,D,p,g),s.fill(),L!==0&&s.stroke()}s.restore()},m=function(x,S,b){rr(s,b.text,x,S+v/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},_=this.isHorizontal(),w=this._computeTitleHeight();_?f={x:yt(r,this.left+u,this.right-i[0]),y:this.top+u+w,line:0}:f={x:this.left+u,y:yt(r,this.top+w+u,this.bottom-n[0].height),line:0},iN(this.ctx,e.textDirection);const E=v+u;this.legendItems.forEach((x,S)=>{s.strokeStyle=x.fontColor,s.fillStyle=x.fontColor;const b=s.measureText(x.text).width,L=l.textAlign(x.textAlign||(x.textAlign=o.textAlign)),D=p+d+b;let V=f.x,Z=f.y;l.setWidth(this.width),_?S>0&&V+D+u>this.right&&(Z=f.y+=E,f.line++,V=f.x=yt(r,this.left+u,this.right-i[f.line])):S>0&&Z+E>this.bottom&&(V=f.x=V+n[f.line].width+u,f.line++,Z=f.y=yt(r,this.top+w+u,this.bottom-n[f.line].height));const Le=l.x(V);if(y(Le,Z,x),V=Fz(L,V+p+d,_?V+D:this.right,e.rtl),m(l.x(V),Z,x),_)f.x+=D+u;else if(typeof x.text!="string"){const Ht=c.lineHeight;f.y+=_N(x,Ht)}else f.y+=E}),sN(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=He(n.font),s=kt(n.padding);if(!n.display)return;const r=Xr(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=yt(e.align,h,this.right-d);else{const p=this.columnSizes.reduce((g,v)=>Math.max(g,v.height),0);u=c+yt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const f=yt(a,h,h+d);o.textAlign=r.textAlign(g_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,rr(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=He(e.font),i=kt(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(Dr(e,this.left,this.right)&&Dr(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Dr(e,s.left,s.left+s.width)&&Dr(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!lj(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=sj(s,i);s&&!r&&ge(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&ge(n.onHover,[e,i,this],this)}else i&&ge(n.onClick,[e,i,this],this)}}function rj(t,e,n,i,s){const r=oj(i,t,e,n),o=aj(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function oj(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function aj(t,e,n){let i=t;return typeof e.text!="string"&&(i=_N(e,n)),i}function _N(t,e){const n=t.text?t.text.length+.5:0;return e*n}function lj(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var cj={id:"legend",_element:ME,start(t,e,n){const i=t.legend=new ME({ctx:t.ctx,options:n,chart:t});ln.configure(t,i,n),ln.addBox(t,i)},stop(t){ln.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;ln.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=kt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class vN extends cs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Ce(i.text)?i.text.length:1;this._padding=kt(i.padding);const r=s*He(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=yt(a,i,r),h=n+e,c=r-i):(o.position==="left"?(u=i+e,h=yt(a,s,n),l=dt*-.5):(u=r-e,h=yt(a,n,s),l=dt*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=He(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);rr(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:g_(n.align),textBaseline:"middle",translation:[o,a]})}}function uj(t,e){const n=new vN({ctx:t.ctx,options:e,chart:t});ln.configure(t,n,e),ln.addBox(t,n),t.titleBlock=n}var hj={id:"title",_element:vN,start(t,e,n){uj(t,n)},stop(t){const e=t.titleBlock;ln.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;ln.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ma={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Rz(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Rn(t,e){return e&&(Ce(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Gn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function dj(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function OE(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=He(e.bodyFont),c=He(e.titleFont),u=He(e.footerFont),h=r.length,d=s.length,f=i.length,p=kt(e.padding);let g=p.height,v=0,y=i.reduce((w,E)=>w+E.before.length+E.lines.length+E.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y){const w=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*w+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}d&&(g+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let m=0;const _=function(w){v=Math.max(v,n.measureText(w).width+m)};return n.save(),n.font=c.string,le(t.title,_),n.font=l.string,le(t.beforeBody.concat(t.afterBody),_),m=e.displayColors?o+2+e.boxPadding:0,le(i,w=>{le(w.before,_),le(w.lines,_),le(w.after,_)}),m=0,n.font=u.string,le(t.footer,_),n.restore(),v+=p.width,{width:v,height:g}}function fj(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function pj(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function gj(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),pj(c,t,e,n)&&(c="center"),c}function LE(t,e,n){const i=n.yAlign||e.yAlign||fj(t,n);return{xAlign:n.xAlign||e.xAlign||gj(t,e,n,i),yAlign:i}}function mj(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function yj(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function FE(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Bs(o);let p=mj(e,a);const g=yj(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,d)+s:a==="right"&&(p+=Math.max(h,f)+s),{x:vn(p,0,i.width-e.width),y:vn(g,0,i.height-e.height)}}function Yc(t,e,n){const i=kt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function $E(t){return Rn([],Gn(t))}function _j(t,e,n){return hr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function UE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const wN={beforeTitle:qn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:qn,beforeBody:qn,beforeLabel:qn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return he(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:qn,afterBody:qn,beforeFooter:qn,footer:qn,afterFooter:qn};function Mt(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?wN[e].call(n,i):s}class _m extends cs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new rN(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=_j(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=Mt(i,"beforeTitle",this,e),r=Mt(i,"title",this,e),o=Mt(i,"afterTitle",this,e);let a=[];return a=Rn(a,Gn(s)),a=Rn(a,Gn(r)),a=Rn(a,Gn(o)),a}getBeforeBody(e,n){return $E(Mt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return le(e,r=>{const o={before:[],lines:[],after:[]},a=UE(i,r);Rn(o.before,Gn(Mt(a,"beforeLabel",this,r))),Rn(o.lines,Mt(a,"label",this,r)),Rn(o.after,Gn(Mt(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return $E(Mt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=Mt(i,"beforeFooter",this,e),r=Mt(i,"footer",this,e),o=Mt(i,"afterFooter",this,e);let a=[];return a=Rn(a,Gn(s)),a=Rn(a,Gn(r)),a=Rn(a,Gn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(dj(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),le(a,u=>{const h=UE(e.callbacks,u);s.push(Mt(h,"labelColor",this,u)),r.push(Mt(h,"labelPointStyle",this,u)),o.push(Mt(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=ma[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=OE(this,i),c=Object.assign({},a,l),u=LE(this.chart,i,c),h=FE(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Bs(a),{x:d,y:f}=e,{width:p,height:g}=n;let v,y,m,_,w,E;return r==="center"?(w=f+g/2,s==="left"?(v=d,y=v-o,_=w+o,E=w-o):(v=d+p,y=v+o,_=w-o,E=w+o),m=v):(s==="left"?y=d+Math.max(l,u)+o:s==="right"?y=d+p-Math.max(c,h)-o:y=this.caretX,r==="top"?(_=f,w=_-o,v=y-o,m=y+o):(_=f+g,w=_+o,v=y+o,m=y-o),E=_),{x1:v,x2:y,x3:m,y1:_,y2:w,y3:E}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Xr(i.rtl,this.x,this.width);for(e.x=Yc(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=He(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c,boxPadding:u}=r,h=He(r.bodyFont),d=Yc(this,"left",r),f=s.x(d),p=l<h.lineHeight?(h.lineHeight-l)/2:0,g=n.y+p;if(r.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=s.leftForLtr(f,c)+c/2,m=g+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,nE(e,v,y,m),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,nE(e,v,y,m)}else{e.lineWidth=se(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=s.leftForLtr(f,c-u),y=s.leftForLtr(s.xPlus(f,1),c-u-2),m=Bs(o.borderRadius);Object.values(m).some(_=>_!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Il(e,{x:v,y:g,w:c,h:l,radius:m}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Il(e,{x:y,y:g+1,w:c-2,h:l-2,radius:m}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(v,g,c,l),e.strokeRect(v,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(y,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=He(i.bodyFont);let d=h.lineHeight,f=0;const p=Xr(i.rtl,this.x,this.width),g=function(b){n.fillText(b,p.x(e.x+f),e.y+d/2),e.y+=d+r},v=p.textAlign(o);let y,m,_,w,E,x,S;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Yc(this,v,i),n.fillStyle=i.bodyColor,le(this.beforeBody,g),f=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,w=0,x=s.length;w<x;++w){for(y=s[w],m=this.labelTextColors[w],n.fillStyle=m,le(y.before,g),_=y.lines,a&&_.length&&(this._drawColorBox(n,e,w,p,i),d=Math.max(h.lineHeight,l)),E=0,S=_.length;E<S;++E)g(_[E]),d=h.lineHeight;le(y.after,g)}f=0,d=h.lineHeight,le(this.afterBody,g),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Xr(i.rtl,this.x,this.width);for(e.x=Yc(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=He(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Bs(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=ma[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=OE(this,e),l=Object.assign({},o,this._size),c=LE(n,e,l),u=FE(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=kt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),iN(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),sN(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Ah(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!Ah(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n;const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=ma[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}X(_m,"positioners",ma);var vj={id:"tooltip",_element:_m,positioners:ma,afterInit(t,e,n){n&&(t.tooltip=new _m({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:wN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const wj=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Ej(t,e,n,i){const s=t.indexOf(e);if(s===-1)return wj(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const xj=(t,e)=>t===null?null:vn(Math.round(t),0,e);function zE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class vm extends dr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(he(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:Ej(i,e,ae(n,e),this._addedLabels),xj(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return zE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}X(vm,"id","category"),X(vm,"defaults",{ticks:{callback:zE}});function Sj(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,p=u-1,{min:g,max:v}=e,y=!he(o),m=!he(a),_=!he(c),w=(v-g)/(h+1);let E=G1((v-g)/p/f)*f,x,S,b,L;if(E<1e-14&&!y&&!m)return[{value:g},{value:v}];L=Math.ceil(v/E)-Math.floor(g/E),L>p&&(E=G1(L*E/p/f)*f),he(l)||(x=Math.pow(10,l),E=Math.ceil(E*x)/x),s==="ticks"?(S=Math.floor(g/E)*E,b=Math.ceil(v/E)*E):(S=g,b=v),y&&m&&r&&Iz((a-o)/r,E/1e3)?(L=Math.round(Math.min((a-o)/E,u)),E=(a-o)/L,S=o,b=a):_?(S=y?o:S,b=m?a:b,L=c-1,E=(b-S)/L):(L=(b-S)/E,vu(L,Math.round(L),E/1e3)?L=Math.round(L):L=Math.ceil(L));const D=Math.max(Q1(E),Q1(S));x=Math.pow(10,he(l)?D:l),S=Math.round(S*x)/x,b=Math.round(b*x)/x;let V=0;for(y&&(d&&S!==o?(n.push({value:o}),S<o&&V++,vu(Math.round((S+V*E)*x)/x,o,VE(o,w,t))&&V++):S<o&&V++);V<L;++V)n.push({value:Math.round((S+V*E)*x)/x});return m&&d&&b!==a?n.length&&vu(n[n.length-1].value,a,VE(a,w,t))?n[n.length-1].value=a:n.push({value:a}):(!m||b===a)&&n.push({value:b}),n}function VE(t,e,{horizontal:n,minRotation:i}){const s=Li(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Uh extends dr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return he(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=Zi(s),c=Zi(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=Sj(s,r);return e.bounds==="ticks"&&VI(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return m_(e,this.chart.options.locale,this.options.ticks.format)}}class wm extends Uh{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=et(e)?e:0,this.max=et(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Li(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}X(wm,"id","linear"),X(wm,"defaults",{ticks:{callback:nf.formatters.numeric}});const Rl=t=>Math.floor(Oi(t)),vs=(t,e)=>Math.pow(10,Rl(t)+e);function BE(t){return t/Math.pow(10,Rl(t))===1}function jE(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function Cj(t,e){const n=e-t;let i=Rl(n);for(;jE(t,e,i)>10;)i++;for(;jE(t,e,i)<10;)i--;return Math.min(i,Rl(t))}function bj(t,{min:e,max:n}){e=Gt(t.min,e);const i=[],s=Rl(e);let r=Cj(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=Gt(t.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:BE(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=Gt(t.max,d);return i.push({value:f,major:BE(f),significand:h}),i}class WE extends dr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Uh.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return et(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=et(e)?Math.max(0,e):null,this.max=et(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!et(this._userMin)&&(this.min=e===vs(this.min,0)?vs(this.min,-1):vs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(vs(i,-1)),o(vs(s,1)))),i<=0&&r(vs(s,-1)),s<=0&&o(vs(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=bj(n,this);return e.bounds==="ticks"&&VI(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":m_(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Oi(e),this._valueRange=Oi(this.max)-Oi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Oi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}X(WE,"id","logarithmic"),X(WE,"defaults",{ticks:{callback:nf.formatters.logarithmic,major:{enabled:!0}}});function Em(t){const e=t.ticks;if(e.display&&t.display){const n=kt(e.backdropPadding);return ae(e.font&&e.font.size,Oe.font.size)+n.height}return 0}function kj(t,e,n){return n=Ce(n)?n:[n],{w:Kz(t,e.string,n),h:n.length*e.lineHeight}}function HE(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function Tj(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?dt/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=He(c.font),d=kj(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=Dn(t.getIndexAngle(l)+a),p=Math.round(f_(f)),g=HE(p,u.x,d.w,0,180),v=HE(p,u.y,d.h,90,270);Ij(n,e,f,g,v)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Nj(t,i,s)}function Ij(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Nj(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,o=Em(r)/2,a=t.drawingArea,l=r.pointLabels.centerPointLabels?dt/s:0;for(let c=0;c<s;c++){const u=t.getPointPosition(c,a+o+n[c],l),h=Math.round(f_(Dn(u.angle+zt))),d=e[c],f=Pj(u.y,d.h,h),p=Rj(h),g=Aj(u.x,d.w,p);i.push({x:u.x,y:f,textAlign:p,left:g,top:f,right:g+d.w,bottom:f+d.h})}return i}function Rj(t){return t===0||t===180?"center":t<180?"left":"right"}function Aj(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Pj(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Dj(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=i.setContext(t.getPointLabelContext(s)),o=He(r.font),{x:a,y:l,textAlign:c,left:u,top:h,right:d,bottom:f}=t._pointLabelItems[s],{backdropColor:p}=r;if(!he(p)){const g=Bs(r.borderRadius),v=kt(r.backdropPadding);n.fillStyle=p;const y=u-v.left,m=h-v.top,_=d-u+v.width,w=f-h+v.height;Object.values(g).some(E=>E!==0)?(n.beginPath(),Il(n,{x:y,y:m,w:_,h:w,radius:g}),n.fill()):n.fillRect(y,m,_,w)}rr(n,t._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}function EN(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,Bn);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function Mj(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),EN(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function Oj(t,e,n){return hr(t,{label:n,index:e,type:"pointLabel"})}class Xc extends Uh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=kt(Em(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=et(e)&&!isNaN(e)?e:0,this.max=et(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Em(this.options))}generateTickLabels(e){Uh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=ge(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?Tj(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=Bn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Dn(e*n+Li(i))}getDistanceFromCenterForValue(e){if(he(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(he(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return Oj(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-zt+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),EN(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Dj(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=s.setContext(d),p=r.setContext(d);Mj(this,f,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=He(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=kt(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}rr(e,a.label,0,-r,u,{color:c.color})}),e.restore()}drawTitle(){}}X(Xc,"id","radialLinear"),X(Xc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:nf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),X(Xc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),X(Xc,"descriptors",{angleLines:{_fallback:"grid"}});const rf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Lt=Object.keys(rf);function Lj(t,e){return t-e}function qE(t,e){if(he(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),et(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Mh(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function KE(t,e,n,i){const s=Lt.length;for(let r=Lt.indexOf(t);r<s-1;++r){const o=rf[Lt[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Lt[r]}return Lt[s-1]}function Fj(t,e,n,i,s){for(let r=Lt.length-1;r>=Lt.indexOf(n);r--){const o=Lt[r];if(rf[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return Lt[n?Lt.indexOf(n):0]}function $j(t){for(let e=Lt.indexOf(t)+1,n=Lt.length;e<n;++e)if(rf[Lt[e]].common)return Lt[e]}function GE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=p_(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function Uj(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function QE(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:Uj(t,i,s,n)}class zh extends dr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new WV._date(e.adapters.date);s.init(n),Oa(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:qE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=et(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=et(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=Mz(s,r,o);return this._unit=n.unit||(i.autoSkip?KE(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):Fj(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:$j(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),QE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=vn(n,0,o),i=vn(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||KE(r.minUnit,n,i,this._getLabelCapacity(n)),a=ae(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=Mh(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)GE(u,d,p);return(d===i||s.bounds==="ticks"||f===1)&&GE(u,d,p),Object.keys(u).sort((g,v)=>g-v).map(g=>+g)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return ge(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=Li(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,QE(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(qE(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jI(e.sort(Lj))}}X(zh,"id","time"),X(zh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Jc(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=gm(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=gm(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class YE extends zh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Jc(n,this.min),this._tableRange=Jc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Jc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Jc(this._table,i*this._tableRange+this._minPos,!0)}}X(YE,"id","timeseries"),X(YE,"defaults",zh.defaults);const xN="label";function XE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function zj(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function SN(t,e){t.labels=e}function CN(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xN;const i=[];t.datasets=e.map(s=>{const r=t.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function Vj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xN;const n={labels:[],datasets:[]};return SN(n,t.labels),CN(n,t.datasets,e),n}function Bj(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,f=k.exports.useRef(null),p=k.exports.useRef(),g=()=>{f.current&&(p.current=new dc(f.current,{type:o,data:Vj(a,r),options:l&&{...l},plugins:c}),XE(e,p.current))},v=()=>{XE(e,null),p.current&&(p.current.destroy(),p.current=null)};return k.exports.useEffect(()=>{!s&&p.current&&l&&zj(p.current,l)},[s,l]),k.exports.useEffect(()=>{!s&&p.current&&SN(p.current.config.data,a.labels)},[s,a.labels]),k.exports.useEffect(()=>{!s&&p.current&&a.datasets&&CN(p.current.config.data,a.datasets,r)},[s,a.datasets]),k.exports.useEffect(()=>{p.current&&(s?(v(),setTimeout(g)):p.current.update(h))},[s,l,a.labels,a.datasets,h]),k.exports.useEffect(()=>{p.current&&(v(),setTimeout(g))},[o]),k.exports.useEffect(()=>(g(),()=>v()),[]),wn.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},d),u)}const jj=k.exports.forwardRef(Bj);function Wj(t,e){return dc.register(e),k.exports.forwardRef((n,i)=>wn.createElement(jj,Object.assign({},n,{ref:i,type:t})))}const Hj=Wj("bar",wu);dc.register(vm,wm,Su,hj,vj,cj);dc.defaults.font.size=20;const qj={responsive:!0,plugins:{legend:{display:!1},title:{display:!1}}},Kj=["Cold","Neutral","Warm"];function Gj({votes:t}){return C("div",{className:"grid",children:C(Hj,{options:qj,data:{labels:Kj,datasets:[{data:t,backgroundColor:["rgb(53, 154, 251,0.35)","rgb(164, 176, 190, 0.35)","rgb(234, 133, 53, 0.35)"],borderColor:["rgb(53, 154, 251, 1)","rgb(164, 176, 190, 1)","rgb(234, 133, 53, 1)"],borderWidth:2}]}})})}function Qj(t){return $l({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 1024c-69.1 0-136.2-13.5-199.3-40.2C251.7 958 197 921 150 874c-47-47-84-101.7-109.8-162.7C13.5 648.2 0 581.1 0 512c0-19.9 16.1-36 36-36s36 16.1 36 36c0 59.4 11.6 117 34.6 171.3 22.2 52.4 53.9 99.5 94.3 139.9 40.4 40.4 87.5 72.2 139.9 94.3C395 940.4 452.6 952 512 952c59.4 0 117-11.6 171.3-34.6 52.4-22.2 99.5-53.9 139.9-94.3 40.4-40.4 72.2-87.5 94.3-139.9C940.4 629 952 571.4 952 512c0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.2C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3s-13.5 136.2-40.2 199.3C958 772.3 921 827 874 874c-47 47-101.8 83.9-162.7 109.7-63.1 26.8-130.2 40.3-199.3 40.3z"}}]})(t)}function Yj(){l_("Reports");const[t,e]=k.exports.useState([]);k.exports.useEffect(()=>{setTimeout(()=>{const i=Mk(bl,"Comfort"),s=jk(i,Wk("date","desc"),Hk(1)),r=Yk(s,o=>{console.log("snapshot",o),o.forEach(a=>{let l=a.data();e([l.cold,l.neutral,l.warm])})});return()=>r},500)},[]);function n(){return ee("div",{className:"flex flex-col items-center justify-center mt-15 pt-10",children:[C(Qj,{className:"text-emerald-400 animate-spin",size:200}),C("h1",{className:"font-semibold text-3xl mt-8",children:"Loading..."})]})}return ee(si,{children:[C("div",{className:"sm:m-8 mt-8 mx-8 mb-2 text-center justify-center",children:C("h1",{className:"font-semibold text-3xl sm:p-4",children:"Número de votos"})}),t.length!=0?C(Gj,{votes:t}):C(n,{}),C("button",{className:"rounded-md bg-slate-600 text-white w-32",onClick:()=>{e([20,30,50])},children:"cargar"})]})}const Xj=["spanish","english"],Cu={spanish:{header:"Acerca de nuestro proyecto",instructions:`¡Hola! Este proyecto tiene como objetivo asegurar el confort térmico de todas las personas que se encuentren en un ambiente en común. En este caso lo estamos probando donde te encuentras ahora mismo, el poderosísimo LST (Laboratorio de Sistemas Telemáticos).
El uso de la aplicación es simple, en la página Home encontrarás 3 botones que describen un estado diferente de confort térmico (frío, neutral, calor). Probablemente te sientas identificado con alguno de ellos. Si es así, siéntete libre de hacer click en el botón que mejor represente cómo percibes el ambiente en el momento. Esto registrara tu voto en una base de datos, en donde contaremos cuantas personas votaron por el frío, cuantos por el neutral y cuantos por el calor cada 15 minutos. Utilizaremos estos datos y otras variables del entorno para alimentar una SUPER inteligencia artificial de ULTIMA generación, que determinará el estado óptimo para que todas las personas se encuentren en confort. Bueno, en realidad la IA recién está comenzando a entrenarse y ustedes son los primeros datos que ella va a consumir. Esto quiere decir que con un simple click, estas aportando con la ciencia que se desarrolla en la ESPOL. Interesante, ¿no? De antemano, muchísimas gracias por su colaboración con nuestro humilde proyecto. Te deseamos mucho éxito en tu carrera.`,label:"Idioma:",disabled:"Seleccione idioma",labels:["Español","Inglés"]},english:{header:"About our project",instructions:`Hello! This project aims to ensure the thermal comfort of all people who are in a common environment. In this case we are testing it where you are right now, the very powerful (lost in translation XD) LST (Laboratorio de Sistemas Telemáticos).
The use of the app is simple, on the Home page you will find 3 buttons that describe a different state of thermal comfort (cold, neutral, heat). You probably feel identified with one of them. If so, feel free to click the button that best represents how you perceive the environment now. This will register your vote in a database, where we will count how many people voted for cold, how many for neutral and how many for hot every 15 minutes. We will use this data and other environmental variables to feed a LATEST generation SUPER artificial intelligence, which will determine the optimal state for all people to be comfortable. Well, actually the AI is just starting to train itself and you are the first data it is going to consume. This means that with a simple click, you are contributing to the science that is developed at ESPOL. Interesting, right? In advance, thank you very much for your collaboration with our humble project. We wish you much success in your career.`,label:"Language:",disabled:"Select language",labels:["Spanish","English"]}};function Jj({language:t}){return ee(si,{children:[C("h1",{className:"font-semibold text-5xl",children:Cu[t].header}),C("div",{className:"p-10 px-20 whitespace-pre-wrap text-justify",children:C("p",{children:Cu[t].instructions})}),C("label",{className:"mr-2",children:Cu[t].label})]})}function Zj(){l_("About");const[t,e]=k.exports.useState("spanish");function n({language:i,options:s=Xj,props:r=Cu}){return ee(si,{children:[ee("option",{disabled:!0,children:[r[i].disabled," "]},"disabled"),r[i].labels.map((o,a)=>C("option",{value:s[a],children:o},s[a]))]})}return C(si,{children:ee("div",{className:"mt-20 justify-center text-center",children:[C(Jj,{language:t}),C("select",{value:t,onChange:i=>{e(i.target.value)},children:C(n,{language:t})})]})})}const e6="/assets/young-man-sitting-nobg-a4c00a09.png",t6="/assets/temperature-f8a9335c.svg",n6="/assets/happy-61e8f7cc.svg";function JE({label:t,type:e,placeholder:n,kbAction:i,valueSetter:s}){return ee("div",{className:"mt-2 text-gray-200",children:[C("label",{className:"font-medium text-lg",htmlFor:"",children:t}),C("input",{className:"w-full border-2 border-gray-300 rounded-xl p-4 mt-2 bg-transparent placeholder-gray-500",type:e,placeholder:n,autoComplete:"on",autoFocus:!0,onKeyDown:i,onChange:r=>s(r.target.value)})]})}function i6({children:t,signInHandler:e,registerSetter:n}){const[i,s]=k.exports.useState(""),[r,o]=k.exports.useState(""),a=k.exports.useRef(null);function l(c){c.keyCode===13&&a.current.click()}return ee("div",{className:"relative bg-gray-800 px-6 pt-10 pb-8 shadow-xl ring-1 ring-gray-900/5 mx-auto sm:max-w-lg sm:rounded-lg rounded-md sm:px-10",children:[ee("div",{className:"flex justify-center mb-2",children:[C("h1",{className:"text-3xl sm:text-5xl font-semibold text-gray-50",children:"Comfort++"}),C("img",{className:"w-10 ml-2",src:t6,alt:""}),C("img",{className:"w-10 ml-2",src:n6,alt:""})]}),C("div",{className:"flex justify-center text-center",children:C("h1",{className:"font-medium text-lg text-gray-100 mt-4",children:"Welcome Back! Please enter your details to get comfort"})}),C(JE,{label:"Username or email:",type:"text",placeholder:"Enter username or email",kbAction:l,valueSetter:s}),C(JE,{label:"Password:",type:"password",placeholder:"Enter your password",kbAction:l,valueSetter:o}),C("div",{className:"mt-8 flex flex-col gap-y-4",children:C("button",{disabled:!(i&&r),ref:a,className:"py-3 rounded-xl text-lg font-bold "+(i&&r?"bg-emerald-400 active:scale-[.97] active:duration-75 transition-all hover:scale-[1.01] ease-in-out":"bg-emerald-200"),onClick:c=>{c.preventDefault(),e(i,r)},children:"Sign In"})}),t]})}function s6(){const[t,e]=k.exports.useState(!1),[n,i]=k.exports.useState(!1),[s,r]=k.exports.useState(!1);async function o(a,l){const[c,u]=await L5(a);if(!u){r(!1),i(!0);return}try{let h=await ZF(a_,c,l)}catch(h){console.error(h.message),console.error(h.code),i(!1),r(!0)}}return k.exports.useEffect(()=>{document.title="Login - Comfort++"},[]),C(si,{children:ee("div",{className:"flex flex-col w-full h-screen justify-center bg-gray-700 px-8",children:[C("img",{className:"absolute top-1/2 left-1/2 sm:max-w-none max-h-full -translate-x-1/2 -translate-y-1/2 blur-sm",src:e6,alt:""}),ee(i6,{signInHandler:o,registerSetter:e,children:[s?C("div",{className:"text-emerald-400 text-center mt-4",children:"Incorrect password"}):C(si,{}),n?C("div",{className:"text-emerald-400 text-center mt-4",children:"User not found"}):C(si,{})]})]})})}const bN=k.exports.createContext();function r6({currentUser:t,authState:e}){return C(bN.Provider,{value:[t,e],children:e?C(e2,{children:ee("div",{className:"flex flex-col h-screen",children:[C(o2,{}),ee(QP,{children:[C(hu,{path:"/",element:C(Y5,{})}),C(hu,{path:"/reports",element:C(Yj,{})}),C(hu,{path:"/about",element:C(Zj,{})})]})]})}):C(s6,{})})}function o6(){return C("div",{className:"absolute top-0 left-0 w-full h-screen bg-gray-800 flex flex-col justify-center text-center",children:C("h1",{className:"text-shadow text-8xl py-6",children:"Comfort++"})})}function a6(){const[t,e]=k.exports.useState(!1),[n,i]=k.exports.useState(null);return n$(a_,s=>{s?(e(!0),i(s)):(i(null),e(!1))}),[n,t]}function l6(){const[t,e]=a6(),[n,i]=k.exports.useState(!1);return setTimeout(()=>{i(!0)},1500),C(si,{children:n?C(r6,{currentUser:t,authState:e}):C(o6,{})})}yp.createRoot(document.getElementById("root")).render(C(wn.StrictMode,{children:C(l6,{})}));
